import{d as De,a as E,t as M}from"./V5aHZNy7.js";import{m as Ke,l as Ze,o as je,aq as He,J as Vt,ar as Kt,O as Qe,aD as tn,j as $e,E as en,aE as nn,aF as on,aG as rn,aH as sn,_ as an,ap as Dt,ab as Ie,ac as Ee,ad as cn,aI as ln,q as _e,h as et,g as C,d as vn,u as he,p as K,f as pt,a as Z,c as H,s as X,r as T,aa as $t,aJ as at,t as Q,P as Me,aK as fn,W as dn,aL as Se}from"./B7cm8bZ7.js";import{a as un,w as _n,l as me,d as it,e as tt,s as ce}from"./CqYbyBdN.js";import{t as g,c as q,a as ft,d as It,f as gt,h as xt,j as ut,k as rt,l as G,m as vt,e as ht,i as mt,b as le,n as Pt,o as hn,g as mn,p as Xt,q as Ot,r as st,u as pe,s as D,v as Et,w as R,x as Ne}from"./DKQVxcIt.js";import{p as Oe}from"./PUcuCr2T.js";import{i as ct}from"./CYCceyys.js";import{i as W}from"./DBk6CfRb.js";import{r as wt,s as Wt}from"./Cx3oQdvI.js";import{p as Pe}from"./B6DNG1Go.js";const pn=[];function Zt(t,e=!1){return Jt(t,new Map,"",pn)}function Jt(t,e,n,o,r=null){if(typeof t=="object"&&t!==null){var l=e.get(t);if(l!==void 0)return l;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Ke(t)){var i=Array(t.length);e.set(t,i),r!==null&&e.set(r,i);for(var a=0;a<t.length;a+=1){var u=t[a];a in t&&(i[a]=Jt(u,e,n,o))}return i}if(Ze(t)===je){i={},e.set(t,i),r!==null&&e.set(r,i);for(var v in t)i[v]=Jt(t[v],e,n,o);return i}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return Jt(t.toJSON(),e,n,o,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}function Ce(t,e,n){He(()=>{var o=Vt(()=>e(t,n==null?void 0:n())||{});if(n&&(o!=null&&o.update)){var r=!1,l={};Kt(()=>{var i=n();Qe(i),r&&tn(l,i)&&(l=i,o.update(i))}),r=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}const gn=()=>performance.now(),dt={tick:t=>requestAnimationFrame(t),now:()=>gn(),tasks:new Set};function ze(){const t=dt.now();dt.tasks.forEach(e=>{e.c(t)||(dt.tasks.delete(e),e.f())}),dt.tasks.size!==0&&dt.tick(ze)}function xn(t){let e;return dt.tasks.size===0&&dt.tick(ze),{promise:new Promise(n=>{dt.tasks.add(e={c:t,f:n})}),abort(){dt.tasks.delete(e)}}}function Yt(t,e){_n(()=>{t.dispatchEvent(new CustomEvent(e))})}function wn(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Le(t){const e={},n=t.split(";");for(const o of n){const[r,l]=o.split(":");if(!r||l===void 0)break;const i=wn(r.trim());e[i]=l.trim()}return e}const bn=t=>t;function Fe(t,e,n,o){var r=(t&rn)!==0,l="both",i,a=e.inert,u=e.style.overflow,v,d;function h(){var w=cn,L=$e;Ie(null),Ee(null);try{return i??(i=n()(e,(o==null?void 0:o())??{},{direction:l}))}finally{Ie(w),Ee(L)}}var p={is_global:r,in(){e.inert=a,Yt(e,"introstart"),v=ve(e,h(),d,1,()=>{Yt(e,"introend"),v==null||v.abort(),v=i=void 0,e.style.overflow=u})},out(w){e.inert=!0,Yt(e,"outrostart"),d=ve(e,h(),v,0,()=>{Yt(e,"outroend"),w==null||w()})},stop:()=>{v==null||v.abort(),d==null||d.abort()}},x=$e;if((x.transitions??(x.transitions=[])).push(p),un){var m=r;if(!m){for(var y=x.parent;y&&y.f&en;)for(;(y=y.parent)&&!(y.f&nn););m=!y||(y.f&on)!==0}m&&He(()=>{Vt(()=>p.in())})}}function ve(t,e,n,o,r){var l=o===1;if(sn(e)){var i,a=!1;return an(()=>{if(!a){var w=e({direction:l?"in":"out"});i=ve(t,w,n,o,r)}}),{abort:()=>{a=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration))return r(),{abort:Dt,deactivate:Dt,reset:Dt,t:()=>o};const{delay:u=0,css:v,tick:d,easing:h=bn}=e;var p=[];if(l&&n===void 0&&(d&&d(0,1),v)){var x=Le(v(0,1));p.push(x,x)}var m=()=>1-o,y=t.animate(p,{duration:u});return y.onfinish=()=>{var w=(n==null?void 0:n.t())??1-o;n==null||n.abort();var L=o-w,Y=e.duration*Math.abs(L),S=[];if(Y>0){var P=!1;if(v)for(var N=Math.ceil(Y/16.666666666666668),V=0;V<=N;V+=1){var At=w+L*h(V/N),Rt=Le(v(At,1-At));S.push(Rt),P||(P=Rt.overflow==="hidden")}P&&(t.style.overflow="hidden"),m=()=>{var Mt=y.currentTime;return w+L*h(Mt/Y)},d&&xn(()=>{if(y.playState!=="running")return!1;var Mt=m();return d(Mt,1-Mt),!0})}y=t.animate(S,{duration:Y,fill:"forwards"}),y.onfinish=()=>{m=()=>o,d==null||d(o,1-o),r()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=Dt)},deactivate:()=>{r=Dt},reset:()=>{o===0&&(d==null||d(1,0))},t:()=>m()}}function Tt(t,e,n=e){var o=ln();me(t,"input",r=>{var l=r?t.defaultValue:t.value;if(l=jt(t)?Qt(l):l,n(l),o&&l!==(l=e())){var i=t.selectionStart,a=t.selectionEnd;t.value=l??"",a!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(a,t.value.length))}}),(_e&&t.defaultValue!==t.value||Vt(e)==null&&t.value)&&n(jt(t)?Qt(t.value):t.value),Kt(()=>{var r=e();jt(t)&&r===Qt(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function Xe(t,e,n=e){me(t,"change",o=>{var r=o?t.defaultChecked:t.checked;n(r)}),(_e&&t.defaultChecked!==t.checked||Vt(e)==null)&&n(t.checked),Kt(()=>{var o=e();t.checked=!!o})}function jt(t){var e=t.type;return e==="number"||e==="range"}function Qt(t){return t===""?null:+t}function yn(t,e,n=e){me(t,"change",()=>{n(t.files)}),_e&&t.files&&n(t.files),Kt(()=>{t.files=e()})}function J(t){var e=vn(0);return function(){return arguments.length===1?(et(e,C(e)+1),arguments[0]):(C(e),t())}}const Ye="none";function kn(t){return Array.isArray(t)?t:[t]}function Ht(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function $n(t,e){const n=t.getBoundingClientRect(),o=Math.abs(e[0].clientX-e[1].clientX),r=Math.abs(e[0].clientY-e[1].clientY),l=Math.min(e[0].clientX,e[1].clientX),i=Math.min(e[0].clientY,e[1].clientY),a=l+o/2,u=i+r/2,v=Math.round(a-n.left),d=Math.round(u-n.top);return{x:v,y:d}}function In(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function En(t,e,n){const o=t.getBoundingClientRect(),r=Math.round(e.clientX-o.left),l=Math.round(e.clientY-o.top);return{event:e,pointersCount:n.length,target:e.target,x:r,y:l}}function Bt(t,e,n,o,r){const l=En(t,n,o);return t.dispatchEvent(new CustomEvent(`${e}${r}`,{detail:l})),l}function Mn(t,e,n,o,r,l=Ye,i=[]){e.style.touchAction=kn(l).join(" ");let a=[];function u(d){a.push(d);const h=Bt(e,t,d,a,"down");o==null||o(a,d),i.forEach(S=>{var P;(P=S.onDown)==null||P.call(S,h,a)});const p=d.pointerId;function x(S){if(p===S.pointerId){a=In(S,a),a.length||m();const P=Bt(e,t,S,a,"up");r==null||r(a,S),i.forEach(N=>{var V;(V=N.onUp)==null||V.call(N,P,a)})}}function m(){y(),w(),L(),Y()}const y=Ht(e,"pointermove",S=>{a=a.map(N=>S.pointerId===N.pointerId?S:N);const P=Bt(e,t,S,a,"move");n==null||n(a,S),i.forEach(N=>{var V;(V=N.onMove)==null||V.call(N,P,a)})}),w=Ht(e,"lostpointercapture",S=>{x(S)}),L=Ht(e,"pointerup",S=>{x(S)}),Y=Ht(e,"pointerleave",S=>{a=[],m();const P=Bt(e,t,S,a,"up");r==null||r(a,S),i.forEach(N=>{var V;(V=N.onUp)==null||V.call(N,P,a)})})}const v=Ht(e,"pointerdown",u);return{destroy:()=>{v()}}}function Te(t){return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)}const te=(t,e)=>{he(()=>{const{onMove:n,onDown:o,onUp:r,gestureName:l,parameters:i}=Sn(t,e==null?void 0:e());return Mn(l,t,n,o,r,i.touchAction,i.plugins).destroy})};function Sn(t,e){const n={touchAction:Ye,composed:!1,...e},o="pinch";let r,l=0,i;function a(d){d.length===1&&(r=void 0)}function u(d){d.length===2&&(l=Te(d),i=$n(t,d))}function v(d,h){if(d.length===2){const p=Te(d);if(r!==void 0&&p!==r){const x=p/l;t.dispatchEvent(new CustomEvent(o,{detail:{scale:x,center:i,pointerType:h.pointerType}}))}r=p}return!1}return{onMove:v,onDown:u,onUp:a,gestureName:o,parameters:n}}const fe=3,de=.5,ot=t=>t.colorIndex!==0,Be=()=>{G.v=!0,vt.v=Zt(g.v),ge(),Ge()},ge=()=>{if(gt.v<1||xt.v<1)return;const t=[[]];for(let e=0;e<xt.v;e++){t[e]=[];for(let n=0;n<gt.v;n++)t[e][n]={colorIndex:0,Xed:!1}}g.v=t,rt.v=!1,ut.v=0},qe=()=>{for(let t=0;t<g.numRows;t++)for(let e=0;e<g.numColumns;e++)g.v[t][e].colorIndex>q.v.length-1&&(g.v[t][e].colorIndex=0)},zt=()=>{ft.v!==It.v.length-1&&It.v.splice(ft.v+1),ft.v++,It.v.push(Zt(g.v))},Ge=()=>{It.reset(),It.v[0]=Zt(g.v),ft.reset()},xe=()=>{if(gt.v<1||xt.v<1)return;const t=g.v,e=[[]];for(let n=0;n<xt.v;n++){e[n]=[];for(let o=0;o<gt.v;o++)t&&t[n]&&t[n][o]?e[n][o]={...t[n][o]}:e[n][o]={colorIndex:0,Xed:!1}}g.v=e,zt(),rt.v=!1,ut.v=0},ue=t=>{const e=parseInt(t.replace("#",""),16);return[e>>16&255,e>>8&255,e&255]},Cn=(t,e,n)=>{const[o,r,l]=t,[i,a,u]=e;return Math.sqrt((o-i)**2+(r-a)**2+(l-u)**2)<=n},Ln=(t,e,n)=>"#"+[t,e,n].map(o=>Math.round(o).toString(16).padStart(2,"0")).join(""),Xn=(t,e,n)=>{const o=ue(t);for(let r=0;r<e.length;r++){const l=ue(e[r]);if(Cn(o,l,n))return r}return e.push(t),e.length-1},Tn=(t,e)=>{gt.v=t[0].length,xt.v=t.length,q.v=e,ut.v=0,ge();for(let n=0;n<g.numRows;n++)for(let o=0;o<g.numColumns;o++)g.v[n][o].colorIndex=t[n][o];Pe.route.id==="/daily"&&Be()},An=(t,e)=>{const n=new FileReader;n.onload=o=>{var l;const r=new Image;r.onload=()=>{const i=document.createElement("canvas"),a=i.getContext("2d");if(a){i.width=r.width,i.height=r.height,a.drawImage(r,0,0);const u=a.getImageData(0,0,r.width,r.height).data,v=[],d=[];for(let h=0;h<r.height;h++){const p=[];for(let x=0;x<r.width;x++){const m=(h*r.width+x)*4,y=u[m],w=u[m+1],L=u[m+2],S=u[m+3]<1?"#ffffff":Ln(y,w,L),P=Xn(S,v,e);p.push(P)}d.push(p)}Tn(d,v)}},r.src=(l=o.target)==null?void 0:l.result},n.readAsDataURL(t)};var Ct=J(()=>xt),Lt=J(()=>gt),ee=J(()=>G),Nt=J(()=>g),Rn=M("<button>Edit</button>"),Dn=t=>{t.key==="Enter"&&xe()},Hn=t=>{t.key==="Enter"&&xe()},Nn=()=>{xe()},On=()=>{ge()},Pn=(t,e)=>e("left"),zn=(t,e)=>e("right"),Fn=(t,e)=>e("up"),Yn=(t,e)=>e("down"),Bn=M('<div class="flex"><input class="min-w-0 p-2.5 text-center text-black" type="text" inputmode="numeric"> <input class="min-w-0 p-2.5 text-center text-black" type="text" inputmode="numeric"></div> <div class="flex"><button class="flex-1">Resize</button> <button class="flex-1">Clear</button></div> <div class="flex"><button aria-label="Shift Left" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.41z"></path></svg></button> <button aria-label="Shift Right" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M8.59 16.59L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.41z"></path></svg></button> <button aria-label="Shift Up" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8.59l4.59 4.58L18 12l-6-6l-6 6l1.41 1.41L12 8.59z"></path></svg></button> <button aria-label="Shift Down" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 15.41L7.41 10.83L6 12l6 6l6-6l-1.41-1.41L12 15.41z"></path></svg></button></div>',1);function qn(t,e){K(e,!1);const n=u=>Math.max(0,Number(String(u).replace(/[^0-9]/g,""))),o=u=>{Nt(Nt().v=Nt().v.map((v,d,h)=>{switch(u){case"right":return[v.slice(-1)[0],...v.slice(0,-1)];case"left":return[...v.slice(1),v[0]];case"down":return h[(d-1+h.length)%h.length];case"up":return h[(d+1)%h.length];default:return v}})),zt()};ct();var r=De(),l=pt(r);{var i=u=>{var v=Rn();v.__click=()=>{ee(ee().v=!1),Nt(Nt().v=vt.v),Ge()},E(u,v)},a=u=>{var v=Bn(),d=pt(v),h=H(d);wt(h),h.__keydown=[Dn],h.__input=()=>{Lt(Lt().v=n(Lt().v))};var p=X(h,2);wt(p),p.__keydown=[Hn],p.__input=()=>{Ct(Ct().v=n(Ct().v))},T(d);var x=X(d,2),m=H(x);m.__click=[Nn];var y=X(m,2);y.__click=[On],T(x);var w=X(x,2),L=H(w);L.__click=[Pn,o];var Y=X(L,2);Y.__click=[zn,o];var S=X(Y,2);S.__click=[Fn,o];var P=X(S,2);P.__click=[Yn,o],T(w),Tt(h,()=>Lt().v,N=>Lt(Lt().v=N)),Tt(p,()=>Ct().v,N=>Ct(Ct().v=N)),E(u,v)};W(l,u=>{ee().v?u(i):u(a,!1)})}E(t,r),Z()}it(["click","keydown","input"]);const Gn=(t,e)=>{e(g.colorIndices,q.v,n=>{const o=document.createElement("a");o.download="shareogram.png",o.href=n,o.click()})};var Un=M("<button>Save as PNG</button>");function Jn(t,e){K(e,!1);const n=(r,l,i)=>{const a=r[0].length,u=r.length,v=document.createElement("canvas");v.width=a,v.height=u;const d=v.getContext("2d");if(d){const h=d.createImageData(a,u);for(let x=0;x<u;x++)for(let m=0;m<a;m++){const y=l[r[x][m]],w=ue(y);if(w){const[L,Y,S]=w,P=(x*a+m)*4;h.data[P]=L,h.data[P+1]=Y,h.data[P+2]=S,h.data[P+3]=255}}d.putImageData(h,0,0);const p=v.toDataURL("image/png");i(p)}};ct();var o=Un();o.__click=[Gn,n],E(t,o),Z()}it(["click"]);var Wn=M('<input class="mx-2" type="range" max="442" min="10">'),Vn=M('<input class="hidden" accept="image/png" id="file-upload" type="file"> <label class="w-full cursor-pointer bg-[ButtonFace] p-2.5 text-center font-sans text-black active:brightness-50 hover:brightness-75" for="file-upload">Load PNG</label> <!>',1);function Kn(t,e){K(e,!0);let n=$t(10),o=$t(void 0);he(()=>{C(o)!==void 0&&C(o).length>=1&&An(C(o)[0],C(n))});var r=Vn(),l=pt(r),i=X(l,4);{var a=u=>{var v=Wn();wt(v),Tt(v,()=>C(n),d=>et(n,d)),E(u,v)};W(i,u=>{C(o)!==void 0&&C(o).length>=1&&u(a)})}yn(l,()=>C(o),u=>et(o,u)),E(t,r),Z()}var ne=J(()=>ut),oe=J(()=>le),_t=J(()=>q),Zn=M('<button class="flex-1">-</button>'),jn=M('<!> <button class="flex-1">+</button>',1),Qn=M('<input type="color" class="h-8 min-w-12 flex-1 border-0">'),to=M('<div><div class="flex flex-wrap"><!></div> <div class="flex flex-wrap"><input type="color" class="h-8 min-w-12 flex-1 border-0"> <!></div></div>');function eo(t,e){K(e,!1);const n=()=>{const h="0123456789abcdef";let p="#";for(let x=0;x<6;x++){const m=Math.floor(Math.random()*h.length);p+=h[m]}return p},o=()=>_t().v.length>2;ct();var r=to(),l=H(r),i=H(l);{var a=h=>{var p=jn(),x=pt(p);{var m=w=>{var L=Zn();L.__click=()=>{_t().v.pop(),ne().v>_t().v.length-1&&ne(ne().v--),qe()},E(w,L)};W(x,w=>{o()&&w(m)})}var y=X(x,2);y.__click=()=>{_t().v.push(n())},E(h,p)};W(i,h=>{G.v||h(a)})}T(l);var u=X(l,2),v=H(u);wt(v);var d=X(v,2);ht(d,1,()=>_t().v,mt,(h,p,x)=>{var m=Qn();wt(m),Tt(m,()=>_t().v[x],y=>_t(_t().v[x]=y)),E(h,m)}),T(u),T(r),Tt(v,()=>oe().v,h=>oe(oe().v=h)),E(t,r),Z()}it(["click"]);var Ae=J(()=>g),no=M("<button>Reveal Tile</button>");function oo(t,e){K(e,!1);const n=()=>{if(!Pt()){const r=hn(),l=mn(0,r.length-1),i=r[l].row,a=r[l].column;Ae(Ae().v[i][a]={colorIndex:vt.v[i][a].colorIndex,Xed:!1}),zt()}};ct();var o=no();o.__click=n,E(t,o),Z()}it(["click"]);var re=J(()=>Ot),se=J(()=>Xt),ro=M('<div class="flex justify-between border-t-2 border-t-black p-5"><input type="checkbox" class="svelte-rve7gr"> <input type="checkbox" class="svelte-rve7gr"></div>');function so(t,e){K(e,!1),ct();var n=ro(),o=H(n);wt(o);var r=X(o,2);wt(r),T(n),Xe(o,()=>se().v,l=>se(se().v=l)),Xe(r,()=>re().v,l=>re(re().v=l)),E(t,n),Z()}var ae=J(()=>st),ao=M('<input step=".025" type="range" class="svelte-4s2jov">');function io(t,e){K(e,!1),ct();var n=ao();wt(n),Wt(n,"max",fe),Wt(n,"min",de),Tt(n,()=>ae().v,o=>ae(ae().v=o)),E(t,n),Z()}const co=t=>t;function lo(t){const e=t-1;return e*e*e+1}function Re(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function vo(t,{delay:e=0,duration:n=400,easing:o=co}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:l=>`opacity: ${l*r}`}}function fo(t,{delay:e=0,duration:n=400,easing:o=lo,x:r=0,y:l=0,opacity:i=0}={}){const a=getComputedStyle(t),u=+a.opacity,v=a.transform==="none"?"":a.transform,d=u*(1-i),[h,p]=Re(r),[x,m]=Re(l);return{delay:e,duration:n,easing:o,css:(y,w)=>`
			transform: ${v} translate(${(1-y)*h}${p}, ${(1-y)*x}${m});
			opacity: ${u-d*w}`}}var qt=J(()=>pe),uo=M("<!> <!>",1),_o=M("<!> <!>",1),ho=M('<div class="fixed inset-y-0 right-0 z-50 flex w-40 max-w-[75%] flex-col overflow-hidden rounded-l-3xl bg-white"><!> <!> <!> <!> <!></div>');function mo(t,e){K(e,!1);const n=i=>{i.key==="o"&&qt(qt().v=!qt().v)};ct();var o=De();tt("keydown",at,n);var r=pt(o);{var l=i=>{var a=ho(),u=H(a);{var v=w=>{var L=uo(),Y=pt(L);Jn(Y,{});var S=X(Y,2);Kn(S,{}),E(w,L)};W(u,w=>{G.v||w(v)})}var d=X(u,2);{var h=w=>{qn(w,{})};W(d,w=>{Pe.route.id!=="/daily"&&w(h)})}var p=X(d,2);eo(p,{});var x=X(p,2);io(x,{});var m=X(x,2);{var y=w=>{var L=_o(),Y=pt(L);so(Y,{});var S=X(Y,2);oo(S,{}),E(w,L)};W(m,w=>{G.v&&w(y)})}T(a),Fe(3,a,()=>fo,()=>({x:80})),E(i,a)};W(r,i=>{qt().v&&i(l)})}E(t,o),Z()}var po=M('<div class="font-bold"> </div>'),go=M("<th></th>"),xo=M('<thead class="top-0 z-20 align-bottom"><tr><th class="sticky left-0 z-30"></th><!></tr></thead>'),wo=M('<div class="flex items-center justify-center font-bold"> </div>'),bo=M('<td class="left-0 z-10"><div class="flex justify-end"></div></td>'),yo=M("<span>X</span>"),ko=M('<td class="box-content h-6 min-w-6 text-center transition-colors duration-500" tabindex="0"><!></td>'),$o=M('<td class="px-1 text-center"></td>'),Io=M("<tr><!><!><!></tr>"),Eo=M('<td class="text-center"></td>'),Mo=M("<tr><td></td><!></tr>"),So=M('<table class="m-32 border-collapse"><!><tbody><!><!></tbody></table>');function Co(t,e){K(e,!0);let n=$t(!1),o=$t(!1),r=$t(""),l=$t(0);const i=(s,c,f,k)=>{const $=Math.abs(s-f),_=Math.abs(c-k);return $===0&&_===1?k>c?"right":"left":$===1&&_===0?f>s?"below":"above":"not adjacent"},a=s=>s.Xed,u=s=>s.colorIndex===ut.v,v=(s,c)=>{s.colorIndex=c},d=s=>{s.colorIndex=0},h=s=>{s.Xed=!s.Xed},p=(s,c,f)=>{Et.v||(s.target instanceof HTMLElement&&s.target.releasePointerCapture(s.pointerId),s.button===0?et(n,!0):s.button===2&&et(o,!0),x(c,f))},x=(s,c)=>{R.v={colorIndex:g.v[s][c].colorIndex,Xed:g.v[s][c].Xed,column:c,row:s},et(l,0),G.v?C(n)?rt.v&&!ot(g.v[s][c])?h(g.v[s][c]):!rt.v&&!a(g.v[s][c])&&(u(g.v[s][c])?d(g.v[s][c]):v(g.v[s][c],ut.v)):C(o)&&(ot(g.v[s][c])?d(g.v[s][c]):h(g.v[s][c])):C(n)?v(g.v[s][c],ut.v):C(o)&&d(g.v[s][c])},m=s=>{s.button===0?et(n,!1):s.button===2&&et(o,!1)},y=(s,c)=>{if(!C(n)&&!C(o)||C(n)&&C(o)||R.v.row===-1||Et.v)return;fn(l),C(l)===1&&et(r,Oe(i(R.v.row,R.v.column,s,c)));const f=g.v[R.v.row][R.v.column];if(G.v)if(Ne.v){const k=Math.min(R.v.row,s),$=Math.max(R.v.row,s),_=Math.min(R.v.column,c),b=Math.max(R.v.column,c);for(let O=k;O<=$;O++)for(let B=_;B<=b;B++){const I=g.v[O][B];C(n)?rt.v&&!ot(I)?I.Xed=f.Xed:!rt.v&&!a(I)&&v(I,f.colorIndex):R.v.Xed&&!ot(I)?I.Xed=!1:R.v.colorIndex===0&&!ot(I)?I.Xed=!0:R.v.colorIndex!==0&&!a(I)&&d(I)}}else if(C(r)==="above"||C(r)==="below"){const k=Math.min(R.v.row,s),$=Math.max(R.v.row,s);for(let _=k;_<$+1;_++){const b=g.v[_][R.v.column];C(n)?rt.v&&!ot(b)?b.Xed=f.Xed:!rt.v&&!a(b)&&v(b,f.colorIndex):R.v.Xed&&!ot(b)?b.Xed=!1:R.v.colorIndex===0&&!ot(b)?b.Xed=!0:R.v.colorIndex!==0&&!a(b)&&d(b)}}else{const k=Math.min(R.v.column,c),$=Math.max(R.v.column,c);for(let _=k;_<$+1;_++){const b=g.v[R.v.row][_];C(n)?rt.v&&!ot(b)?b.Xed=f.Xed:!rt.v&&!a(b)&&v(b,f.colorIndex):R.v.Xed&&!ot(b)?b.Xed=!1:R.v.colorIndex===0&&!ot(b)?b.Xed=!0:R.v.colorIndex!==0&&!a(b)&&d(b)}}else C(n)?v(g.v[s][c],ut.v):d(g.v[s][c])};let w=0,L=0;const Y=(s,c)=>{w=s,L=c},S=s=>{var k;if(s.key!=="ArrowUp"&&s.key!=="ArrowDown"&&s.key!=="ArrowLeft"&&s.key!=="ArrowRight"&&s.key!==" ")return;s.preventDefault();let c=w,f=L;s.key==="ArrowUp"&&w>0?c--:s.key==="ArrowDown"&&w<g.numRows-1?c++:s.key==="ArrowLeft"&&L>0?f--:s.key==="ArrowRight"&&L<g.numColumns-1?f++:s.key===" "&&et(n,!0),(k=document.querySelector(`[data-row="${c}"][data-col="${f}"]`))==null||k.focus(),C(n)&&!Et.v&&x(c,f)},P=s=>{s.key===" "&&(et(n,!1),zt())},N=(s,c)=>{let f=0;for(let $=0;$<=s;$++)$!==0&&c[$-1].colorIndex===c[$].colorIndex&&f++,$<s&&(f+=c[$].count);let k=0;for(let $=c.length-1;$>=s;$--)$!==c.length-1&&c[$].colorIndex===c[$+1].colorIndex&&k++,$>s&&(k+=c[$].count);return{offsetHead:f,offsetTail:k}},V=(s,c,f)=>{const{offsetHead:k,offsetTail:$}=N(s,c);let _=0,b=0;for(;_<k&&b<=f.length-1;)f[b].colorIndex!==-1?_+=f[b].count:b>0&&_++,b++;_=0;let O=f.length-1;for(;_<$&&O>=0;)f[O].colorIndex!==-1?_+=f[O].count:O<f.length-1&&_++,O--;return{encodesStartIndex:b,encodesEndIndex:O}},At=(s,c)=>{const f=new Array(s.length).fill(void 0),k=new Array(s.length).fill(void 0),$=new Array(s.length).fill(void 0);for(let _=0;_<s.length;_++){const{encodesStartIndex:b,encodesEndIndex:O}=V(_,s,c),B=s[_];for(let I=b;I<=O;I++)if(B.colorIndex===c[I].colorIndex&&B.count>=c[I].count){if(f.slice(0,_).includes(I))continue;f[_]=I;for(let A=0;A<_;A++)f[A]>I&&(f[A]=void 0);break}}for(let _=s.length-1;_>=0;_--){const{encodesStartIndex:b,encodesEndIndex:O}=V(_,s,c),B=s[_];for(let I=O;I>=b;I--)if(B.colorIndex===c[I].colorIndex&&B.count>=c[I].count){if(k.slice(_+1).includes(I))continue;k[_]=I;for(let A=s.length-1;A>_;A--)k[A]<I&&(k[A]=void 0);break}}for(let _=0;_<s.length;_++)f[_]===k[_]&&($[_]=f[_]);return $},Rt=(s,c)=>{const f=At(s,c);let k=[],$=f[0]!==void 0?f[0]:0;for(let _=1;_<f.length;_++)f[_]!==void 0&&!($===0&&f[_]===c.length-1)&&(f[_-1]===void 0&&k.push([$,f[_]]),$=f[_]);f[f.length-1]===void 0&&$!==c.length-1&&$!==0&&k.push([$,c.length-1]);for(let _=0;_<k.length;_++){const[b,O]=k[_],B=b===0?0:f.indexOf(b),I=O===c.length-1?s.length-1:f.indexOf(O),A=s.slice(B,I+1),U=c.slice(b,O+1);let j=0;for(let z=0;z<U.length;z++)c[z].colorIndex!==-1?j+=c[z].count:z>0&&z<U.length-1&&j++;const{offsetTail:F}=N(0,A);if(F+A[0].count>j)continue;const nt=At(A,U);for(let z=0;z<nt.length;z++)nt[z]!==void 0&&(nt[z]=nt[z]+b);f.splice(B,I-B+1,...nt)}return f},Mt=Me(()=>{let s=[[]];for(let c=0;c<vt.rowHints.length;c++){const f=vt.rowHints[c],k=g.rowEncodes[c];s[c]=Rt(f,k)}return s}),Ue=Me(()=>{let s=[[]];for(let c=0;c<vt.columnHints.length;c++){const f=vt.columnHints[c],k=g.columnEncodes[c];s[c]=Rt(f,k)}return s}),we=(s,c,f,k)=>{const $=k?C(Mt):C(Ue),_=k?g.rowEncodes[s]:g.columnEncodes[s];return $[s][c]!==void 0&&JSON.stringify(f)===JSON.stringify(_[$[s][c]])};var Ft=So();tt("pointerup",at,m),tt("keyup",at,P);var be=H(Ft);{var Je=s=>{var c=xo(),f=H(c),k=H(f),$=X(k);ht($,17,()=>({length:g.numColumns}),mt,(_,b,O)=>{var B=go();ht(B,21,()=>vt.columnHints[O],mt,(I,A,U)=>{var j=po(),F=H(j,!0);T(j),Q(nt=>{D(j,"opacity",nt),D(j,"font-size",Ot.v?".5rem":""),D(j,"color",q.v[C(A).colorIndex]),ce(F,C(A).count)},[()=>we(O,U,C(A),!1)?.2:1]),E(I,j)}),T(B),E(_,B)}),T(f),T(c),Q(()=>{D(c,"background-color",Ot.v?q.v[0]:""),D(c,"position",Ot.v?"sticky":""),D(k,"visibility",Xt.v&&Ot.v?"":"hidden"),D(k,"background-color",q.v[0])}),E(s,c)};W(be,s=>{G.v&&s(Je)})}var ye=X(be),ke=H(ye);ht(ke,17,()=>({length:g.numRows}),mt,(s,c,f)=>{var k=Io(),$=H(k);{var _=I=>{var A=bo(),U=H(A);ht(U,21,()=>vt.rowHints[f],mt,(j,F,nt)=>{var z=wo(),lt=H(z,!0);T(z),Q(St=>{D(z,"opacity",St),D(z,"width",Xt.v?".75rem":"1.5rem"),D(z,"font-size",Xt.v?".5rem":""),D(z,"color",q.v[C(F).colorIndex]),ce(lt,C(F).count)},[()=>we(f,nt,C(F),!0)?.2:1]),E(j,z)}),T(U),T(A),Q(()=>{D(A,"background-color",Xt.v?q.v[0]:""),D(A,"position",Xt.v?"sticky":"")}),E(I,A)};W($,I=>{G.v&&I(_)})}var b=X($);ht(b,17,()=>({length:g.numColumns}),mt,(I,A,U,j)=>{var F=ko();F.__pointerdown=lt=>{p(lt,f,U)},Wt(F,"data-row",f),Wt(F,"data-col",U),F.__keydown=S;var nt=H(F);{var z=lt=>{var St=yo();Fe(3,St,()=>vo,()=>({duration:300})),E(lt,St)};W(nt,lt=>{a(g.v[f][U])&&!Pt()&&lt(z)})}T(F),Q((lt,St)=>{D(F,"border-left",lt),D(F,"border-top",St),D(F,"background-color",q.v[g.v[f][U].colorIndex]),D(F,"color",q.v[1])},[()=>Pt()||!G.v?"0":`solid ${U%5===0&&U!==0?`4px ${q.v[1]}`:`2px ${le.v}`}`,()=>Pt()||!G.v?"0":`solid ${f%5===0&&f!==0?`4px ${q.v[1]}`:`2px ${le.v}`}`]),tt("pointerenter",F,()=>{y(f,U)}),tt("focus",F,()=>{Y(f,U)}),E(I,F)});var O=X(b);{var B=I=>{var A=$o();A.textContent=f%5===4?f+1:"",E(I,A)};W(O,I=>{g.numRows>10&&G.v&&I(B)})}T(k),E(s,k)});var We=X(ke);{var Ve=s=>{var c=Mo(),f=X(H(c));ht(f,17,()=>({length:g.numColumns}),mt,(k,$,_)=>{var b=Eo();b.textContent=_%5===4?_+1:"",E(k,b)}),T(c),E(s,c)};W(We,s=>{g.numColumns>10&&G.v&&s(Ve)})}T(ye),T(Ft),Q(()=>D(Ft,"zoom",st.v)),E(t,Ft),Z()}it(["pointerdown","keydown"]);var Lo=M('<div class="flex"><button class="flex-1">Undo</button> <button class="flex-1">Redo</button></div>');function Xo(t,e){K(e,!0);const n=()=>{R.v.row!==-1&&zt(),R.reset()},o=h=>{h.key==="z"?i():h.key==="y"&&a()},r=()=>{g.numRows!==xt.v&&(xt.v=g.numRows),g.numColumns!==gt.v&&(gt.v=g.numColumns)},l=()=>{g.v=Zt(It.v[ft.v]),qe(),r()},i=()=>{ft.v!==0&&(ft.v--,l())},a=()=>{ft.v!==It.v.length-1&&(ft.v++,l())};var u=Lo();tt("keydown",at,o),tt("pointerup",at,n);var v=H(u);v.__click=i;var d=X(v,2);d.__click=a,T(u),E(t,u),Z()}it(["click"]);var bt=J(()=>Et),yt=J(()=>ut),Gt=J(()=>Ne),kt=J(()=>rt),To=M('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0"></button>'),Ao=M('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">X</button>'),Ro=M('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">2d</button>'),Do=M('<div class="flex flex-wrap"><!> <!> <button class="flex aspect-square h-8 flex-1 items-center justify-center p-0" aria-label="Move"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21v-9m0 9l3-3m-3 3l-3-3m3-6V3m0 9H3m9 0h9m-9-9L9 6m3-3l3 3M3 12l3 3m-3-3l3-3m15 3l-3-3m3 3l-3 3"></path></svg></button> <!></div>');function Ho(t,e){K(e,!1);const n=m=>{/[1-9]/.test(m.key)&&Number(m.key)<=q.v.length?o(Number(m.key)-1):m.key==="m"?l():m.key==="x"&&G.v?r():m.key==="d"&&G.v&&i()},o=m=>{kt(kt().v=!1),bt(bt().v=!1),yt(yt().v=m)},r=()=>{kt(kt().v=!0),bt(bt().v=!1),yt(yt().v=-1)},l=()=>{kt(kt().v=!1),bt(bt().v=!0),yt(yt().v=-1)},i=()=>{Gt(Gt().v=!Gt().v)};ct();var a=Do();tt("keydown",at,n);var u=H(a);ht(u,1,()=>q.v,mt,(m,y,w)=>{var L=To();L.__click=()=>{o(w)},L.textContent=w+1,Q(()=>{D(L,"filter",w===yt().v?"brightness(50%)":""),D(L,"color",w===0?q.v[1]:q.v[0]),D(L,"background-color",q.v[w])}),E(m,L)});var v=X(u,2);{var d=m=>{var y=Ao();y.__click=r,Q(()=>D(y,"filter",kt().v?"brightness(50%)":"")),E(m,y)};W(v,m=>{G.v&&m(d)})}var h=X(v,2);h.__click=l;var p=X(h,2);{var x=m=>{var y=Ro();y.__click=i,Q(()=>D(y,"filter",Gt().v?"brightness(50%)":"")),E(m,y)};W(p,m=>{G.v&&m(x)})}T(a),Q(()=>D(h,"filter",bt().v?"brightness(50%)":"")),E(t,a),Z()}it(["click"]);var Ut=J(()=>pe),No=M('<footer class="flex justify-center"><div class="flex overflow-hidden rounded-t-lg"><button>Options</button> <div><!> <!></div></div></footer>');function Oo(t,e){K(e,!1),ct();var n=No(),o=H(n),r=H(o);r.__click=()=>{Ut(Ut().v=!Ut().v)};var l=X(r,2),i=H(l);Ho(i,{});var a=X(i,2);Xo(a,{}),T(l),T(o),T(n),Q(()=>D(r,"filter",Ut().v?"brightness(50%)":"")),E(t,n),Z()}it(["click"]);var Po=M('<span class="pt-2.5"> </span>'),zo=()=>{Be()},Fo=M('<button class="-mt-1 rounded-b-lg">Play</button>'),Yo=M('<header class="flex justify-center"><!></header>');function Bo(t,e){K(e,!1),ct();var n=Yo(),o=H(n);{var r=i=>{var a=Po(),u=H(a,!0);T(a),Q(v=>ce(u,v),[()=>Pt()?"You win!":"Keep trying"],dn),E(i,a)},l=i=>{var a=Fo();a.__click=[zo],E(i,a)};W(o,i=>{G.v?i(r):i(l,!1)})}T(n),E(t,n),Z()}it(["click"]);const ie=t=>{let e=!1,n,o,r,l;const i=v=>{(v.button===1||v.button===0&&Et.v)&&(v.preventDefault(),e=!0,n=v.pageX-t.offsetLeft,o=v.pageY-t.offsetTop,r=t.scrollLeft,l=t.scrollTop,t.style.cursor="grabbing",document.addEventListener("mousemove",a),document.addEventListener("mouseup",u))},a=v=>{if(!e)return;v.preventDefault();const d=v.pageX-t.offsetLeft,h=v.pageY-t.offsetTop,p=(d-n)*2,x=(h-o)*2;t.scrollLeft=r-p,t.scrollTop=l-x},u=()=>{e=!1,t.style.cursor="",document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",u)};return t.addEventListener("mousedown",i),{destroy:()=>{t.removeEventListener("mousedown",i),t.style.cursor=""}}};var qo=M('<!>  <main class="m-3 flex flex-1 overflow-auto svelte-v5w8hs"><!></main> <!> <!>',1);function tr(t,e){K(e,!0);let n=$t(1);const o=p=>{p.preventDefault(),p.deltaY<0&&st.v<fe?st.v+=.05:p.deltaY>0&&st.v>de&&(st.v-=.05)},r=p=>{if(!Et.v)return;const x=C(n);et(n,Oe(p.detail.scale));const m=C(n)<x;m&&st.v>de?st.v-=.025:!m&&st.v<fe&&(st.v+=.025)},l=p=>(p.preventDefault(),p.returnValue="","");he(()=>{document.body.style.color=q.v[0]});var i=qo();tt("wheel",at,o,void 0,!1),tt("contextmenu",at,p=>p.preventDefault()),tt("load",at,onload),tt("beforeunload",at,p=>{l(p)}),Ce(Se.body,(p,x)=>te==null?void 0:te(p,x),()=>()=>({})),tt("pinch",Se.body,r);var a=pt(i);Bo(a,{});var u=X(a,2);u.__click=()=>{pe.v=!1};var v=H(u);Co(v,{}),T(u),Ce(u,p=>ie==null?void 0:ie(p));var d=X(u,2);Oo(d,{});var h=X(d,2);mo(h,{}),Q(()=>D(u,"touch-action",Et.v?"auto":"none")),E(t,i),Z()}it(["click"]);export{tr as M,An as l};
