import{d as Se,a as $,t as M}from"./DnDka9iv.js";import{ar as Ce,a1 as Ft,as as Gt,a3 as Oe,aF as Pe,z as xe,E as Ye,aG as Be,aH as Fe,aI as Ge,aJ as qe,M as Ue,aq as Xt,ac as we,ad as ge,ae as We,aK as Ve,h as le,x as tt,w as I,q as Je,u as ce,p as Q,f as gt,a as j,c as A,s as S,r as X,a9 as xt,aL as rt,t as et,a4 as be,aM as Ke,I as Ze,aN as ye}from"./Dd6hhvDe.js";import{a as Qe,w as je,l as ve,d as it,e as Z,s as ee}from"./ck40J3Bn.js";import{e as ft,i as dt,s as H}from"./BOJvW676.js";import{p as oe}from"./DIWL0Lin.js";import{i as U,r as ut,e as ne,a as re,b as k,c as W,p as ae,f as Mt,j as Et,k as Ht,s as Bt,l as nt,m as fe,t as kt,n as Pt,o as wt,q as P,d as pt,h as Tt,g as ke}from"./CDFd-KxL.js";import{i as lt}from"./LNQSQsw5.js";import{i as V}from"./DYtTGJ6W.js";import{s as to,r as de,n as eo,a as ue,h as oo,l as no,c as Xe,M as se,b as Yt,i as ct,d as ro,e as ao}from"./DZ7oyZ1d.js";import{p as so}from"./DigocTpD.js";function $e(t,e,o){Ce(()=>{var n=Ft(()=>e(t,o==null?void 0:o())||{});if(o&&(n!=null&&n.update)){var s=!1,v={};Gt(()=>{var l=o();Oe(l),s&&Pe(v,l)&&(v=l,n.update(l))}),s=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}const io=()=>performance.now(),st={tick:t=>requestAnimationFrame(t),now:()=>io(),tasks:new Set};function Te(){const t=st.now();st.tasks.forEach(e=>{e.c(t)||(st.tasks.delete(e),e.f())}),st.tasks.size!==0&&st.tick(Te)}function lo(t){let e;return st.tasks.size===0&&st.tick(Te),{promise:new Promise(o=>{st.tasks.add(e={c:t,f:o})}),abort(){st.tasks.delete(e)}}}function Rt(t,e){je(()=>{t.dispatchEvent(new CustomEvent(e))})}function co(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function Ie(t){const e={},o=t.split(";");for(const n of o){const[s,v]=n.split(":");if(!s||v===void 0)break;const l=co(s.trim());e[l]=v.trim()}return e}const vo=t=>t;function Ae(t,e,o,n){var s=(t&Ge)!==0,v="both",l,i=e.inert,h=e.style.overflow,c,d;function u(){var y=We,R=xe;we(null),ge(null);try{return l??(l=o()(e,(n==null?void 0:n())??{},{direction:v}))}finally{we(y),ge(R)}}var m={is_global:s,in(){e.inert=i,Rt(e,"introstart"),c=ie(e,u(),d,1,()=>{Rt(e,"introend"),c==null||c.abort(),c=l=void 0,e.style.overflow=h})},out(y){e.inert=!0,Rt(e,"outrostart"),d=ie(e,u(),c,0,()=>{Rt(e,"outroend"),y==null||y()})},stop:()=>{c==null||c.abort(),d==null||d.abort()}},p=xe;if((p.transitions??(p.transitions=[])).push(m),Qe){var w=s;if(!w){for(var E=p.parent;E&&E.f&Ye;)for(;(E=E.parent)&&!(E.f&Be););w=!E||(E.f&Fe)!==0}w&&Ce(()=>{Ft(()=>m.in())})}}function ie(t,e,o,n,s){var v=n===1;if(qe(e)){var l,i=!1;return Ue(()=>{if(!i){var y=e({direction:v?"in":"out"});l=ie(t,y,o,n,s)}}),{abort:()=>{i=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(o==null||o.deactivate(),!(e!=null&&e.duration))return s(),{abort:Xt,deactivate:Xt,reset:Xt,t:()=>n};const{delay:h=0,css:c,tick:d,easing:u=vo}=e;var m=[];if(v&&o===void 0&&(d&&d(0,1),c)){var p=Ie(c(0,1));m.push(p,p)}var w=()=>1-n,E=t.animate(m,{duration:h});return E.onfinish=()=>{var y=(o==null?void 0:o.t())??1-n;o==null||o.abort();var R=n-y,F=e.duration*Math.abs(R),L=[];if(F>0){var O=!1;if(c)for(var D=Math.ceil(F/16.666666666666668),G=0;G<=D;G+=1){var St=y+R*u(G/D),Ct=Ie(c(St,1-St));L.push(Ct),O||(O=Ct.overflow==="hidden")}O&&(t.style.overflow="hidden"),w=()=>{var bt=E.currentTime;return y+R*u(bt/F)},d&&lo(()=>{if(E.playState!=="running")return!1;var bt=w();return d(bt,1-bt),!0})}E=t.animate(L,{duration:F,fill:"forwards"}),E.onfinish=()=>{w=()=>n,d==null||d(n,1-n),s()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=Xt)},deactivate:()=>{s=Xt},reset:()=>{n===0&&(d==null||d(1,0))},t:()=>w()}}function Lt(t,e,o=e){var n=Ve();ve(t,"input",s=>{var v=s?t.defaultValue:t.value;if(v=qt(t)?Ut(v):v,o(v),n&&v!==(v=e())){var l=t.selectionStart,i=t.selectionEnd;t.value=v??"",i!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(i,t.value.length))}}),(le&&t.defaultValue!==t.value||Ft(e)==null&&t.value)&&o(qt(t)?Ut(t.value):t.value),Gt(()=>{var s=e();qt(t)&&s===Ut(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Ee(t,e,o=e){ve(t,"change",n=>{var s=n?t.defaultChecked:t.checked;o(s)}),(le&&t.defaultChecked!==t.checked||Ft(e)==null)&&o(t.checked),Gt(()=>{var n=e();t.checked=!!n})}function qt(t){var e=t.type;return e==="number"||e==="range"}function Ut(t){return t===""?null:+t}function fo(t,e,o=e){ve(t,"change",()=>{o(t.files)}),le&&t.files&&o(t.files),Gt(()=>{t.files=e()})}function J(t){var e=Je(0);return function(){return arguments.length===1?(tt(e,I(e)+1),arguments[0]):(I(e),t())}}const He="none";function uo(t){return Array.isArray(t)?t:[t]}function At(t,e,o){return t.addEventListener(e,o),()=>t.removeEventListener(e,o)}function _o(t,e){const o=t.getBoundingClientRect(),n=Math.abs(e[0].clientX-e[1].clientX),s=Math.abs(e[0].clientY-e[1].clientY),v=Math.min(e[0].clientX,e[1].clientX),l=Math.min(e[0].clientY,e[1].clientY),i=v+n/2,h=l+s/2,c=Math.round(i-o.left),d=Math.round(h-o.top);return{x:c,y:d}}function ho(t,e){return e.filter(o=>t.pointerId!==o.pointerId)}function mo(t,e,o){const n=t.getBoundingClientRect(),s=Math.round(e.clientX-n.left),v=Math.round(e.clientY-n.top);return{event:e,pointersCount:o.length,target:e.target,x:s,y:v}}function Nt(t,e,o,n,s){const v=mo(t,o,n);return t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:v})),v}function po(t,e,o,n,s,v=He,l=[]){e.style.touchAction=uo(v).join(" ");let i=[];function h(d){i.push(d);const u=Nt(e,t,d,i,"down");n==null||n(i,d),l.forEach(L=>{var O;(O=L.onDown)==null||O.call(L,u,i)});const m=d.pointerId;function p(L){if(m===L.pointerId){i=ho(L,i),i.length||w();const O=Nt(e,t,L,i,"up");s==null||s(i,L),l.forEach(D=>{var G;(G=D.onUp)==null||G.call(D,O,i)})}}function w(){E(),y(),R(),F()}const E=At(e,"pointermove",L=>{i=i.map(D=>L.pointerId===D.pointerId?L:D);const O=Nt(e,t,L,i,"move");o==null||o(i,L),l.forEach(D=>{var G;(G=D.onMove)==null||G.call(D,O,i)})}),y=At(e,"lostpointercapture",L=>{p(L)}),R=At(e,"pointerup",L=>{p(L)}),F=At(e,"pointerleave",L=>{i=[],w();const O=Nt(e,t,L,i,"up");s==null||s(i,L),l.forEach(D=>{var G;(G=D.onUp)==null||G.call(D,O,i)})})}const c=At(e,"pointerdown",h);return{destroy:()=>{c()}}}function Me(t){return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)}const Wt=(t,e)=>{ce(()=>{const{onMove:o,onDown:n,onUp:s,gestureName:v,parameters:l}=xo(t,e==null?void 0:e());return po(v,t,o,n,s,l.touchAction,l.plugins).destroy})};function xo(t,e){const o={touchAction:He,composed:!1,...e},n="pinch";let s,v=0,l;function i(d){d.length===1&&(s=void 0)}function h(d){d.length===2&&(v=Me(d),l=_o(t,d))}function c(d,u){if(d.length===2){const m=Me(d);if(s!==void 0&&m!==s){const p=m/v;t.dispatchEvent(new CustomEvent(n,{detail:{scale:p,center:l,pointerType:u.pointerType}}))}s=m}return!1}return{onMove:c,onDown:h,onUp:i,gestureName:n,parameters:o}}var $t=J(()=>re),It=J(()=>ne),Vt=J(()=>k),wo=()=>{to()},go=M("<button>Edit</button>"),bo=t=>{t.key==="Enter"&&de()},yo=t=>{t.key==="Enter"&&de()},ko=()=>{de()},$o=()=>{eo()},Io=(t,e)=>e("left"),Eo=(t,e)=>e("right"),Mo=(t,e)=>e("up"),Lo=(t,e)=>e("down"),So=M('<div class="flex"><input class="min-w-0 p-2.5 text-center text-black" inputmode="numeric" type="text"> <input class="min-w-0 p-2.5 text-center text-black" inputmode="numeric" type="text"></div> <div class="flex"><button class="flex-1">Resize</button> <button class="flex-1">Clear</button></div> <div class="flex"><button aria-label="Shift Left" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.41z"></path></svg></button> <button aria-label="Shift Right" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M8.59 16.59L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.41z"></path></svg></button> <button aria-label="Shift Up" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8.59l4.59 4.58L18 12l-6-6l-6 6l1.41 1.41L12 8.59z"></path></svg></button> <button aria-label="Shift Down" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 15.41L7.41 10.83L6 12l6 6l6-6l-1.41-1.41L12 15.41z"></path></svg></button></div>',1);function Co(t,e){Q(e,!1);const o=h=>Math.max(0,Number(String(h).replace(/[^0-9]/g,""))),n=h=>{Vt(Vt().v=Vt().v.map((c,d,u)=>{switch(h){case"right":return[c.slice(-1)[0],...c.slice(0,-1)];case"left":return[...c.slice(1),c[0]];case"down":return u[(d-1+u.length)%u.length];case"up":return u[(d+1)%u.length];default:return c}})),ue()};lt();var s=Se(),v=gt(s);{var l=h=>{var c=go();c.__click=[wo],$(h,c)},i=h=>{var c=So(),d=gt(c),u=A(d);ut(u),u.__keydown=[bo],u.__input=()=>{It(It().v=o(It().v))};var m=S(u,2);ut(m),m.__keydown=[yo],m.__input=()=>{$t($t().v=o($t().v))},X(d);var p=S(d,2),w=A(p);w.__click=[ko];var E=S(w,2);E.__click=[$o],X(p);var y=S(p,2),R=A(y);R.__click=[Io,n];var F=S(R,2);F.__click=[Eo,n];var L=S(F,2);L.__click=[Mo,n];var O=S(L,2);O.__click=[Lo,n],X(y),Lt(u,()=>It().v,D=>It(It().v=D)),Lt(m,()=>$t().v,D=>$t($t().v=D)),$(h,c)};V(v,h=>{U.v?h(l):h(i,!1)})}$(t,s),j()}it(["click","keydown","input"]);const Xo=(t,e)=>{e(k.colorIndices,W.v,o=>{const n=document.createElement("a");n.download="shareogram.png",n.href=o,n.click()})};var To=M("<button>Save as PNG</button>");function Ao(t,e){Q(e,!1);const o=(s,v,l)=>{const i=s[0].length,h=s.length,c=document.createElement("canvas");c.width=i,c.height=h;const d=c.getContext("2d");if(d){const u=d.createImageData(i,h);for(let p=0;p<h;p++)for(let w=0;w<i;w++){const E=v[s[p][w]],y=oo(E);if(y){const[R,F,L]=y,O=(p*i+w)*4;u.data[O]=R,u.data[O+1]=F,u.data[O+2]=L,u.data[O+3]=255}}d.putImageData(u,0,0);const m=c.toDataURL("image/png");l(m)}};lt();var n=To();n.__click=[Xo,o],$(t,n),j()}it(["click"]);var Ho=M('<input class="mx-2" type="range" max="442" min="10">'),Do=M('<input class="hidden" accept="image/png" id="file-upload" type="file"> <label class="w-full cursor-pointer bg-[ButtonFace] p-2.5 text-center font-sans text-black active:brightness-50 hover:brightness-75" for="file-upload">Load PNG</label> <!>',1);function Ro(t,e){Q(e,!0);let o=xt(10),n=xt(void 0);ce(()=>{I(n)!==void 0&&I(n).length>=1&&no(I(n)[0],I(o))});var s=Do(),v=gt(s),l=S(v,4);{var i=h=>{var c=Ho();ut(c),Lt(c,()=>I(o),d=>tt(o,d)),$(h,c)};V(l,h=>{I(n)!==void 0&&I(n).length>=1&&h(i)})}fo(v,()=>I(n),h=>tt(n,h)),$(t,s),j()}var Jt=J(()=>Mt),Kt=J(()=>ae),vt=J(()=>W),No=M('<button class="flex-1">-</button>'),zo=M('<!> <button class="flex-1">+</button>',1),Oo=M('<input type="color" class="h-8 min-w-12 flex-1 border-0">'),Po=M('<div><div class="flex flex-wrap"><!></div> <div class="flex flex-wrap"><input type="color" class="h-8 min-w-12 flex-1 border-0"> <!></div></div>');function Yo(t,e){Q(e,!1);const o=()=>{const u="0123456789abcdef";let m="#";for(let p=0;p<6;p++){const w=Math.floor(Math.random()*u.length);m+=u[w]}return m},n=()=>vt().v.length>2;lt();var s=Po(),v=A(s),l=A(v);{var i=u=>{var m=zo(),p=gt(m);{var w=y=>{var R=No();R.__click=()=>{vt().v.pop(),Jt().v>vt().v.length-1&&Jt(Jt().v--),Xe()},$(y,R)};V(p,y=>{n()&&y(w)})}var E=S(p,2);E.__click=()=>{vt().v.push(o())},$(u,m)};V(l,u=>{U.v||u(i)})}X(v);var h=S(v,2),c=A(h);ut(c);var d=S(c,2);ft(d,1,()=>vt().v,dt,(u,m,p)=>{var w=Oo();ut(w),Lt(w,()=>vt().v[p],E=>vt(vt().v[p]=E)),$(u,w)}),X(h),X(s),Lt(c,()=>Kt().current.bgColor,u=>Kt(Kt().current.bgColor=u)),$(t,s),j()}it(["click"]);var Zt=J(()=>Ht),Qt=J(()=>Et),Bo=M('<div class="flex justify-between border-t-2 border-t-black p-5"><input type="checkbox" class="svelte-rve7gr"> <input type="checkbox" class="svelte-rve7gr"></div>');function Fo(t,e){Q(e,!1),lt();var o=Bo(),n=A(o);ut(n);var s=S(n,2);ut(s),X(o),Ee(n,()=>Qt().v,v=>Qt(Qt().v=v)),Ee(s,()=>Zt().v,v=>Zt(Zt().v=v)),$(t,o),j()}var jt=J(()=>nt),Go=M('<input step=".025" type="range" class="svelte-4s2jov">');function qo(t,e){Q(e,!1),lt();var o=Go();ut(o),Bt(o,"max",se),Bt(o,"min",Yt),Lt(o,()=>jt().v,n=>jt(jt().v=n)),$(t,o),j()}const Uo=t=>t;function Wo(t){const e=t-1;return e*e*e+1}function Le(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Vo(t,{delay:e=0,duration:o=400,easing:n=Uo}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:n,css:v=>`opacity: ${v*s}`}}function Jo(t,{delay:e=0,duration:o=400,easing:n=Wo,x:s=0,y:v=0,opacity:l=0}={}){const i=getComputedStyle(t),h=+i.opacity,c=i.transform==="none"?"":i.transform,d=h*(1-l),[u,m]=Le(s),[p,w]=Le(v);return{delay:e,duration:o,easing:n,css:(E,y)=>`
			transform: ${c} translate(${(1-E)*u}${m}, ${(1-E)*p}${w});
			opacity: ${h-d*y}`}}var zt=J(()=>fe),Ko=M("<!> <!>",1),Zo=M('<div class="fixed inset-y-0 right-0 z-50 flex w-40 max-w-[75%] flex-col overflow-hidden rounded-l-3xl bg-white"><!> <!> <!> <!> <!></div>');function Qo(t,e){Q(e,!1);const o=l=>{l.key==="o"&&zt(zt().v=!zt().v)};lt();var n=Se();Z("keydown",rt,o);var s=gt(n);{var v=l=>{var i=Zo(),h=A(i);{var c=y=>{var R=Ko(),F=gt(R);Ao(F,{});var L=S(F,2);Ro(L,{}),$(y,R)};V(h,y=>{U.v||y(c)})}var d=S(h,2);{var u=y=>{Co(y,{})};V(d,y=>{so.route.id!=="/daily"&&y(u)})}var m=S(d,2);Yo(m,{});var p=S(m,2);qo(p,{});var w=S(p,2);{var E=y=>{Fo(y,{})};V(w,y=>{U.v&&y(E)})}X(i),Ae(3,i,()=>Jo,()=>({x:80})),$(l,i)};V(s,l=>{zt().v&&l(v)})}$(t,n),j()}var jo=M('<div class="font-bold"> </div>'),tn=M("<th></th>"),en=M('<thead class="top-0 z-20 align-bottom"><tr><th class="sticky left-0 z-30"></th><!></tr></thead>'),on=M('<div class="flex items-center justify-center font-bold"> </div>'),nn=M('<td class="left-0 z-10"><div class="flex justify-end"></div></td>'),rn=M("<span>X</span>"),an=M('<td class="box-content h-6 min-w-6 text-center transition-colors duration-500" tabindex="0"><!></td>'),sn=M('<td class="px-1 text-center"></td>'),ln=M("<tr><!><!><!></tr>"),cn=M('<td class="text-center"></td>'),vn=M("<tr><td></td><!></tr>"),fn=M('<table class="m-32 border-collapse"><!><tbody><!><!></tbody></table>');function dn(t,e){Q(e,!0);let o=xt(!1),n=xt(!1),s=xt(""),v=xt(0);const l=(r,a,f,g)=>{const b=Math.abs(r-f),_=Math.abs(a-g);return b===0&&_===1?g>a?"right":"left":b===1&&_===0?f>r?"below":"above":"not adjacent"},i=r=>r.Xed,h=r=>r.colorIndex===Mt.v,c=(r,a)=>{r.colorIndex=a},d=r=>{r.colorIndex=0},u=r=>{r.Xed=!r.Xed},m=(r,a,f)=>{wt.v||(r.target instanceof HTMLElement&&r.target.releasePointerCapture(r.pointerId),r.button===0?tt(o,!0):r.button===2&&tt(n,!0),p(a,f))},p=(r,a)=>{P.v={colorIndex:k.v[r][a].colorIndex,Xed:k.v[r][a].Xed,column:a,row:r},tt(v,0),U.v?I(o)?pt.v&&!ct(k.v[r][a])?u(k.v[r][a]):!pt.v&&!i(k.v[r][a])&&(h(k.v[r][a])?d(k.v[r][a]):c(k.v[r][a],Mt.v)):I(n)&&(ct(k.v[r][a])?d(k.v[r][a]):u(k.v[r][a])):I(o)?c(k.v[r][a],Mt.v):I(n)&&d(k.v[r][a])},w=r=>{r.button===0?tt(o,!1):r.button===2&&tt(n,!1)},E=(r,a)=>{if(!I(o)&&!I(n)||I(o)&&I(n)||P.v.row===-1||wt.v)return;Ke(v),I(v)===1&&tt(s,oe(l(P.v.row,P.v.column,r,a)));const f=k.v[P.v.row][P.v.column];if(U.v)if(I(s)==="above"||I(s)==="below"){const g=Math.min(P.v.row,r),b=Math.max(P.v.row,r);for(let _=g;_<b+1;_++){const x=k.v[_][P.v.column];I(o)?pt.v&&!ct(x)?x.Xed=f.Xed:!pt.v&&!i(x)&&c(x,f.colorIndex):P.v.Xed&&!ct(x)?x.Xed=!1:P.v.colorIndex===0&&!ct(x)?x.Xed=!0:P.v.colorIndex!==0&&!i(x)&&d(x)}}else{const g=Math.min(P.v.column,a),b=Math.max(P.v.column,a);for(let _=g;_<b+1;_++){const x=k.v[P.v.row][_];I(o)?pt.v&&!ct(x)?x.Xed=f.Xed:!pt.v&&!i(x)&&c(x,f.colorIndex):P.v.Xed&&!ct(x)?x.Xed=!1:P.v.colorIndex===0&&!ct(x)?x.Xed=!0:P.v.colorIndex!==0&&!i(x)&&d(x)}}else I(o)?c(k.v[r][a],Mt.v):d(k.v[r][a])};let y=0,R=0;const F=(r,a)=>{y=r,R=a},L=r=>{var g;if(r.key!=="ArrowUp"&&r.key!=="ArrowDown"&&r.key!=="ArrowLeft"&&r.key!=="ArrowRight"&&r.key!==" ")return;r.preventDefault();let a=y,f=R;r.key==="ArrowUp"&&y>0?a--:r.key==="ArrowDown"&&y<k.numRows-1?a++:r.key==="ArrowLeft"&&R>0?f--:r.key==="ArrowRight"&&R<k.numColumns-1?f++:r.key===" "&&tt(o,!0),(g=document.querySelector(`[data-row="${a}"][data-col="${f}"]`))==null||g.focus(),I(o)&&!wt.v&&p(a,f)},O=r=>{r.key===" "&&(tt(o,!1),ue())},D=(r,a)=>{let f=0;for(let b=0;b<=r;b++)b!==0&&a[b-1].colorIndex===a[b].colorIndex&&f++,b<r&&(f+=a[b].count);let g=0;for(let b=a.length-1;b>=r;b--)b!==a.length-1&&a[b].colorIndex===a[b+1].colorIndex&&g++,b>r&&(g+=a[b].count);return{offsetHead:f,offsetTail:g}},G=(r,a,f)=>{const{offsetHead:g,offsetTail:b}=D(r,a);let _=0,x=0;for(;_<g&&x<=f.length-1;)f[x].colorIndex!==-1?_+=f[x].count:x>0&&_++,x++;_=0;let Y=f.length-1;for(;_<b&&Y>=0;)f[Y].colorIndex!==-1?_+=f[Y].count:Y<f.length-1&&_++,Y--;return{encodesStartIndex:x,encodesEndIndex:Y}},St=(r,a)=>{const f=new Array(r.length).fill(void 0),g=new Array(r.length).fill(void 0),b=new Array(r.length).fill(void 0);for(let _=0;_<r.length;_++){const{encodesStartIndex:x,encodesEndIndex:Y}=G(_,r,a),q=r[_];for(let C=x;C<=Y;C++)if(q.colorIndex===a[C].colorIndex&&q.count>=a[C].count){if(f.slice(0,_).includes(C))continue;f[_]=C;for(let T=0;T<_;T++)f[T]>C&&(f[T]=void 0);break}}for(let _=r.length-1;_>=0;_--){const{encodesStartIndex:x,encodesEndIndex:Y}=G(_,r,a),q=r[_];for(let C=Y;C>=x;C--)if(q.colorIndex===a[C].colorIndex&&q.count>=a[C].count){if(g.slice(_+1).includes(C))continue;g[_]=C;for(let T=r.length-1;T>_;T--)g[T]<C&&(g[T]=void 0);break}}for(let _=0;_<r.length;_++)f[_]===g[_]&&(b[_]=f[_]);return b},Ct=(r,a)=>{const f=St(r,a);let g=[],b=f[0]!==void 0?f[0]:0;for(let _=1;_<f.length;_++)f[_]!==void 0&&!(b===0&&f[_]===a.length-1)&&(f[_-1]===void 0&&g.push([b,f[_]]),b=f[_]);f[f.length-1]===void 0&&b!==a.length-1&&b!==0&&g.push([b,a.length-1]);for(let _=0;_<g.length;_++){const[x,Y]=g[_],q=x===0?0:f.indexOf(x),C=Y===a.length-1?r.length-1:f.indexOf(Y),T=r.slice(q,C+1),B=a.slice(x,Y+1);let K=0;for(let N=0;N<B.length;N++)a[N].colorIndex!==-1?K+=a[N].count:N>0&&N<B.length-1&&K++;const{offsetTail:z}=D(0,T);if(z+T[0].count>K)continue;const ot=St(T,B);for(let N=0;N<ot.length;N++)ot[N]!==void 0&&(ot[N]=ot[N]+x);f.splice(q,C-q+1,...ot)}return f},bt=be(()=>{let r=[[]];for(let a=0;a<kt.rowHints.length;a++){const f=kt.rowHints[a],g=k.rowEncodes[a];r[a]=Ct(f,g)}return r}),De=be(()=>{let r=[[]];for(let a=0;a<kt.columnHints.length;a++){const f=kt.columnHints[a],g=k.columnEncodes[a];r[a]=Ct(f,g)}return r}),_e=(r,a,f,g)=>{const b=g?I(bt):I(De),_=g?k.rowEncodes[r]:k.columnEncodes[r];return b[r][a]!==void 0&&JSON.stringify(f)===JSON.stringify(_[b[r][a]])};var Dt=fn();Z("pointerup",rt,w),Z("keyup",rt,O);var he=A(Dt);{var Re=r=>{var a=en(),f=A(a),g=A(f),b=S(g);ft(b,17,()=>({length:k.numColumns}),dt,(_,x,Y)=>{var q=tn();ft(q,21,()=>kt.columnHints[Y],dt,(C,T,B)=>{var K=jo(),z=A(K,!0);X(K),et(ot=>{H(K,"opacity",ot),H(K,"font-size",Ht.v?".5rem":""),H(K,"color",W.v[I(T).colorIndex]),ee(z,I(T).count)},[()=>_e(Y,B,I(T),!1)?.2:1]),$(C,K)}),X(q),$(_,q)}),X(f),X(a),et(()=>{H(a,"background-color",Ht.v?W.v[0]:""),H(a,"position",Ht.v?"sticky":""),H(g,"visibility",Et.v&&Ht.v?"":"hidden"),H(g,"background-color",W.v[0])}),$(r,a)};V(he,r=>{U.v&&r(Re)})}var me=S(he),pe=A(me);ft(pe,17,()=>({length:k.numRows}),dt,(r,a,f)=>{var g=ln(),b=A(g);{var _=C=>{var T=nn(),B=A(T);ft(B,21,()=>kt.rowHints[f],dt,(K,z,ot)=>{var N=on(),at=A(N,!0);X(N),et(yt=>{H(N,"opacity",yt),H(N,"width",Et.v?".75rem":"1.5rem"),H(N,"font-size",Et.v?".5rem":""),H(N,"color",W.v[I(z).colorIndex]),ee(at,I(z).count)},[()=>_e(f,ot,I(z),!0)?.2:1]),$(K,N)}),X(B),X(T),et(()=>{H(T,"background-color",Et.v?W.v[0]:""),H(T,"position",Et.v?"sticky":"")}),$(C,T)};V(b,C=>{U.v&&C(_)})}var x=S(b);ft(x,17,()=>({length:k.numColumns}),dt,(C,T,B,K)=>{var z=an();z.__pointerdown=at=>{m(at,f,B)},Bt(z,"data-row",f),Bt(z,"data-col",B),z.__keydown=L;var ot=A(z);{var N=at=>{var yt=rn();Ae(3,yt,()=>Vo,()=>({duration:300})),$(at,yt)};V(ot,at=>{i(k.v[f][B])&&!Pt()&&at(N)})}X(z),et((at,yt)=>{H(z,"border-left",at),H(z,"border-top",yt),H(z,"background-color",W.v[k.v[f][B].colorIndex]),H(z,"color",W.v[1])},[()=>Pt()||!U.v?"0":`solid ${B%5===0&&B!==0?"4px":"2px"} ${ae.current.bgColor}`,()=>Pt()||!U.v?"0":`solid ${f%5===0&&f!==0?"4px":"2px"} ${ae.current.bgColor}`]),Z("pointerenter",z,()=>{E(f,B)}),Z("focus",z,()=>{F(f,B)}),$(C,z)});var Y=S(x);{var q=C=>{var T=sn();T.textContent=f%5===4?f+1:"",$(C,T)};V(Y,C=>{k.numRows>10&&U.v&&C(q)})}X(g),$(r,g)});var Ne=S(pe);{var ze=r=>{var a=vn(),f=S(A(a));ft(f,17,()=>({length:k.numColumns}),dt,(g,b,_)=>{var x=cn();x.textContent=_%5===4?_+1:"",$(g,x)}),X(a),$(r,a)};V(Ne,r=>{k.numColumns>10&&U.v&&r(ze)})}X(me),X(Dt),et(()=>H(Dt,"zoom",nt.v)),$(t,Dt),j()}it(["pointerdown","keydown"]);var un=M('<div class="flex"><button class="flex-1">Undo</button> <button class="flex-1">Redo</button></div>');function _n(t,e){Q(e,!0);const o=()=>{P.v.row!==-1&&ue(),P.reset()},n=u=>{u.key==="z"?l():u.key==="y"&&i()},s=()=>{k.numRows!==re.v&&(re.v=k.numRows),k.numColumns!==ne.v&&(ne.v=k.numColumns)},v=()=>{k.v=ro(ke.v[Tt.v]),Xe(),s()},l=()=>{Tt.v!==0&&(Tt.v--,v())},i=()=>{Tt.v!==ke.v.length-1&&(Tt.v++,v())};var h=un();Z("keydown",rt,n),Z("pointerup",rt,o);var c=A(h);c.__click=l;var d=S(c,2);d.__click=i,X(h),$(t,h),j()}it(["click"]);var _t=J(()=>wt),ht=J(()=>Mt),mt=J(()=>pt),hn=M('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0"></button>'),mn=M('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">X</button>'),pn=M('<div class="flex flex-wrap"><!> <!> <button class="flex aspect-square h-8 flex-1 items-center justify-center p-0" aria-label="Move"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21v-9m0 9l3-3m-3 3l-3-3m3-6V3m0 9H3m9 0h9m-9-9L9 6m3-3l3 3M3 12l3 3m-3-3l3-3m15 3l-3-3m3 3l-3 3"></path></svg></button></div>');function xn(t,e){Q(e,!1);const o=u=>{/[1-9]/.test(u.key)&&Number(u.key)<=W.v.length?n(Number(u.key)-1):u.key==="m"?v():u.key==="x"&&U.v&&s()},n=u=>{mt(mt().v=!1),_t(_t().v=!1),ht(ht().v=u)},s=()=>{mt(mt().v=!0),_t(_t().v=!1),ht(ht().v=-1)},v=()=>{mt(mt().v=!1),_t(_t().v=!0),ht(ht().v=-1)};lt();var l=pn();Z("keydown",rt,o);var i=A(l);ft(i,1,()=>W.v,dt,(u,m,p)=>{var w=hn();w.__click=()=>{n(p)},w.textContent=p+1,et(()=>{H(w,"filter",p===ht().v?"brightness(50%)":""),H(w,"color",p===0?W.v[1]:W.v[0]),H(w,"background-color",W.v[p])}),$(u,w)});var h=S(i,2);{var c=u=>{var m=mn();m.__click=s,et(()=>H(m,"filter",mt().v?"brightness(50%)":"")),$(u,m)};V(h,u=>{U.v&&u(c)})}var d=S(h,2);d.__click=v,X(l),et(()=>H(d,"filter",_t().v?"brightness(50%)":"")),$(t,l),j()}it(["click"]);var Ot=J(()=>fe),wn=M('<footer class="flex justify-center"><div class="flex overflow-hidden rounded-t-lg"><button>Options</button> <div><!> <!></div></div></footer>');function gn(t,e){Q(e,!1),lt();var o=wn(),n=A(o),s=A(n);s.__click=()=>{Ot(Ot().v=!Ot().v)};var v=S(s,2),l=A(v);xn(l,{});var i=S(l,2);_n(i,{}),X(v),X(n),X(o),et(()=>H(s,"filter",Ot().v?"brightness(50%)":"")),$(t,o),j()}it(["click"]);var bn=M('<span class="pt-2.5"> </span>'),yn=()=>{ao()},kn=M('<button class="-mt-1 rounded-b-lg">Play</button>'),$n=M('<header class="flex justify-center"><!></header>');function In(t,e){Q(e,!1),lt();var o=$n(),n=A(o);{var s=l=>{var i=bn(),h=A(i,!0);X(i),et(c=>ee(h,c),[()=>Pt()?"You win!":"Keep trying"],Ze),$(l,i)},v=l=>{var i=kn();i.__click=[yn],$(l,i)};V(n,l=>{U.v?l(s):l(v,!1)})}X(o),$(t,o),j()}it(["click"]);const te=t=>{let e=!1,o,n,s,v;const l=c=>{(c.button===1||c.button===0&&wt.v)&&(c.preventDefault(),e=!0,o=c.pageX-t.offsetLeft,n=c.pageY-t.offsetTop,s=t.scrollLeft,v=t.scrollTop,t.style.cursor="grabbing",document.addEventListener("mousemove",i),document.addEventListener("mouseup",h))},i=c=>{if(!e)return;c.preventDefault();const d=c.pageX-t.offsetLeft,u=c.pageY-t.offsetTop,m=(d-o)*2,p=(u-n)*2;t.scrollLeft=s-m,t.scrollTop=v-p},h=()=>{e=!1,t.style.cursor="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",h)};return t.addEventListener("mousedown",l),{destroy:()=>{t.removeEventListener("mousedown",l),t.style.cursor=""}}};var En=M('<!>  <main class="m-3 flex flex-1 overflow-auto svelte-v5w8hs"><!></main> <!> <!>',1);function Nn(t,e){Q(e,!0);let o=xt(oe(Yt));const n=m=>{m.preventDefault(),m.deltaY<0&&nt.v<se?nt.v+=.05:m.deltaY>0&&nt.v>Yt&&(nt.v-=.05)},s=m=>{if(!wt.v)return;const p=I(o);tt(o,oe(m.detail.scale));const w=I(o)<p;w&&nt.v>Yt?nt.v-=.025:!w&&nt.v<se&&(nt.v+=.025)},v=m=>(m.preventDefault(),m.returnValue="","");ce(()=>{document.body.style.color=W.v[0]});var l=En();Z("wheel",rt,n,void 0,!1),Z("contextmenu",rt,m=>m.preventDefault()),Z("load",rt,onload),Z("beforeunload",rt,m=>{v(m)}),$e(ye.body,(m,p)=>Wt==null?void 0:Wt(m,p),()=>()=>({})),Z("pinch",ye.body,s);var i=gt(l);In(i,{});var h=S(i,2);h.__click=()=>{fe.v=!1};var c=A(h);dn(c,{}),X(h),$e(h,m=>te==null?void 0:te(m));var d=S(h,2);gn(d,{});var u=S(d,2);Qo(u,{}),et(()=>H(h,"touch-action",wt.v?"auto":"none")),$(t,l),j()}it(["click"]);export{Nn as M};
