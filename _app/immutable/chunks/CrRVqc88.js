import{d as Se,a as $,t as M}from"./DnDka9iv.js";import{ar as Ce,a1 as Ft,as as Gt,a3 as Oe,aF as Pe,z as xe,E as Ye,aG as Be,aH as Fe,aI as Ge,aJ as qe,M as Ue,aq as Xt,ac as we,ad as ge,ae as We,aK as Ve,h as le,x as et,w as I,q as Je,u as ce,p as j,f as gt,a as tt,c as H,s as S,r as T,a9 as xt,aL as nt,t as J,a4 as be,aM as Ke,I as Ze,aN as ye}from"./Dd6hhvDe.js";import{a as Qe,w as je,l as ve,d as it,e as Q,s as ee}from"./ck40J3Bn.js";import{e as ft,i as dt,s as A}from"./BOJvW676.js";import{p as oe}from"./DIWL0Lin.js";import{i as W,r as ut,e as re,a as ne,b as k,c as F,p as ae,f as Mt,j as Et,k as Ht,s as Bt,l as rt,m as fe,t as kt,n as Pt,o as wt,q as P,d as pt,h as Tt,g as ke}from"./D97KNa_h.js";import{i as lt}from"./LNQSQsw5.js";import{i as V}from"./DYtTGJ6W.js";import{s as to,r as de,n as eo,a as ue,h as oo,l as ro,c as Xe,M as se,b as Yt,i as ct,d as no,e as ao}from"./C_j9ip9x.js";import{p as so}from"./CBg0lLAL.js";function $e(t,e,o){Ce(()=>{var r=Ft(()=>e(t,o==null?void 0:o())||{});if(o&&(r!=null&&r.update)){var s=!1,v={};Gt(()=>{var l=o();Oe(l),s&&Pe(v,l)&&(v=l,r.update(l))}),s=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}const io=()=>performance.now(),st={tick:t=>requestAnimationFrame(t),now:()=>io(),tasks:new Set};function Te(){const t=st.now();st.tasks.forEach(e=>{e.c(t)||(st.tasks.delete(e),e.f())}),st.tasks.size!==0&&st.tick(Te)}function lo(t){let e;return st.tasks.size===0&&st.tick(Te),{promise:new Promise(o=>{st.tasks.add(e={c:t,f:o})}),abort(){st.tasks.delete(e)}}}function Rt(t,e){je(()=>{t.dispatchEvent(new CustomEvent(e))})}function co(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function Ie(t){const e={},o=t.split(";");for(const r of o){const[s,v]=r.split(":");if(!s||v===void 0)break;const l=co(s.trim());e[l]=v.trim()}return e}const vo=t=>t;function Ae(t,e,o,r){var s=(t&Ge)!==0,v="both",l,i=e.inert,h=e.style.overflow,c,d;function u(){var y=We,R=xe;we(null),ge(null);try{return l??(l=o()(e,(r==null?void 0:r())??{},{direction:v}))}finally{we(y),ge(R)}}var m={is_global:s,in(){e.inert=i,Rt(e,"introstart"),c=ie(e,u(),d,1,()=>{Rt(e,"introend"),c==null||c.abort(),c=l=void 0,e.style.overflow=h})},out(y){e.inert=!0,Rt(e,"outrostart"),d=ie(e,u(),c,0,()=>{Rt(e,"outroend"),y==null||y()})},stop:()=>{c==null||c.abort(),d==null||d.abort()}},p=xe;if((p.transitions??(p.transitions=[])).push(m),Qe){var w=s;if(!w){for(var E=p.parent;E&&E.f&Ye;)for(;(E=E.parent)&&!(E.f&Be););w=!E||(E.f&Fe)!==0}w&&Ce(()=>{Ft(()=>m.in())})}}function ie(t,e,o,r,s){var v=r===1;if(qe(e)){var l,i=!1;return Ue(()=>{if(!i){var y=e({direction:v?"in":"out"});l=ie(t,y,o,r,s)}}),{abort:()=>{i=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(o==null||o.deactivate(),!(e!=null&&e.duration))return s(),{abort:Xt,deactivate:Xt,reset:Xt,t:()=>r};const{delay:h=0,css:c,tick:d,easing:u=vo}=e;var m=[];if(v&&o===void 0&&(d&&d(0,1),c)){var p=Ie(c(0,1));m.push(p,p)}var w=()=>1-r,E=t.animate(m,{duration:h});return E.onfinish=()=>{var y=(o==null?void 0:o.t())??1-r;o==null||o.abort();var R=r-y,G=e.duration*Math.abs(R),L=[];if(G>0){var O=!1;if(c)for(var D=Math.ceil(G/16.666666666666668),q=0;q<=D;q+=1){var St=y+R*u(q/D),Ct=Ie(c(St,1-St));L.push(Ct),O||(O=Ct.overflow==="hidden")}O&&(t.style.overflow="hidden"),w=()=>{var bt=E.currentTime;return y+R*u(bt/G)},d&&lo(()=>{if(E.playState!=="running")return!1;var bt=w();return d(bt,1-bt),!0})}E=t.animate(L,{duration:G,fill:"forwards"}),E.onfinish=()=>{w=()=>r,d==null||d(r,1-r),s()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=Xt)},deactivate:()=>{s=Xt},reset:()=>{r===0&&(d==null||d(1,0))},t:()=>w()}}function Lt(t,e,o=e){var r=Ve();ve(t,"input",s=>{var v=s?t.defaultValue:t.value;if(v=qt(t)?Ut(v):v,o(v),r&&v!==(v=e())){var l=t.selectionStart,i=t.selectionEnd;t.value=v??"",i!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(i,t.value.length))}}),(le&&t.defaultValue!==t.value||Ft(e)==null&&t.value)&&o(qt(t)?Ut(t.value):t.value),Gt(()=>{var s=e();qt(t)&&s===Ut(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Ee(t,e,o=e){ve(t,"change",r=>{var s=r?t.defaultChecked:t.checked;o(s)}),(le&&t.defaultChecked!==t.checked||Ft(e)==null)&&o(t.checked),Gt(()=>{var r=e();t.checked=!!r})}function qt(t){var e=t.type;return e==="number"||e==="range"}function Ut(t){return t===""?null:+t}function fo(t,e,o=e){ve(t,"change",()=>{o(t.files)}),le&&t.files&&o(t.files),Gt(()=>{t.files=e()})}function K(t){var e=Je(0);return function(){return arguments.length===1?(et(e,I(e)+1),arguments[0]):(I(e),t())}}const He="none";function uo(t){return Array.isArray(t)?t:[t]}function At(t,e,o){return t.addEventListener(e,o),()=>t.removeEventListener(e,o)}function _o(t,e){const o=t.getBoundingClientRect(),r=Math.abs(e[0].clientX-e[1].clientX),s=Math.abs(e[0].clientY-e[1].clientY),v=Math.min(e[0].clientX,e[1].clientX),l=Math.min(e[0].clientY,e[1].clientY),i=v+r/2,h=l+s/2,c=Math.round(i-o.left),d=Math.round(h-o.top);return{x:c,y:d}}function ho(t,e){return e.filter(o=>t.pointerId!==o.pointerId)}function mo(t,e,o){const r=t.getBoundingClientRect(),s=Math.round(e.clientX-r.left),v=Math.round(e.clientY-r.top);return{event:e,pointersCount:o.length,target:e.target,x:s,y:v}}function Nt(t,e,o,r,s){const v=mo(t,o,r);return t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:v})),v}function po(t,e,o,r,s,v=He,l=[]){e.style.touchAction=uo(v).join(" ");let i=[];function h(d){i.push(d);const u=Nt(e,t,d,i,"down");r==null||r(i,d),l.forEach(L=>{var O;(O=L.onDown)==null||O.call(L,u,i)});const m=d.pointerId;function p(L){if(m===L.pointerId){i=ho(L,i),i.length||w();const O=Nt(e,t,L,i,"up");s==null||s(i,L),l.forEach(D=>{var q;(q=D.onUp)==null||q.call(D,O,i)})}}function w(){E(),y(),R(),G()}const E=At(e,"pointermove",L=>{i=i.map(D=>L.pointerId===D.pointerId?L:D);const O=Nt(e,t,L,i,"move");o==null||o(i,L),l.forEach(D=>{var q;(q=D.onMove)==null||q.call(D,O,i)})}),y=At(e,"lostpointercapture",L=>{p(L)}),R=At(e,"pointerup",L=>{p(L)}),G=At(e,"pointerleave",L=>{i=[],w();const O=Nt(e,t,L,i,"up");s==null||s(i,L),l.forEach(D=>{var q;(q=D.onUp)==null||q.call(D,O,i)})})}const c=At(e,"pointerdown",h);return{destroy:()=>{c()}}}function Me(t){return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)}const Wt=(t,e)=>{ce(()=>{const{onMove:o,onDown:r,onUp:s,gestureName:v,parameters:l}=xo(t,e==null?void 0:e());return po(v,t,o,r,s,l.touchAction,l.plugins).destroy})};function xo(t,e){const o={touchAction:He,composed:!1,...e},r="pinch";let s,v=0,l;function i(d){d.length===1&&(s=void 0)}function h(d){d.length===2&&(v=Me(d),l=_o(t,d))}function c(d,u){if(d.length===2){const m=Me(d);if(s!==void 0&&m!==s){const p=m/v;t.dispatchEvent(new CustomEvent(r,{detail:{scale:p,center:l,pointerType:u.pointerType}}))}s=m}return!1}return{onMove:c,onDown:h,onUp:i,gestureName:r,parameters:o}}var $t=K(()=>ne),It=K(()=>re),Vt=K(()=>k),wo=()=>{to()},go=M("<button>Edit</button>"),bo=t=>{t.key==="Enter"&&de()},yo=t=>{t.key==="Enter"&&de()},ko=()=>{de()},$o=()=>{eo()},Io=(t,e)=>e("left"),Eo=(t,e)=>e("right"),Mo=(t,e)=>e("up"),Lo=(t,e)=>e("down"),So=M('<div class="flex"><input class="min-w-0 p-2.5 text-center text-black" inputmode="numeric" type="text"> <input class="min-w-0 p-2.5 text-center text-black" inputmode="numeric" type="text"></div> <div class="flex"><button class="flex-1">Resize</button> <button class="flex-1">Clear</button></div> <div class="flex"><button aria-label="Shift Left" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.41z"></path></svg></button> <button aria-label="Shift Right" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M8.59 16.59L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.41z"></path></svg></button> <button aria-label="Shift Up" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8.59l4.59 4.58L18 12l-6-6l-6 6l1.41 1.41L12 8.59z"></path></svg></button> <button aria-label="Shift Down" class="flex flex-1 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 15.41L7.41 10.83L6 12l6 6l6-6l-1.41-1.41L12 15.41z"></path></svg></button></div>',1);function Co(t,e){j(e,!1);const o=h=>Math.max(0,Number(String(h).replace(/[^0-9]/g,""))),r=h=>{Vt(Vt().v=Vt().v.map((c,d,u)=>{switch(h){case"right":return[c.slice(-1)[0],...c.slice(0,-1)];case"left":return[...c.slice(1),c[0]];case"down":return u[(d-1+u.length)%u.length];case"up":return u[(d+1)%u.length];default:return c}})),ue()};lt();var s=Se(),v=gt(s);{var l=h=>{var c=go();c.__click=[wo],$(h,c)},i=h=>{var c=So(),d=gt(c),u=H(d);ut(u),u.__keydown=[bo],u.__input=()=>{It(It().v=o(It().v))};var m=S(u,2);ut(m),m.__keydown=[yo],m.__input=()=>{$t($t().v=o($t().v))},T(d);var p=S(d,2),w=H(p);w.__click=[ko];var E=S(w,2);E.__click=[$o],T(p);var y=S(p,2),R=H(y);R.__click=[Io,r];var G=S(R,2);G.__click=[Eo,r];var L=S(G,2);L.__click=[Mo,r];var O=S(L,2);O.__click=[Lo,r],T(y),Lt(u,()=>It().v,D=>It(It().v=D)),Lt(m,()=>$t().v,D=>$t($t().v=D)),$(h,c)};V(v,h=>{W.v?h(l):h(i,!1)})}$(t,s),tt()}it(["click","keydown","input"]);const Xo=(t,e)=>{e(k.colorIndices,F.v,o=>{const r=document.createElement("a");r.download="shareogram.png",r.href=o,r.click()})};var To=M("<button>Save as PNG</button>");function Ao(t,e){j(e,!1);const o=(s,v,l)=>{const i=s[0].length,h=s.length,c=document.createElement("canvas");c.width=i,c.height=h;const d=c.getContext("2d");if(d){const u=d.createImageData(i,h);for(let p=0;p<h;p++)for(let w=0;w<i;w++){const E=v[s[p][w]],y=oo(E);if(y){const[R,G,L]=y,O=(p*i+w)*4;u.data[O]=R,u.data[O+1]=G,u.data[O+2]=L,u.data[O+3]=255}}d.putImageData(u,0,0);const m=c.toDataURL("image/png");l(m)}};lt();var r=To();r.__click=[Xo,o],$(t,r),tt()}it(["click"]);var Ho=M('<input class="mx-2" type="range" max="442" min="10">'),Do=M('<input class="hidden" accept="image/png" id="file-upload" type="file"> <label class="w-full cursor-pointer bg-[ButtonFace] p-2.5 text-center font-sans text-black active:brightness-50 hover:brightness-75" for="file-upload">Load PNG</label> <!>',1);function Ro(t,e){j(e,!0);let o=xt(10),r=xt(void 0);ce(()=>{I(r)!==void 0&&I(r).length>=1&&ro(I(r)[0],I(o))});var s=Do(),v=gt(s),l=S(v,4);{var i=h=>{var c=Ho();ut(c),Lt(c,()=>I(o),d=>et(o,d)),$(h,c)};V(l,h=>{I(r)!==void 0&&I(r).length>=1&&h(i)})}fo(v,()=>I(r),h=>et(r,h)),$(t,s),tt()}var Jt=K(()=>Mt),Kt=K(()=>ae),vt=K(()=>F),No=M('<button class="flex-1">-</button>'),zo=M('<!> <button class="flex-1">+</button>',1),Oo=M('<input type="color" class="h-8 min-w-12 flex-1 border-0">'),Po=M('<div><div class="flex flex-wrap"><!></div> <div class="flex flex-wrap"><input type="color" class="h-8 min-w-12 flex-1 border-0"> <!></div></div>');function Yo(t,e){j(e,!1);const o=()=>{const u="0123456789abcdef";let m="#";for(let p=0;p<6;p++){const w=Math.floor(Math.random()*u.length);m+=u[w]}return m},r=()=>vt().v.length>2;lt();var s=Po(),v=H(s),l=H(v);{var i=u=>{var m=zo(),p=gt(m);{var w=y=>{var R=No();R.__click=()=>{vt().v.pop(),Jt().v>vt().v.length-1&&Jt(Jt().v--),Xe()},$(y,R)};V(p,y=>{r()&&y(w)})}var E=S(p,2);E.__click=()=>{vt().v.push(o())},$(u,m)};V(l,u=>{W.v||u(i)})}T(v);var h=S(v,2),c=H(h);ut(c);var d=S(c,2);ft(d,1,()=>vt().v,dt,(u,m,p)=>{var w=Oo();ut(w),Lt(w,()=>vt().v[p],E=>vt(vt().v[p]=E)),$(u,w)}),T(h),T(s),Lt(c,()=>Kt().current.bgColor,u=>Kt(Kt().current.bgColor=u)),$(t,s),tt()}it(["click"]);var Zt=K(()=>Ht),Qt=K(()=>Et),Bo=M('<div class="flex justify-between border-t-2 border-t-black p-5"><input type="checkbox" class="svelte-rve7gr"> <input type="checkbox" class="svelte-rve7gr"></div>');function Fo(t,e){j(e,!1),lt();var o=Bo(),r=H(o);ut(r);var s=S(r,2);ut(s),T(o),Ee(r,()=>Qt().v,v=>Qt(Qt().v=v)),Ee(s,()=>Zt().v,v=>Zt(Zt().v=v)),$(t,o),tt()}var jt=K(()=>rt),Go=M('<input step=".025" type="range" class="svelte-4s2jov">');function qo(t,e){j(e,!1),lt();var o=Go();ut(o),Bt(o,"max",se),Bt(o,"min",Yt),Lt(o,()=>jt().v,r=>jt(jt().v=r)),$(t,o),tt()}const Uo=t=>t;function Wo(t){const e=t-1;return e*e*e+1}function Le(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Vo(t,{delay:e=0,duration:o=400,easing:r=Uo}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:r,css:v=>`opacity: ${v*s}`}}function Jo(t,{delay:e=0,duration:o=400,easing:r=Wo,x:s=0,y:v=0,opacity:l=0}={}){const i=getComputedStyle(t),h=+i.opacity,c=i.transform==="none"?"":i.transform,d=h*(1-l),[u,m]=Le(s),[p,w]=Le(v);return{delay:e,duration:o,easing:r,css:(E,y)=>`
			transform: ${c} translate(${(1-E)*u}${m}, ${(1-E)*p}${w});
			opacity: ${h-d*y}`}}var zt=K(()=>fe),Ko=M("<!> <!>",1),Zo=M('<div class="fixed inset-y-0 right-0 z-50 flex w-40 max-w-[75%] flex-col overflow-hidden rounded-l-3xl bg-white"><!> <!> <!> <!> <!></div>');function Qo(t,e){j(e,!1);const o=l=>{l.key==="o"&&zt(zt().v=!zt().v)};lt();var r=Se();Q("keydown",nt,o);var s=gt(r);{var v=l=>{var i=Zo(),h=H(i);{var c=y=>{var R=Ko(),G=gt(R);Ao(G,{});var L=S(G,2);Ro(L,{}),$(y,R)};V(h,y=>{W.v||y(c)})}var d=S(h,2);{var u=y=>{Co(y,{})};V(d,y=>{so.route.id!=="/daily"&&y(u)})}var m=S(d,2);Yo(m,{});var p=S(m,2);qo(p,{});var w=S(p,2);{var E=y=>{Fo(y,{})};V(w,y=>{W.v&&y(E)})}T(i),Ae(3,i,()=>Jo,()=>({x:80})),$(l,i)};V(s,l=>{zt().v&&l(v)})}$(t,r),tt()}var jo=M('<div class="font-bold"> </div>'),tr=M("<th></th>"),er=M('<thead class="top-0 z-20 align-bottom"><tr><th class="sticky left-0 z-30"></th><!></tr></thead>'),or=M('<div class="flex items-center justify-center font-bold"> </div>'),rr=M('<td class="left-0 z-10"><div class="flex justify-end"></div></td>'),nr=M("<span>X</span>"),ar=M('<td class="box-content h-6 min-w-6 text-center transition-colors duration-500" tabindex="0"><!></td>'),sr=M('<td class="sticky right-0 px-0.5 text-center text-xs"></td>'),ir=M("<tr><!><!><!></tr>"),lr=M('<td class="text-center text-xs"></td>'),cr=M('<tr class="sticky bottom-0"><td></td><!></tr>'),vr=M('<table class="m-32 border-collapse"><!><tbody><!><!></tbody></table>');function fr(t,e){j(e,!0);let o=xt(!1),r=xt(!1),s=xt(""),v=xt(0);const l=(n,a,f,g)=>{const b=Math.abs(n-f),_=Math.abs(a-g);return b===0&&_===1?g>a?"right":"left":b===1&&_===0?f>n?"below":"above":"not adjacent"},i=n=>n.Xed,h=n=>n.colorIndex===Mt.v,c=(n,a)=>{n.colorIndex=a},d=n=>{n.colorIndex=0},u=n=>{n.Xed=!n.Xed},m=(n,a,f)=>{wt.v||(n.target instanceof HTMLElement&&n.target.releasePointerCapture(n.pointerId),n.button===0?et(o,!0):n.button===2&&et(r,!0),p(a,f))},p=(n,a)=>{P.v={colorIndex:k.v[n][a].colorIndex,Xed:k.v[n][a].Xed,column:a,row:n},et(v,0),W.v?I(o)?pt.v&&!ct(k.v[n][a])?u(k.v[n][a]):!pt.v&&!i(k.v[n][a])&&(h(k.v[n][a])?d(k.v[n][a]):c(k.v[n][a],Mt.v)):I(r)&&(ct(k.v[n][a])?d(k.v[n][a]):u(k.v[n][a])):I(o)?c(k.v[n][a],Mt.v):I(r)&&d(k.v[n][a])},w=n=>{n.button===0?et(o,!1):n.button===2&&et(r,!1)},E=(n,a)=>{if(!I(o)&&!I(r)||I(o)&&I(r)||P.v.row===-1||wt.v)return;Ke(v),I(v)===1&&et(s,oe(l(P.v.row,P.v.column,n,a)));const f=k.v[P.v.row][P.v.column];if(W.v)if(I(s)==="above"||I(s)==="below"){const g=Math.min(P.v.row,n),b=Math.max(P.v.row,n);for(let _=g;_<b+1;_++){const x=k.v[_][P.v.column];I(o)?pt.v&&!ct(x)?x.Xed=f.Xed:!pt.v&&!i(x)&&c(x,f.colorIndex):P.v.Xed&&!ct(x)?x.Xed=!1:P.v.colorIndex===0&&!ct(x)?x.Xed=!0:P.v.colorIndex!==0&&!i(x)&&d(x)}}else{const g=Math.min(P.v.column,a),b=Math.max(P.v.column,a);for(let _=g;_<b+1;_++){const x=k.v[P.v.row][_];I(o)?pt.v&&!ct(x)?x.Xed=f.Xed:!pt.v&&!i(x)&&c(x,f.colorIndex):P.v.Xed&&!ct(x)?x.Xed=!1:P.v.colorIndex===0&&!ct(x)?x.Xed=!0:P.v.colorIndex!==0&&!i(x)&&d(x)}}else I(o)?c(k.v[n][a],Mt.v):d(k.v[n][a])};let y=0,R=0;const G=(n,a)=>{y=n,R=a},L=n=>{var g;if(n.key!=="ArrowUp"&&n.key!=="ArrowDown"&&n.key!=="ArrowLeft"&&n.key!=="ArrowRight"&&n.key!==" ")return;n.preventDefault();let a=y,f=R;n.key==="ArrowUp"&&y>0?a--:n.key==="ArrowDown"&&y<k.numRows-1?a++:n.key==="ArrowLeft"&&R>0?f--:n.key==="ArrowRight"&&R<k.numColumns-1?f++:n.key===" "&&et(o,!0),(g=document.querySelector(`[data-row="${a}"][data-col="${f}"]`))==null||g.focus(),I(o)&&!wt.v&&p(a,f)},O=n=>{n.key===" "&&(et(o,!1),ue())},D=(n,a)=>{let f=0;for(let b=0;b<=n;b++)b!==0&&a[b-1].colorIndex===a[b].colorIndex&&f++,b<n&&(f+=a[b].count);let g=0;for(let b=a.length-1;b>=n;b--)b!==a.length-1&&a[b].colorIndex===a[b+1].colorIndex&&g++,b>n&&(g+=a[b].count);return{offsetHead:f,offsetTail:g}},q=(n,a,f)=>{const{offsetHead:g,offsetTail:b}=D(n,a);let _=0,x=0;for(;_<g&&x<=f.length-1;)f[x].colorIndex!==-1?_+=f[x].count:x>0&&_++,x++;_=0;let Y=f.length-1;for(;_<b&&Y>=0;)f[Y].colorIndex!==-1?_+=f[Y].count:Y<f.length-1&&_++,Y--;return{encodesStartIndex:x,encodesEndIndex:Y}},St=(n,a)=>{const f=new Array(n.length).fill(void 0),g=new Array(n.length).fill(void 0),b=new Array(n.length).fill(void 0);for(let _=0;_<n.length;_++){const{encodesStartIndex:x,encodesEndIndex:Y}=q(_,n,a),U=n[_];for(let C=x;C<=Y;C++)if(U.colorIndex===a[C].colorIndex&&U.count>=a[C].count){if(f.slice(0,_).includes(C))continue;f[_]=C;for(let X=0;X<_;X++)f[X]>C&&(f[X]=void 0);break}}for(let _=n.length-1;_>=0;_--){const{encodesStartIndex:x,encodesEndIndex:Y}=q(_,n,a),U=n[_];for(let C=Y;C>=x;C--)if(U.colorIndex===a[C].colorIndex&&U.count>=a[C].count){if(g.slice(_+1).includes(C))continue;g[_]=C;for(let X=n.length-1;X>_;X--)g[X]<C&&(g[X]=void 0);break}}for(let _=0;_<n.length;_++)f[_]===g[_]&&(b[_]=f[_]);return b},Ct=(n,a)=>{const f=St(n,a);let g=[],b=f[0]!==void 0?f[0]:0;for(let _=1;_<f.length;_++)f[_]!==void 0&&!(b===0&&f[_]===a.length-1)&&(f[_-1]===void 0&&g.push([b,f[_]]),b=f[_]);f[f.length-1]===void 0&&b!==a.length-1&&b!==0&&g.push([b,a.length-1]);for(let _=0;_<g.length;_++){const[x,Y]=g[_],U=x===0?0:f.indexOf(x),C=Y===a.length-1?n.length-1:f.indexOf(Y),X=n.slice(U,C+1),B=a.slice(x,Y+1);let Z=0;for(let N=0;N<B.length;N++)a[N].colorIndex!==-1?Z+=a[N].count:N>0&&N<B.length-1&&Z++;const{offsetTail:z}=D(0,X);if(z+X[0].count>Z)continue;const ot=St(X,B);for(let N=0;N<ot.length;N++)ot[N]!==void 0&&(ot[N]=ot[N]+x);f.splice(U,C-U+1,...ot)}return f},bt=be(()=>{let n=[[]];for(let a=0;a<kt.rowHints.length;a++){const f=kt.rowHints[a],g=k.rowEncodes[a];n[a]=Ct(f,g)}return n}),De=be(()=>{let n=[[]];for(let a=0;a<kt.columnHints.length;a++){const f=kt.columnHints[a],g=k.columnEncodes[a];n[a]=Ct(f,g)}return n}),_e=(n,a,f,g)=>{const b=g?I(bt):I(De),_=g?k.rowEncodes[n]:k.columnEncodes[n];return b[n][a]!==void 0&&JSON.stringify(f)===JSON.stringify(_[b[n][a]])};var Dt=vr();Q("pointerup",nt,w),Q("keyup",nt,O);var he=H(Dt);{var Re=n=>{var a=er(),f=H(a),g=H(f),b=S(g);ft(b,17,()=>({length:k.numColumns}),dt,(_,x,Y)=>{var U=tr();ft(U,21,()=>kt.columnHints[Y],dt,(C,X,B)=>{var Z=jo(),z=H(Z,!0);T(Z),J(ot=>{A(Z,"opacity",ot),A(Z,"font-size",Ht.v?".5rem":""),A(Z,"color",F.v[I(X).colorIndex]),ee(z,I(X).count)},[()=>_e(Y,B,I(X),!1)?.2:1]),$(C,Z)}),T(U),$(_,U)}),T(f),T(a),J(()=>{A(a,"background-color",Ht.v?F.v[0]:""),A(a,"position",Ht.v?"sticky":""),A(g,"visibility",Et.v&&Ht.v?"":"hidden"),A(g,"background-color",F.v[0])}),$(n,a)};V(he,n=>{W.v&&n(Re)})}var me=S(he),pe=H(me);ft(pe,17,()=>({length:k.numRows}),dt,(n,a,f)=>{var g=ir(),b=H(g);{var _=C=>{var X=rr(),B=H(X);ft(B,21,()=>kt.rowHints[f],dt,(Z,z,ot)=>{var N=or(),at=H(N,!0);T(N),J(yt=>{A(N,"opacity",yt),A(N,"width",Et.v?".75rem":"1.5rem"),A(N,"font-size",Et.v?".5rem":""),A(N,"color",F.v[I(z).colorIndex]),ee(at,I(z).count)},[()=>_e(f,ot,I(z),!0)?.2:1]),$(Z,N)}),T(B),T(X),J(()=>{A(X,"background-color",Et.v?F.v[0]:""),A(X,"position",Et.v?"sticky":"")}),$(C,X)};V(b,C=>{W.v&&C(_)})}var x=S(b);ft(x,17,()=>({length:k.numColumns}),dt,(C,X,B,Z)=>{var z=ar();z.__pointerdown=at=>{m(at,f,B)},Bt(z,"data-row",f),Bt(z,"data-col",B),z.__keydown=L;var ot=H(z);{var N=at=>{var yt=nr();Ae(3,yt,()=>Vo,()=>({duration:300})),$(at,yt)};V(ot,at=>{i(k.v[f][B])&&!Pt()&&at(N)})}T(z),J((at,yt)=>{A(z,"border-left",at),A(z,"border-top",yt),A(z,"background-color",F.v[k.v[f][B].colorIndex]),A(z,"color",F.v[1])},[()=>Pt()||!W.v?"0":`solid ${B%5===0&&B!==0?"4px":"2px"} ${ae.current.bgColor}`,()=>Pt()||!W.v?"0":`solid ${f%5===0&&f!==0?"4px":"2px"} ${ae.current.bgColor}`]),Q("pointerenter",z,()=>{E(f,B)}),Q("focus",z,()=>{G(f,B)}),$(C,z)});var Y=S(x);{var U=C=>{var X=sr();X.textContent=f%5===4?f+1:"",J(()=>A(X,"color",F.v[1])),$(C,X)};V(Y,C=>{k.numRows>10&&W.v&&C(U)})}T(g),$(n,g)});var Ne=S(pe);{var ze=n=>{var a=cr(),f=S(H(a));ft(f,17,()=>({length:k.numColumns}),dt,(g,b,_)=>{var x=lr();x.textContent=_%5===4?_+1:"",J(()=>A(x,"color",F.v[1])),$(g,x)}),T(a),$(n,a)};V(Ne,n=>{k.numColumns>10&&W.v&&n(ze)})}T(me),T(Dt),J(()=>A(Dt,"zoom",rt.v)),$(t,Dt),tt()}it(["pointerdown","keydown"]);var dr=M('<div class="flex"><button class="flex-1">Undo</button> <button class="flex-1">Redo</button></div>');function ur(t,e){j(e,!0);const o=()=>{P.v.row!==-1&&ue(),P.reset()},r=u=>{u.key==="z"?l():u.key==="y"&&i()},s=()=>{k.numRows!==ne.v&&(ne.v=k.numRows),k.numColumns!==re.v&&(re.v=k.numColumns)},v=()=>{k.v=no(ke.v[Tt.v]),Xe(),s()},l=()=>{Tt.v!==0&&(Tt.v--,v())},i=()=>{Tt.v!==ke.v.length-1&&(Tt.v++,v())};var h=dr();Q("keydown",nt,r),Q("pointerup",nt,o);var c=H(h);c.__click=l;var d=S(c,2);d.__click=i,T(h),$(t,h),tt()}it(["click"]);var _t=K(()=>wt),ht=K(()=>Mt),mt=K(()=>pt),_r=M('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0"></button>'),hr=M('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">X</button>'),mr=M('<div class="flex flex-wrap"><!> <!> <button class="flex aspect-square h-8 flex-1 items-center justify-center p-0" aria-label="Move"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21v-9m0 9l3-3m-3 3l-3-3m3-6V3m0 9H3m9 0h9m-9-9L9 6m3-3l3 3M3 12l3 3m-3-3l3-3m15 3l-3-3m3 3l-3 3"></path></svg></button></div>');function pr(t,e){j(e,!1);const o=u=>{/[1-9]/.test(u.key)&&Number(u.key)<=F.v.length?r(Number(u.key)-1):u.key==="m"?v():u.key==="x"&&W.v&&s()},r=u=>{mt(mt().v=!1),_t(_t().v=!1),ht(ht().v=u)},s=()=>{mt(mt().v=!0),_t(_t().v=!1),ht(ht().v=-1)},v=()=>{mt(mt().v=!1),_t(_t().v=!0),ht(ht().v=-1)};lt();var l=mr();Q("keydown",nt,o);var i=H(l);ft(i,1,()=>F.v,dt,(u,m,p)=>{var w=_r();w.__click=()=>{r(p)},w.textContent=p+1,J(()=>{A(w,"filter",p===ht().v?"brightness(50%)":""),A(w,"color",p===0?F.v[1]:F.v[0]),A(w,"background-color",F.v[p])}),$(u,w)});var h=S(i,2);{var c=u=>{var m=hr();m.__click=s,J(()=>A(m,"filter",mt().v?"brightness(50%)":"")),$(u,m)};V(h,u=>{W.v&&u(c)})}var d=S(h,2);d.__click=v,T(l),J(()=>A(d,"filter",_t().v?"brightness(50%)":"")),$(t,l),tt()}it(["click"]);var Ot=K(()=>fe),xr=M('<footer class="flex justify-center"><div class="flex overflow-hidden rounded-t-lg"><button>Options</button> <div><!> <!></div></div></footer>');function wr(t,e){j(e,!1),lt();var o=xr(),r=H(o),s=H(r);s.__click=()=>{Ot(Ot().v=!Ot().v)};var v=S(s,2),l=H(v);pr(l,{});var i=S(l,2);ur(i,{}),T(v),T(r),T(o),J(()=>A(s,"filter",Ot().v?"brightness(50%)":"")),$(t,o),tt()}it(["click"]);var gr=M('<span class="pt-2.5"> </span>'),br=()=>{ao()},yr=M('<button class="-mt-1 rounded-b-lg">Play</button>'),kr=M('<header class="flex justify-center"><!></header>');function $r(t,e){j(e,!1),lt();var o=kr(),r=H(o);{var s=l=>{var i=gr(),h=H(i,!0);T(i),J(c=>ee(h,c),[()=>Pt()?"You win!":"Keep trying"],Ze),$(l,i)},v=l=>{var i=yr();i.__click=[br],$(l,i)};V(r,l=>{W.v?l(s):l(v,!1)})}T(o),$(t,o),tt()}it(["click"]);const te=t=>{let e=!1,o,r,s,v;const l=c=>{(c.button===1||c.button===0&&wt.v)&&(c.preventDefault(),e=!0,o=c.pageX-t.offsetLeft,r=c.pageY-t.offsetTop,s=t.scrollLeft,v=t.scrollTop,t.style.cursor="grabbing",document.addEventListener("mousemove",i),document.addEventListener("mouseup",h))},i=c=>{if(!e)return;c.preventDefault();const d=c.pageX-t.offsetLeft,u=c.pageY-t.offsetTop,m=(d-o)*2,p=(u-r)*2;t.scrollLeft=s-m,t.scrollTop=v-p},h=()=>{e=!1,t.style.cursor="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",h)};return t.addEventListener("mousedown",l),{destroy:()=>{t.removeEventListener("mousedown",l),t.style.cursor=""}}};var Ir=M('<!>  <main class="m-3 flex flex-1 overflow-auto svelte-v5w8hs"><!></main> <!> <!>',1);function Rr(t,e){j(e,!0);let o=xt(oe(Yt));const r=m=>{m.preventDefault(),m.deltaY<0&&rt.v<se?rt.v+=.05:m.deltaY>0&&rt.v>Yt&&(rt.v-=.05)},s=m=>{if(!wt.v)return;const p=I(o);et(o,oe(m.detail.scale));const w=I(o)<p;w&&rt.v>Yt?rt.v-=.025:!w&&rt.v<se&&(rt.v+=.025)},v=m=>(m.preventDefault(),m.returnValue="","");ce(()=>{document.body.style.color=F.v[0]});var l=Ir();Q("wheel",nt,r,void 0,!1),Q("contextmenu",nt,m=>m.preventDefault()),Q("load",nt,onload),Q("beforeunload",nt,m=>{v(m)}),$e(ye.body,(m,p)=>Wt==null?void 0:Wt(m,p),()=>()=>({})),Q("pinch",ye.body,s);var i=gt(l);$r(i,{});var h=S(i,2);h.__click=()=>{fe.v=!1};var c=H(h);fr(c,{}),T(h),$e(h,m=>te==null?void 0:te(m));var d=S(h,2);wr(d,{});var u=S(d,2);Qo(u,{}),J(()=>A(h,"touch-action",wt.v?"auto":"none")),$(t,l),tt()}it(["click"]);export{Rr as M};
