import{g as ot,E as Ve,h as K,s as Ce,a as lt,H as ut,r as Xe,d as Ee,e as ce,k as st,A as de,B as Me,C as Se,n as vt,D as it,F as ct,p as D,q as m,b as C,t as E,$ as ge,u as j,f as ye,G as ft}from"../chunks/disclose-version.B26Hmq6V.js";import{l as Je,p as dt,o as _t,q as ht,t as We,v as Ze,w as mt,T as bt,y as gt,n as Le,s as Z,G as pt,a as ae,U as yt,V as xt,W as wt,i as It,S as Ct,h as Et,X as kt,Y as At,K as Qe,g as R,O as z,C as oe,b as $e,D as le,Z as A,I as P}from"../chunks/runtime.86PiGSDc.js";import{d as me,e as fe,s as _e,a as Tt}from"../chunks/render.Bugs4qJz.js";import{p as V,i as Y}from"../chunks/if.C937Y0Pf.js";import{i as jt}from"../chunks/lifecycle.CzhO-o0r.js";import{r as ze}from"../chunks/misc.DcB2V4IN.js";function Re(t){return pe(t,new Map)}function pe(t,e,r,a){if(typeof t=="object"&&t!==null){const f=e.get(t);if(f!==void 0)return f;if(Je(t)){const s=[];e.set(t,s);for(let d=0;d<t.length;d+=1)s.push(pe(t[d],e));return s}if(dt(t)===_t){const s={};e.set(t,s);for(var o in t)s[o]=pe(t[o],e);return s}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return pe(t.toJSON(),e)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let ke=null;function $(t,e){return e}function St(t,e,r,a){for(var o=[],f=e.length,s=0;s<f;s++)yt(e[s].e,o,!0);var d=f>0&&o.length===0&&r!==null;if(d){var p=r.parentNode;vt(p),p.append(r),a.clear(),W(t,e[0].prev,e[f-1].next)}xt(o,()=>{for(var v=0;v<f;v++){var i=e[v];d||(a.delete(i.k),W(t,i.prev,i.next)),wt(i.e,!d)}})}function ee(t,e,r,a,o,f=null){var s=t,d={flags:e,items:new Map,first:null},p=(e&Ve)!==0;if(p){var v=t;s=K?Ce(v.firstChild):v.appendChild(ot())}K&&lt();var i=null;ht(()=>{var n=r(),u=Je(n)?n:n==null?[]:Array.from(n),l=u.length,h=d.flags;h&Se&&!It(u)&&!(Ct in u)&&!(Et in u)&&(h^=Se,h&ct&&!(h&de)&&(h^=de));let g=!1;if(K){var y=s.data===ut;y!==(l===0)&&(s=Xe(),Ce(s),Ee(!1),g=!0)}if(K){for(var k=null,x,c=0;c<l;c++){if(ce.nodeType===8&&ce.data===st){s=ce,g=!0,Ee(!1);break}var _=u[c],w=a(_,c);x=et(ce,d,k,null,_,w,c,o,h),d.items.set(w,x),k=x}l>0&&Ce(Xe())}K||Mt(u,d,s,o,h,a),f!==null&&(l===0?i?We(i):i=Ze(()=>f(s)):i!==null&&mt(i,()=>{i=null})),g&&Ee(!0)}),K&&(s=ce)}function Mt(t,e,r,a,o,f){var L,be,Ne,He;var s=(o&it)!==0,d=(o&(de|Me))!==0,p=t.length,v=e.items,i=e.first,n=i,u=new Set,l=null,h=new Set,g=[],y=[],k,x,c,_;if(s)for(_=0;_<p;_+=1)k=t[_],x=f(k,_),c=v.get(x),c!==void 0&&((L=c.a)==null||L.measure(),h.add(c));for(_=0;_<p;_+=1){if(k=t[_],x=f(k,_),c=v.get(x),c===void 0){var w=n?n.e.nodes.start:r;l=et(w,e,l,l===null?e.first:l.next,k,x,_,a,o),v.set(x,l),g=[],y=[],n=l.next;continue}if(d&&Rt(c,k,_,o),c.e.f&bt&&(We(c.e),s&&((be=c.a)==null||be.unfix(),h.delete(c))),c!==n){if(u.has(c)){if(g.length<y.length){var S=y[0],M;l=S.prev;var q=g[0],X=g[g.length-1];for(M=0;M<g.length;M+=1)Pe(g[M],S,r);for(M=0;M<y.length;M+=1)u.delete(y[M]);W(e,q.prev,X.next),W(e,l,q),W(e,X,S),n=S,l=X,_-=1,g=[],y=[]}else u.delete(c),Pe(c,n,r),W(e,c.prev,c.next),W(e,c,l===null?e.first:l.next),W(e,l,c),l=c;continue}for(g=[],y=[];n!==null&&n.k!==x;)u.add(n),y.push(n),n=n.next;if(n===null)continue;c=n}g.push(c),l=c,n=c.next}const N=Array.from(u);for(;n!==null;)N.push(n),n=n.next;var G=N.length;if(G>0){var Q=o&Ve&&p===0?r:null;if(s){for(_=0;_<G;_+=1)(Ne=N[_].a)==null||Ne.measure();for(_=0;_<G;_+=1)(He=N[_].a)==null||He.fix()}St(e,N,Q,v)}s&&gt(()=>{var Oe;for(c of h)(Oe=c.a)==null||Oe.apply()}),Le.first=e.first&&e.first.e,Le.last=l&&l.e}function Rt(t,e,r,a){a&de&&Z(t.v,e),a&Me?Z(t.i,r):t.i=r}function et(t,e,r,a,o,f,s,d,p){var v=ke;try{var i=(p&de)!==0,n=(p&Se)===0,u=i?n?pt(o):ae(o):o,l=p&Me?ae(s):s,h={i:l,v:u,k:f,a:null,e:null,prev:r,next:a};return ke=h,h.e=Ze(()=>d(t,u,l),K),h.e.prev=r&&r.e,h.e.next=a&&a.e,r===null?e.first=h:(r.next=h,r.e.next=h.e),a!==null&&(a.prev=h,a.e.prev=h.e),h}finally{ke=v}}function Pe(t,e,r){for(var a=t.next?t.next.e.nodes.start:r,o=e?e.e.nodes.start:r,f=t.e.nodes.start;f!==a;){var s=f.nextSibling;o.before(f),f=s}}function W(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}let Be=!1;function tt(){Be||(Be=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function re(t){if(K){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;xe(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var o=t.checked;xe(t,"checked",null),t.checked=o}}};t.__on_r=r,kt(r),tt()}}function xe(t,e,r){r=r==null?null:r+"";var a=t.__attributes??(t.__attributes={});K&&(a[e]=t.getAttribute(e),e==="src"||e==="href"||e==="srcset")||a[e]!==(a[e]=r)&&(e==="loading"&&(t[At]=r),r===null?t.removeAttribute(e):t.setAttribute(e,r))}function H(t,e,r,a){const o=t.style,f=o.getPropertyValue(e);r==null?f!==""&&o.removeProperty(e):f!==r&&o.setProperty(e,r,"")}function rt(t,e,r,a=r){t.addEventListener(e,r);const o=t.__on_r;o?t.__on_r=()=>{o(),a()}:t.__on_r=a,tt()}function he(t,e,r){rt(t,"input",()=>{r(Ye(t)?Ke(t.value):t.value)}),Qe(()=>{var a=e();if(K&&t.defaultValue!==t.value){r(t.value);return}Ye(t)&&a===Ke(t.value)||t.type==="date"&&!a&&!t.value||(t.value=a??"")})}function Fe(t,e,r){rt(t,"change",()=>{var a=t.checked;r(a)}),e()==null&&r(!1),Qe(()=>{var a=e();t.checked=!!a})}function Ye(t){var e=t.type;return e==="number"||e==="range"}function Ke(t){return t===""?null:+t}const Dt=!0,kr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Dt},Symbol.toStringTag,{value:"Module"}));function Nt(t,e,r,a){const o=Math.abs(t-r),f=Math.abs(e-a);return o===0&&f===1?a>e?"right":"left":o===1&&f===0?r>t?"below":"above":"not adjacent"}function nt(){const t="0123456789ABCDEF";let e="#";for(let r=0;r<6;r++){const a=Math.floor(Math.random()*t.length);e+=t[a]}return e}function we(t){return t===0?"":String.fromCharCode(96+t)}function qe(t){return t===""?0:t.charCodeAt(0)-96}function Ht(t,e){return t.map(r=>r.map(a=>a[e]))}function Ot(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){if(t[r].length!==e[r].length)return!1;for(let a=0;a<t[r].length;a++)if(t[r][a]!==e[r][a])return!1}return!0}const Xt=t=>t.flat().map(e=>e.toString(16).toUpperCase()).join(""),te=(t,e)=>b.value[t][e].colorIndex!==0,Ae=()=>T.value.length>2;function De(t,e,r){const a=[[]];let o=0;if(t<=50&&t>0&&e<=50&&e>0)for(let f=0;f<e;f++){a[f]=[];for(let s=0;s<t;s++)if(r){const d=parseInt(r[o],16);if(T.value.length-1<d)for(let p=T.value.length-1;p<d;p++)T.value.push(nt());a[f][s]={colorIndex:r[o]!==void 0?d:0,Xed:!1},o++}else a[f][s]={colorIndex:0,Xed:!1}}return a}function Ge(){for(let t=0;t<b.numRows;t++)for(let e=0;e<b.numColumns;e++)b.value[t][e].colorIndex>T.value.length-1&&(b.value[t][e].colorIndex=0)}const Ue=t=>JSON.parse(JSON.stringify(t));function O(t){const e=typeof t=="object";let r=ae(V(e?Ue(t):t));return{get value(){return R(r)},set value(o){Z(r,V(o))},reset:()=>Z(r,V(e?Ue(t):t))}}function Lt(){const t=O(at),e=z(()=>t.value.length),r=z(()=>t.value[0].length);return{get value(){return t.value},set value(a){t.value=a},reset:t.reset,get numRows(){return R(e)},get numColumns(){return R(r)}}}const T=O(["#f8fafc","#020617"]),ue=O(1),B=O(5),F=O(5),at=De(B.value,F.value),b=Lt(),ne=O([at]),U=O(0),se=O(!1),ve=O(!1),J=O(!1),I=O({row:-1,column:-1}),Te=O(""),je=O(0),zt=O(""),Ie=O(!0),ie=O(!1);var Pt=E('<label class="svelte-1co30ep"> </label>'),Bt=E('<button class="svelte-1co30ep"><!></button>'),Ft=E('<div class="middle svelte-1co30ep"></div>'),Yt=E('<input type="color" class="svelte-1co30ep">'),Kt=E('<button class="svelte-1co30ep">-</button>'),qt=E('<button class="svelte-1co30ep">+</button>'),Gt=E("<!> <!>",1),Ut=E('<input type="checkbox" class="svelte-1co30ep">'),Vt=E('<input type="checkbox" class="svelte-1co30ep">'),Jt=E('<header class="svelte-1co30ep"><div class="svelte-1co30ep"><div class="left svelte-1co30ep"><button id="undo" class="svelte-1co30ep">Undo</button> <span class="svelte-1co30ep">Ctrl + z</span></div> <div class="left svelte-1co30ep"><button id="undo" class="svelte-1co30ep">Redo</button> <span class="svelte-1co30ep">Ctrl + y</span></div></div> <!> <div class="svelte-1co30ep"><div class="svelte-1co30ep"><input type="color" class="svelte-1co30ep"> <!></div> <!> <!> <!></div></header>');function Wt(t,e){oe(e,!0);function r(){b.value=Re(ne.value[U.value]),Ge()}function a(){U.value!==0&&(U.value--,r())}function o(){U.value!==ne.value.length-1&&(U.value++,r())}function f(w){w.ctrlKey&&w.key==="z"?a():w.ctrlKey&&w.key==="y"&&o()}let s=ae("#476FB8");$e(()=>{document.body.style.backgroundColor=R(s),document.body.style.color=T.value[0]});var d=Jt();fe("keydown",ge,f,!1);var p=D(d),v=D(p),i=D(v);i.__click=a,m(m(i,!0)),j(v);var n=m(m(v,!0)),u=D(n);u.__click=o,m(m(u,!0)),j(n),j(p);var l=m(m(p,!0));Y(l,Ae,w=>{var S=Ft();ee(S,73,()=>T.value,$,(M,q,X)=>{var N=Bt();N.__click=()=>{ue.value=A(X)};var G=D(N);Y(G,()=>A(X)!==0&&ie.value,Q=>{var L=Pt(),be=D(L);P(()=>_e(be,we(A(X)))),j(L),P(()=>xe(L,"for",T.value[A(X)])),C(Q,L)}),j(N),P(()=>{H(N,"background-color",T.value[A(X)]),H(N,"color",T.value[0])}),C(M,N)}),j(S),C(w,S)});var h=m(m(l,!0)),g=D(h);H(g,"width","40rem"),H(g,"display","flex"),H(g,"flex-wrap","wrap"),H(g,"justify-content","right");var y=D(g);re(y);var k=m(m(y,!0));ee(k,65,()=>T.value,$,(w,S,M)=>{var q=Yt();re(q),he(q,()=>T.value[A(M)],X=>T.value[A(M)]=X),C(w,q)}),j(g);var x=m(m(g,!0));Y(x,()=>!J.value,w=>{var S=Gt(),M=ye(S);Y(M,Ae,X=>{var N=Kt(),G=z(()=>()=>{T.value.pop(),ue.value=1,Ge()});N.__click=function(...Q){var L;return(L=R(G))==null?void 0:L.apply(this,Q)},C(X,N)});var q=m(m(M,!0));Y(q,()=>T.value.length<16,X=>{var N=qt(),G=z(()=>()=>{T.value.push(nt())});N.__click=function(...Q){var L;return(L=R(G))==null?void 0:L.apply(this,Q)},C(X,N)}),C(w,S)});var c=m(m(x,!0));Y(c,Ae,w=>{var S=Ut();re(S),Fe(S,()=>ie.value,M=>ie.value=M),C(w,S)});var _=m(m(c,!0));Y(_,()=>b.numRows>5||b.numColumns>5,w=>{var S=Vt();re(S),Fe(S,()=>Ie.value,M=>Ie.value=M),C(w,S)}),j(h),j(d),he(y,()=>R(s),w=>Z(s,w)),C(t,d),le()}me(["click"]);var Zt=E('<button class="svelte-o41zl3"> </button>');function Qt(t,e){oe(e,!0);const r=(n,u)=>b.value[n][u].Xed,a=(n,u)=>b.value[n][u].colorIndex===ue.value;function o(n,u,l){b.value[n][u].colorIndex=l}function f(n,u){b.value[n][u].colorIndex=0}function s(n,u){b.value[n][u].Xed=!b.value[n][u].Xed}function d(n){J.value?n.button===0&&!r(e.i,e.j)?a(e.i,e.j)?o(e.i,e.j,0):o(e.i,e.j,ue.value):n.button===2&&!te(e.i,e.j)&&s(e.i,e.j):n.button===0&&!a(e.i,e.j)?o(e.i,e.j,ue.value):f(e.i,e.j),I.value={row:e.i,column:e.j},je.reset()}function p(){if(!(!se.value&&!ve.value||se.value&&ve.value||I.value.row===-1))if(je.value++,je.value===1&&(Te.value=Nt(I.value.row,I.value.column,e.i,e.j)),J.value)if(Te.value==="above"||Te.value==="below"){const n=Math.min(I.value.row,e.i),u=Math.max(I.value.row,e.i);for(let l=n;l<u+1;l++)se.value&&!r(l,I.value.column)?o(l,I.value.column,b.value[I.value.row][I.value.column].colorIndex):ve.value&&!te(l,I.value.column)&&(b.value[l][I.value.column].Xed=b.value[I.value.row][I.value.column].Xed)}else{const n=Math.min(I.value.column,e.j),u=Math.max(I.value.column,e.j);for(let l=n;l<u+1;l++)se.value&&!r(I.value.row,l)?o(I.value.row,l,b.value[I.value.row][I.value.column].colorIndex):ve.value&&!te(I.value.row,l)&&(b.value[I.value.row][l].Xed=b.value[I.value.row][I.value.column].Xed)}else te(I.value.row,I.value.column)?o(e.i,e.j,ue.value):f(e.i,e.j)}var v=Zt();v.__mousedown=d,P(()=>H(v,"color",te(e.i,e.j)?T.value[0]:T.value[1]));var i=D(v);P(()=>_e(i,r(e.i,e.j)?"X":ie.value?we(b.value[e.i][e.j].colorIndex):"")),j(v),P(()=>H(v,"background-color",T.value[b.value[e.i][e.j].colorIndex])),fe("mouseenter",v,p,!1),C(t,v),le()}me(["mousedown"]);var $t=E("<div> </div>"),er=E('<th class="svelte-m9mt2b"></th>'),tr=E('<thead><tr><th class="svelte-m9mt2b"></th><!></tr></thead>'),rr=E("<div> </div>"),nr=E('<td class="svelte-m9mt2b"></td>'),ar=E('<td class="svelte-m9mt2b"><!></td>'),or=E("<tr><!><!></tr>"),lr=E('<table class="svelte-m9mt2b"><!><tbody></tbody></table>');function ur(t,e){oe(e,!0);function r(v){const i=[[]];for(let n=0;n<b.numRows;n++){i[n]=[{count:0,color:""}];for(let u=0;u<b.numColumns;u++)if(te(n,u)){const l=u===0?null:v[n][u-1].colorIndex,h=v[n][u].colorIndex;l!==h?i[n].push({count:1,color:we(h)}):i[n][i[n].length-1].count++}i[n].length>1&&i[n][0].count===0&&i[n].shift()}return i}function a(v){const i=[[]];for(let n=0;n<b.numColumns;n++){i[n]=[{count:0,color:""}];for(let u=0;u<b.numRows;u++)if(te(u,n)){const l=u===0?null:v[u-1][n].colorIndex,h=v[u][n].colorIndex;l!==h?i[n].push({count:1,color:we(h)}):i[n][i[n].length-1].count++}i[n].length>1&&i[n][0].count===0&&i[n].shift()}return i}let o=ae(V([[]])),f=ae(V([[]]));$e(()=>{J.value||(Z(o,V(r(b.value))),Z(f,V(a(b.value))))});var s=lr(),d=D(s);Y(d,()=>J.value,v=>{var i=tr(),n=D(i),u=D(n),l=m(u);ee(l,65,()=>({length:b.numColumns}),$,(h,g,y)=>{var k=er();ee(k,73,()=>R(f)[A(y)],$,(x,c,_)=>{var w=$t();P(()=>H(w,"color",T.value[qe(A(c).color)]));var S=D(w);j(w),P(()=>_e(S,ie.value?A(c).count+A(c).color:A(c).count)),C(x,w)}),j(k),C(h,k)}),j(n),j(i),C(v,i)});var p=m(d);ee(p,73,()=>({length:b.numRows}),$,(v,i,n)=>{var u=or(),l=D(u);Y(l,()=>J.value,g=>{var y=nr();H(y,"display","flex"),H(y,"align-items","center"),H(y,"justify-content","right"),H(y,"height","var(--tile-width)"),ee(y,73,()=>R(o)[A(n)],$,(k,x,c)=>{var _=rr();H(_,"padding","2px"),P(()=>H(_,"color",T.value[qe(A(x).color)]));var w=D(_);j(_),P(()=>_e(w,ie.value?A(x).count+A(x).color:A(x).count)),C(k,_)}),j(y),C(g,y)});var h=m(l);ee(h,65,()=>({length:b.numColumns}),$,(g,y,k)=>{var x=ar(),c=D(x);Qt(c,{i:A(n),j:A(k)}),j(x),P(()=>{H(x,"border-top",A(n)%5===0&&A(n)!==0&&Ie.value?`solid 2px ${T.value[1]}`:"0"),H(x,"border-left",A(k)%5===0&&A(k)!==0&&Ie.value?`solid 2px ${T.value[1]}`:"0")}),C(g,x)}),j(u),C(v,u)}),j(p),j(s),C(t,s),le()}var sr=E('<main class="svelte-122lnz"><!></main>');function vr(t){var e=sr(),r=D(e);ur(r,{$$legacy:!0}),j(e),C(t,e)}var ir=E('<input class="svelte-1qwz963">');function cr(t,e){oe(e,!1);var r=ze(()=>b),a=ze(()=>zt);const o=d=>d.replace(/[^0-9A-F]/g,"");jt();var f=ir();re(f);var s=z(()=>()=>{a(a().value=o(a().value)),r(r().value=De(B.value,F.value,a().value))});f.__input=function(...d){var p;return(p=R(s))==null?void 0:p.apply(this,d)},xe(f,"placeholder","0123456789ABCDEF"),he(f,()=>a().value,d=>a(a().value=d)),C(t,f),le()}me(["input"]);var fr=(t,e)=>{navigator.clipboard.writeText(Xt(e.tileColorIndices)),alert("Copied to clipboard")},dr=E("<button>Export</button>");function _r(t,e){oe(e,!0);var r=dr();r.__click=[fr,e],C(t,r),le()}me(["click"]);var hr=E('<input autocomplete="off" class="svelte-1in9ujw"> <input autocomplete="off" class="svelte-1in9ujw"> <button>Start Game</button> <!> <!>',1),mr=E('<span class="svelte-1in9ujw"> </span> <button>New Editor</button>',1),br=E('<footer class="svelte-1in9ujw"><!></footer>');function gr(t,e){oe(e,!0);const r=v=>Number(String(v).replace(/[^0-9]/g,""));let a=ae(V([[]]));const o=z(()=>Ht(b.value,"colorIndex")),f=z(()=>Ot(R(a),R(o)));function s(v,i){b.value=De(v,i),ne.reset(),ne.value[0]=Re(b.value),U.reset()}var d=br(),p=D(d);Y(p,()=>!J.value,v=>{var i=hr(),n=ye(i);re(n);var u=z(()=>()=>{B.value=r(B.value),s(B.value,F.value)});n.__input=function(...c){var _;return(_=R(u))==null?void 0:_.apply(this,c)};var l=m(m(n,!0));re(l);var h=z(()=>()=>{F.value=r(F.value),s(B.value,F.value)});l.__input=function(...c){var _;return(_=R(h))==null?void 0:_.apply(this,c)};var g=m(m(l,!0)),y=z(()=>()=>{J.value=!0,Z(a,V(R(o))),s(B.value,F.value)});g.__click=function(...c){var _;return(_=R(y))==null?void 0:_.apply(this,c)},H(g,"margin-right","1rem");var k=m(m(g,!0));cr(k,{});var x=m(m(k,!0));_r(x,{get tileColorIndices(){return R(o)}}),he(n,()=>B.value,c=>B.value=c),he(l,()=>F.value,c=>F.value=c),C(v,i)},v=>{var i=mr(),n=ye(i),u=D(n);j(n);var l=m(m(n,!0)),h=z(()=>()=>{J.reset(),s(B.value,F.value)});l.__click=function(...g){var y;return(y=R(h))==null?void 0:y.apply(this,g)},P(()=>_e(u,R(f)?"You win":"Keep trying")),C(v,i)}),j(d),C(t,d),le()}me(["input","click"]);var pr=E("<!> <!> <!>",1);function Ar(t,e){oe(e,!0);function r(v){v.button===0?se.value=!0:v.button===2&&(ve.value=!0)}function a(v){v.button===0?se.reset():v.button===2&&ve.reset(),I.value.row!==-1&&(U.value!==ne.value.length-1&&ne.value.splice(U.value+1),U.value++,ne.value.push(Re(b.value))),I.reset()}var o=pr();fe("mousedown",ge,r,!1),fe("mouseup",ge,a,!1),fe("contextmenu",ge,function(...v){var i;return(i=R(f))==null?void 0:i.apply(this,v)},!1),Tt(v=>{ft.title="Pixel Pictures"});var f=z(()=>v=>v.preventDefault()),s=ye(o);Wt(s,{});var d=m(m(s,!0));vr(d);var p=m(m(d,!0));gr(p,{}),C(t,o),le()}export{Ar as component,kr as universal};
