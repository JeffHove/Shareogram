import{a as $,t as k}from"../chunks/disclose-version.qG5ofjPX.js";import{t as pt,q as Et,o as Xt,Q as St,v as Mt,ak as gt,h as V,x as Ge,i as Nt,a1 as bt,H as At,w as at,y as Pe,C as Ce,z as xt,A as wt,B as Ht,al as Rt,O as Je,n as it,am as je,s as W,an as et,ao as Dt,G as Lt,a as ct,ap as Ot,a0 as Gt,aq as Pt,ar as zt,W as Yt,Z as qt,as as Ut,V as Bt,a5 as Wt,d as Ft,at as Vt,au as Jt,a6 as tt,F as Kt,aj as be,g as b,ae as te,I as U,K as B,L as A,N as S,M as N,b as De,j as Xe,av as me,J as F,aw as Qt,ax as Zt}from"../chunks/runtime.Bvg2cBRz.js";import{d as se,e as re,s as Ne,a as jt}from"../chunks/render.fzw0RiVP.js";import{g as vt,a as eo,p as Ae,i as K}from"../chunks/if.MzOtzOOr.js";import{i as he}from"../chunks/lifecycle.7t52ZXyt.js";import{r as Y}from"../chunks/misc.CBV0I33n.js";function Oe(e,t=!1){return He(e,new Map)}function He(e,t,o,r){if(typeof e=="object"&&e!==null){const f=t.get(e);if(f!==void 0)return f;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(pt(e)){const n=[];t.set(e,n);for(let s=0;s<e.length;s+=1)n.push(He(e[s],t));return n}if(Et(e)===Xt){const n={};t.set(e,n);for(var i in e)n[i]=He(e[i],t);return n}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return He(e.toJSON(),t)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let ze=null;function pe(e,t){return t}function to(e,t,o,r){for(var i=[],f=t.length,n=0;n<f;n++)Ot(t[n].e,i,!0);var s=f>0&&i.length===0&&o!==null;if(s){var a=o.parentNode;Gt(a),a.append(o),r.clear(),ve(e,t[0].prev,t[f-1].next)}Pt(i,()=>{for(var l=0;l<f;l++){var d=t[l];s||(r.delete(d.k),ve(e,d.prev,d.next)),zt(d.e,!s)}})}function ge(e,t,o,r,i,f=null){var n=e,s={flags:t,items:new Map,first:null},a=(t&gt)!==0;if(a){var l=e;n=V?Ge(Yt(l)):l.appendChild(St())}V&&Nt();var d=null;Mt(()=>{var c=o(),v=pt(c)?c:c==null?[]:bt(c),u=v.length;let h=!1;if(V){var w=n.data===At;w!==(u===0)&&(n=at(),Ge(n),Pe(!1),h=!0)}if(V){for(var g=null,I,E=0;E<u;E++){if(Ce.nodeType===8&&Ce.data===qt){n=Ce,h=!0,Pe(!1);break}var _=v[E],m=r(_,E);I=It(Ce,s,g,null,_,m,E,i,t),s.items.set(m,I),g=I}u>0&&Ge(at())}V||oo(v,s,n,i,t,r),f!==null&&(u===0?d?xt(d):d=wt(()=>f(n)):d!==null&&Ht(d,()=>{d=null})),h&&Pe(!0)}),V&&(n=Ce)}function oo(e,t,o,r,i,f){var T,L,le,st;var n=(i&Ut)!==0,s=(i&(je|et))!==0,a=e.length,l=t.items,d=t.first,c=d,v,u=null,h,w=[],g=[],I,E,_,m;if(n)for(m=0;m<a;m+=1)I=e[m],E=f(I,m),_=l.get(E),_!==void 0&&((T=_.a)==null||T.measure(),(h??(h=new Set)).add(_));for(m=0;m<a;m+=1){if(I=e[m],E=f(I,m),_=l.get(E),_===void 0){var x=c?c.e.nodes_start:o;u=It(x,t,u,u===null?t.first:u.next,I,E,m,r,i),l.set(E,u),w=[],g=[],c=u.next;continue}if(s&&ro(_,I,m,i),_.e.f&Rt&&(xt(_.e),n&&((L=_.a)==null||L.unfix(),(h??(h=new Set)).delete(_))),_!==c){if(v!==void 0&&v.has(_)){if(w.length<g.length){var H=g[0],M;u=H.prev;var D=w[0],y=w[w.length-1];for(M=0;M<w.length;M+=1)ut(w[M],H,o);for(M=0;M<g.length;M+=1)v.delete(g[M]);ve(t,D.prev,y.next),ve(t,u,D),ve(t,y,H),c=H,u=y,m-=1,w=[],g=[]}else v.delete(_),ut(_,c,o),ve(t,_.prev,_.next),ve(t,_,u===null?t.first:u.next),ve(t,u,_),u=_;continue}for(w=[],g=[];c!==null&&c.k!==E;)(v??(v=new Set)).add(c),g.push(c),c=c.next;if(c===null)continue;_=c}w.push(_),u=_,c=_.next}if(c!==null||v!==void 0){for(var O=v===void 0?[]:bt(v);c!==null;)O.push(c),c=c.next;var q=O.length;if(q>0){var z=i&gt&&a===0?o:null;if(n){for(m=0;m<q;m+=1)(le=O[m].a)==null||le.measure();for(m=0;m<q;m+=1)(st=O[m].a)==null||st.fix()}to(t,O,z,l)}}n&&Je(()=>{var lt;if(h!==void 0)for(_ of h)(lt=_.a)==null||lt.apply()}),it.first=t.first&&t.first.e,it.last=u&&u.e}function ro(e,t,o,r){r&je&&W(e.v,t),r&et?W(e.i,o):e.i=o}function It(e,t,o,r,i,f,n,s,a){var l=ze;try{var d=(a&je)!==0,c=(a&Dt)===0,v=d?c?Lt(i):ct(i):i,u=a&et?ct(n):n,h={i:u,v,k:f,a:null,e:null,prev:o,next:r};return ze=h,h.e=wt(()=>s(e,v,u),V),h.e.prev=o&&o.e,h.e.next=r&&r.e,o===null?t.first=h:(o.next=h,o.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{ze=l}}function ut(e,t,o){for(var r=e.next?e.next.e.nodes_start:o,i=t?t.e.nodes_start:o,f=e.e.nodes_start;f!==r;){var n=Bt(f);i.before(f),f=n}}function ve(e,t,o){t===null?e.first=o:(t.next=o,t.e.next=o&&o.e),o!==null&&(o.prev=t,o.e.prev=t&&t.e)}function no(e,t,o){Wt(()=>{var r=Ft(()=>t(e,o==null?void 0:o())||{});if(r!=null&&r.destroy)return()=>r.destroy()})}let dt=!1;function $t(){dt||(dt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const o of e.target.elements)(t=o.__on_r)==null||t.call(o)})},{capture:!0}))}function ne(e){if(V){var t=!1,o=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;Le(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;Le(e,"checked",null),e.checked=i}}};e.__on_r=o,Jt(o),$t()}}function Le(e,t,o,r){o=o==null?null:o+"";var i=e.__attributes??(e.__attributes={});V&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=o)&&(t==="loading"&&(e[Vt]=o),o===null?e.removeAttribute(t):e.setAttribute(t,o))}function C(e,t,o,r,i){var f=e.__attributes??(e.__attributes={}),n=e.style,s="style-"+t;f[s]===o&&!i||(f[s]=o,o==null?n.removeProperty(t):n.setProperty(t,o,""))}function ot(e,t,o,r=o){e.addEventListener(t,o);const i=e.__on_r;i?e.__on_r=()=>{i(),r()}:e.__on_r=r,$t()}function ye(e,t,o){ot(e,"input",()=>{o(_t(e)?mt(e.value):e.value)}),tt(()=>{var r=t();if(V&&e.defaultValue!==e.value){o(e.value);return}_t(e)&&r===mt(e.value)||e.type==="date"&&!r&&!e.value||(e.value=r??"")})}const Ye=new Set;function qe(e,t,o,r,i){var f=o.getAttribute("type")==="checkbox",n=e;let s=!1;if(t!==null)for(var a of t)n=n[a]??(n[a]=[]);n.push(o),ot(o,"change",()=>{var l=o.__value;f&&(l=ft(n,l,o.checked)),i(l)},()=>i(f?[]:null)),tt(()=>{var l=r();if(V&&o.defaultChecked!==o.checked){s=!0;return}f?(l=l||[],o.checked=vt(l).includes(vt(o.__value))):o.checked=eo(o.__value,l)}),Kt(()=>{var l=n.indexOf(o);l!==-1&&n.splice(l,1)}),Ye.has(n)||(Ye.add(n),Je(()=>{n.sort((l,d)=>l.compareDocumentPosition(d)===4?-1:1),Ye.delete(n)})),Je(()=>{if(s){var l;if(f)l=ft(n,l,o.checked);else{var d=n.find(c=>c.checked);l=d==null?void 0:d.__value}i(l)}})}function ft(e,t,o){for(var r=new Set,i=0;i<e.length;i+=1)e[i].checked&&r.add(e[i].__value);return o||r.delete(t),Array.from(r)}function _t(e){var t=e.type;return t==="number"||t==="range"}function mt(e){return e===""?null:+e}function so(e,t,o){ot(e,"change",()=>{o(e.files)}),tt(()=>{e.files=t()})}const lo=!0,ir=Object.freeze(Object.defineProperty({__proto__:null,prerender:lo},Symbol.toStringTag,{value:"Module"})),J=e=>e.colorIndex!==0,rt=()=>{const e=[[]];for(let t=0;t<fe.v;(t+=1)-1){e[t]=[];for(let o=0;o<de.v;(o+=1)-1)e[t][o]={colorIndex:0,Xed:!1}}return e},kt=()=>{for(let e=0;e<p.numRows;(e+=1)-1)for(let t=0;t<p.numColumns;(t+=1)-1)p.v[e][t].colorIndex>X.v.length-1&&(p.v[e][t].colorIndex=0)},nt=()=>{oe.v!==_e.v.length-1&&_e.v.splice(oe.v+1),oe.v+=1,_e.v.push(Oe(p.v))},Re=()=>{de.v<1||fe.v<1||(p.v=rt(),_e.reset(),_e.v[0]=Oe(p.v),oe.reset(),ue.v=!1)},Ke=e=>{let t=0;for(let o=0;o<e.length;(o+=1)-1)t*=26,t+=e.charCodeAt(o)-97+1;return t-1},Qe=e=>{const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,t&255]},Se=e=>{let t="";for(;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t},P=e=>{let t=be(Ae(e));return{set v(r){W(t,Ae(r))},get v(){return b(t)},reset:()=>W(t,Ae(e))}},yt=()=>{const e=P(Ct),t=te(()=>e.v.length),o=te(()=>e.v[0].length),r=te(()=>e.v.map(s=>s.map(a=>a.colorIndex))),i=te(()=>{const s=[[]],a=e.v.length,l=e.v[0].length;for(let d=0;d<a;(d+=1)-1){s[d]=[{color:"",count:0}];for(let c=0;c<l;(c+=1)-1)if(J(e.v[d][c])){const v=c===0?null:e.v[d][c-1].colorIndex,u=e.v[d][c].colorIndex;v!==u?s[d].push({color:Se(u),count:1}):s[d][s[d].length-1].count+=1}s[d].length>1&&s[d][0].count===0&&s[d].shift()}return s}),f=te(()=>{const s=[[]];for(let a=0;a<b(o);(a+=1)-1){s[a]=[{color:"",count:0}];for(let l=0;l<b(t);(l+=1)-1)if(J(e.v[l][a])){const d=l===0?null:e.v[l-1][a].colorIndex,c=e.v[l][a].colorIndex;d!==c?s[a].push({color:Se(c),count:1}):s[a][s[a].length-1].count+=1}s[a].length>1&&s[a][0].count===0&&s[a].shift()}return s}),n=te(()=>{let s="",a=1;for(let d=0;d<b(t);(d+=1)-1)for(let c=0;c<b(o);(c+=1)-1)if(!(d===0&&c===0)){const v=c===0?e.v[d-1][b(o)-1]:e.v[d][c-1];v.colorIndex===e.v[d][c].colorIndex&&v.Xed===e.v[d][c].Xed?a+=1:(s+=a+(v.Xed?"X":Se(v.colorIndex)),a=1)}const l=e.v[b(t)-1][b(o)-1];return s+=a+(l.Xed?"X":Se(l.colorIndex)),s});return{get colorIndices(){return b(r)},get columnHints(){return b(f)},get numColumns(){return b(o)},get rowHints(){return b(i)},set v(s){e.v=s},get encoded(){return b(n)},get numRows(){return b(t)},get v(){return e.v},reset:e.reset}},ke=P("#476fb8"),X=P(["#f8fafc","#020617"]),xe=P(1),de=P(5),fe=P(5),Ct=rt(),p=yt(),we=yt(),_e=P([Ct]),oe=P(0),G=P(!1),R=P({colorIndex:-1,column:-1,Xed:!1,row:-1}),Te=P(1),Ee=P(!1),ce=P(50),Ze=P(!1),Tt=P(!1),ue=P(!1);var Ie=Y(()=>fe),$e=Y(()=>de),Ue=Y(()=>G),ao=k("<button>New Editor</button>"),io=k('<div class="svelte-16du0in"><input type="text" class="svelte-16du0in"> <input type="text" class="svelte-16du0in"></div>'),co=k('<div class="svelte-16du0in"><!></div>');function vo(e,t){U(t,!1);const o=f=>Math.max(0,Number(String(f).replace(/[^0-9]/g,"")));he();var r=co(),i=A(r);K(i,()=>Ue().v,f=>{var n=ao();n.__click=()=>{Ue(Ue().v=!1),Re()},$(f,n)},f=>{var n=io(),s=A(n);ne(s),s.__input=()=>{$e($e().v=o($e().v)),Re()};var a=S(s,2);ne(a),a.__input=()=>{Ie(Ie().v=o(Ie().v)),Re()},N(n),ye(s,()=>$e().v,l=>$e($e().v=l)),ye(a,()=>Ie().v,l=>Ie(Ie().v=l)),$(f,n)}),N(r),$(e,r),B()}se(["click","input"]);const uo=(e,t)=>{t(p.colorIndices,X.v,o=>{const r=document.createElement("a");r.download="shareogram.png",r.href=o,r.click()})};var fo=k("<button>Export as PNG</button>");function _o(e,t){U(t,!1);const o=(i,f,n)=>{const s=i[0].length,a=i.length,l=document.createElement("canvas");l.width=s,l.height=a;const d=l.getContext("2d");if(d){const c=d.createImageData(s,a);for(let u=0;u<a;(u+=1)-1)for(let h=0;h<s;(h+=1)-1){const w=f[i[u][h]],g=Qe(w);if(g){const[I,E,_]=g,m=(u*s+h)*4;c.data[m]=I,c.data[m+1]=E,c.data[m+2]=_,c.data[m+3]=255}}d.putImageData(c,0,0);const v=l.toDataURL("image/png");n(v)}};he();var r=fo();r.__click=[uo,o],$(e,r),B()}se(["click"]);var mo=k('<input type="range" max="442" min="10">'),ho=k('<input accept="image/png" id="file-upload" type="file" class="svelte-nlo4k4"> <!>',1);function po(e,t){U(t,!0);let o=be(10),r=be(void 0);const i=(c,v,u)=>{const[h,w,g]=c,[I,E,_]=v;return Math.sqrt((h-I)**2+(w-E)**2+(g-_)**2)<=u},f=(c,v,u)=>"#"+[c,v,u].map(h=>Math.round(h).toString(16).padStart(2,"0")).join(""),n=(c,v,u)=>{const h=Qe(c);for(let w=0;w<v.length;(w+=1)-1){const g=Qe(v[w]);if(i(h,g,u))return w}return v.push(c),v.length-1},s=(c,v,u)=>{const h=new FileReader;h.onload=w=>{var I;const g=new Image;g.onload=()=>{const E=document.createElement("canvas"),_=E.getContext("2d");if(_){E.width=g.width,E.height=g.height,_.drawImage(g,0,0);const m=_.getImageData(0,0,g.width,g.height).data,x=[],H=[];for(let M=0;M<g.height;(M+=1)-1){const D=[];for(let y=0;y<g.width;(y+=1)-1){const O=(M*g.width+y)*4,q=m[O],z=m[O+1],T=m[O+2],L=f(q,z,T),le=n(L,x,v);D.push(le)}H.push(D)}u(H,x)}},g.src=(I=w.target)==null?void 0:I.result},h.readAsDataURL(c)};De(()=>{b(r)&&s(b(r)[0],b(o),(c,v)=>{de.v=c[0].length,fe.v=c.length,X.v=v,xe.v=0,p.v=rt();for(let u=0;u<p.numRows;(u+=1)-1)for(let h=0;h<p.numColumns;(h+=1)-1)p.v[u][h].colorIndex=c[u][h];nt()})});var a=ho(),l=Xe(a),d=S(l,2);K(d,()=>b(r),c=>{var v=mo();ne(v),ye(v,()=>b(o),u=>W(o,u)),$(c,v)}),so(l,()=>b(r),c=>W(r,c)),$(e,a),B()}var ae=Y(()=>Ee),Be=Y(()=>xe),We=Y(()=>ke),ie=Y(()=>X),go=k('<button class="svelte-1x4wuow">-</button>'),bo=k('<!> <button class="svelte-1x4wuow">+</button>',1),xo=k('<input type="color" class="svelte-1x4wuow">'),wo=k('<div class="svelte-1x4wuow"><div class="svelte-1x4wuow"><!></div> <div class="svelte-1x4wuow"><input type="color" class="svelte-1x4wuow"> <!></div></div>');function Io(e,t){U(t,!1);const o=()=>{const d="0123456789abcdef";let c="#";for(let v=0;v<6;(v+=1)-1){const u=Math.floor(Math.random()*d.length);c+=d[u]}return c},r=()=>ie().v.length>2;he();var i=wo(),f=A(i),n=A(f);K(n,()=>!G.v,d=>{var c=bo(),v=Xe(c);K(v,r,h=>{var w=go();w.__click=()=>{ie().v.pop(),Be().v>ie().v.length-1&&Be(Be().v-=1),kt()},$(h,w)});var u=S(v,2);u.__click=()=>{ie().v.push(o())},$(d,c)}),N(f);var s=S(f,2),a=A(s);ne(a),a.__change=()=>{ae(ae().v=!0)},a.__click=()=>{ae(ae().v=!1)};var l=S(a,2);ge(l,1,()=>ie().v,pe,(d,c,v)=>{var u=xo();ne(u),u.__change=()=>{ae(ae().v=!0)},u.__click=()=>{ae(ae().v=!1)},ye(u,()=>ie().v[v],h=>ie(ie().v[v]=h)),$(d,u)}),N(s),N(i),ye(a,()=>We().v,d=>We(We().v=d)),$(e,i),B()}se(["click","change"]);var Q=Y(()=>Te),$o=k('<input name="border" type="radio" class="svelte-soh54d">'),ko=k('<div class="svelte-soh54d"><input name="border" type="radio" class="svelte-soh54d"> <input name="border" type="radio" class="svelte-soh54d"> <!></div>');function yo(e,t){U(t,!1);const o=[];he();var r=ko(),i=A(r);ne(i),i.value=(i.__value=0)==null?"":0;var f=S(i,2);ne(f),f.value=(f.__value=1)==null?"":1;var n=S(f,2);K(n,()=>de.v>5||fe.v>5,s=>{var a=$o();ne(a),a.value=(a.__value=2)==null?"":2,qe(o,[],a,()=>Q().v,l=>Q(Q().v=l)),$(s,a)}),N(r),qe(o,[],i,()=>Q().v,s=>Q(Q().v=s)),qe(o,[],f,()=>Q().v,s=>Q(Q().v=s)),$(e,r),B()}var Z=Y(()=>ce),Co=k('<input type="range" class="svelte-1wz0dqh">');function To(e,t){U(t,!1);const o=100,r=10,i=n=>{n.preventDefault(),n.deltaY<0&&Z().v<o?Z(Z().v+=5):n.deltaY>0&&Z().v>r&&Z(Z().v-=5)};he();var f=Co();re("wheel",me,i,void 0,!1),ne(f),Le(f,"max",o),Le(f,"min",r),ye(f,()=>Z().v,n=>Z(Z().v=n)),$(e,f),B()}var Fe=Y(()=>Tt),Eo=k("<!> <!>",1),Xo=k('<div class="svelte-17ypq31"><!> <!> <!> <!> <!> <button>Close Options</button></div>');function So(e,t){U(t,!1),he();var o=Xo(),r=A(o);K(r,()=>!G.v,l=>{var d=Eo(),c=Xe(d);po(c,{});var v=S(c,2);_o(v,{}),$(l,d)});var i=S(r,2);vo(i,{});var f=S(i,2);Io(f,{});var n=S(f,2);yo(n,{});var s=S(n,2);To(s,{});var a=S(s,2);a.__click=()=>{Fe(Fe().v=!1)},N(o),F(()=>C(o,"display",Fe().v?"flex":"none")),$(e,o),B()}se(["click"]);var Mo=k("<div> </div>"),No=k('<th class="svelte-16s63u3"></th>'),Ao=k('<thead><tr><th class="svelte-16s63u3"></th><!></tr></thead>'),Ho=k("<div> </div>"),Ro=k("<td></td>"),Do=k("<td> </td>"),Lo=k("<tr><!><!></tr>"),Oo=k('<table class="svelte-16s63u3"><!><tbody></tbody></table>');function Go(e,t){U(t,!0);let o=be(!1),r=be(!1),i=be(""),f=be(0);const n=(_,m,x,H)=>{const M=Math.abs(_-x),D=Math.abs(m-H);return M===0&&D===1?H>m?"right":"left":M===1&&D===0?x>_?"below":"above":"not adjacent"},s=_=>_.Xed,a=_=>_.colorIndex===xe.v,l=(_,m)=>{_.colorIndex=m},d=_=>{_.colorIndex=0},c=_=>{_.Xed=!_.Xed},v=(_,m,x)=>{R.v={colorIndex:p.v[m][x].colorIndex,Xed:p.v[m][x].Xed,column:x,row:m},Ee.v=!1,W(f,0),G.v?_.button===0?ue.v&&!J(p.v[m][x])?c(p.v[m][x]):!ue.v&&!s(p.v[m][x])&&(a(p.v[m][x])?d(p.v[m][x]):l(p.v[m][x],xe.v)):_.button===2&&(J(p.v[m][x])?d(p.v[m][x]):c(p.v[m][x])):_.button===0?l(p.v[m][x],xe.v):_.button===2&&d(p.v[m][x])},u=_=>{_.button===0?W(o,!0):_.button===2&&W(r,!0)},h=_=>{_.button===0?W(o,!1):_.button===2&&W(r,!1),Ee.v=!0},w=(_,m)=>{if(!b(o)&&!b(r)||b(o)&&b(r)||R.v.row===-1)return;Qt(f),b(f)===1&&W(i,Ae(n(R.v.row,R.v.column,_,m)));const x=p.v[R.v.row][R.v.column];if(G.v)if(b(i)==="above"||b(i)==="below"){const H=Math.min(R.v.row,_),M=Math.max(R.v.row,_);for(let D=H;D<M+1;(D+=1)-1){const y=p.v[D][R.v.column];b(o)?ue.v&&!J(y)?y.Xed=x.Xed:!ue.v&&!s(y)&&l(y,x.colorIndex):R.v.Xed&&!J(y)?y.Xed=!1:R.v.colorIndex===0&&!J(y)?y.Xed=!0:R.v.colorIndex!==0&&!s(y)&&d(y)}}else{const H=Math.min(R.v.column,m),M=Math.max(R.v.column,m);for(let D=H;D<M+1;(D+=1)-1){const y=p.v[R.v.row][D];b(o)?ue.v&&!J(y)?y.Xed=x.Xed:!ue.v&&!s(y)&&l(y,x.colorIndex):R.v.Xed&&!J(y)?y.Xed=!1:R.v.colorIndex===0&&!J(y)?y.Xed=!0:R.v.colorIndex!==0&&!s(y)&&d(y)}}else b(o)?l(p.v[_][m],xe.v):d(p.v[_][m])};var g=Oo();re("mousedown",me,u),re("mouseup",me,h);var I=A(g);K(I,()=>G.v,_=>{var m=Ao(),x=A(m),H=S(A(x));ge(H,17,()=>({length:p.numColumns}),pe,(M,D,y)=>{var O=No();ge(O,21,()=>we.columnHints[y],pe,(q,z)=>{var T=Mo();F(()=>C(T,"color",X.v[Ke(b(z).color)]));var L=A(T);N(T),F(()=>{C(T,"font-size",ce.v/1.5+"px"),Ne(L,b(z).count)}),$(q,T)}),N(O),$(M,O)}),N(x),N(m),$(_,m)});var E=S(I);ge(E,21,()=>({length:p.numRows}),pe,(_,m,x)=>{var H=Lo(),M=A(H);K(M,()=>G.v,O=>{var q=Ro();C(q,"justify-content","right"),C(q,"display","flex"),ge(q,21,()=>we.rowHints[x],pe,(z,T)=>{var L=Ho();F(()=>C(L,"color",X.v[Ke(b(T).color)])),C(L,"justify-content","center"),C(L,"align-items","center"),C(L,"display","flex");var le=A(L);N(L),F(()=>{C(L,"font-size",ce.v/1.5+"px"),C(L,"min-width",ce.v+"px"),C(L,"height",ce.v+"px"),Ne(le,b(T).count)}),$(z,L)}),N(q),$(O,q)});var D=S(M);ge(D,17,()=>({length:p.numColumns}),pe,(O,q,z)=>{var T=Do();T.__mousedown=le=>{v(le,x,z)},C(T,"transition","background-color .5s"),C(T,"text-align","center");var L=A(T);F(()=>Ne(L,s(p.v[x][z])?"X":"")),N(T),F(()=>{C(T,"border-left",Te.v===0?"0":`solid ${z%5===0&&z!==0&&Te.v===2?`4px ${X.v[1]}`:`2px ${ke.v}`}`),C(T,"border-top",Te.v===0?"0":`solid ${x%5===0&&x!==0&&Te.v===2?`4px ${X.v[1]}`:`2px ${ke.v}`}`),C(T,"background-color",X.v[p.v[x][z].colorIndex]),C(T,"font-size",ce.v/1.5+"px"),C(T,"min-width",ce.v+"px"),C(T,"height",ce.v+"px"),C(T,"color",X.v[1])}),re("mouseenter",T,()=>{w(x,z)}),$(O,T)}),N(H),$(_,H)}),N(E),N(g),$(e,g),B()}se(["mousedown"]);var Po=k('<div class="svelte-r2sle7"><button class="svelte-r2sle7">Undo</button> <button class="svelte-r2sle7">Redo</button></div>');function zo(e,t){U(t,!0);const o=()=>{R.v.row!==-1&&nt(),R.reset()},r=d=>{d.key==="z"?f():d.key==="y"&&n()},i=()=>{p.v=Oe(_e.v[oe.v]),kt()},f=()=>{oe.v!==0&&(oe.v-=1,i())},n=()=>{oe.v!==_e.v.length-1&&(oe.v+=1,i())};var s=Po();re("keydown",me,r),re("mouseup",me,o);var a=A(s);a.__click=f;var l=S(a,2);l.__click=n,N(s),$(e,s),B()}se(["click"]);var j=Y(()=>xe),ee=Y(()=>ue),Yo=k('<button class="svelte-7gpg2x"></button>'),qo=k('<button class="svelte-7gpg2x">X</button>'),Uo=k('<div class="svelte-7gpg2x"><!> <!></div>');function Bo(e,t){U(t,!1);const o=n=>{/[1-9]/.test(n.key)&&Number(n.key)<=X.v.length?(ee(ee().v=!1),j(j().v=Number(n.key)-1)):n.key==="x"&&G.v&&(ee(ee().v=!0),j(j().v=-1))};he();var r=Uo();re("keydown",me,o);var i=A(r);ge(i,1,()=>X.v,pe,(n,s,a)=>{var l=Yo();l.__click=()=>{j(j().v=a),ee(ee().v=!1)},l.textContent=a+1,F(()=>{C(l,"border",`solid 2px ${a===j().v?a===0?X.v[1]:X.v[0]:X.v[a]}`),C(l,"--max-h",(X.v.length>4?"2":"6")+"rem"),C(l,"color",a===0?X.v[1]:X.v[0]),C(l,"background-color",X.v[a])}),$(n,l)});var f=S(i,2);K(f,()=>G.v,n=>{var s=qo();s.__click=()=>{ee(ee().v=!0),j(j().v=-1)},F(()=>{C(s,"border",`solid 2px ${ee().v?X.v[1]:"ButtonFace"}`),C(s,"--max-h",(X.v.length>4?"2":"6")+"rem")}),$(n,s)}),N(r),$(e,r),B()}se(["click"]);var Wo=k('<footer class="svelte-6v3vqk"><div><!> <!></div></footer>');function Fo(e){var t=Wo(),o=A(t),r=A(o);Bo(r,{});var i=S(r,2);zo(i,{}),N(o),N(t),$(e,t)}var Vo=k("<button>Reveal Tile</button>");function Jo(e,t){U(t,!0);const o=(a,l)=>Math.floor(Math.random()*(l-a+1)+a),r=te(()=>{const a=[];let l=!0;const d=p.numRows,c=p.numColumns;for(let v=0;v<d;(v+=1)-1)for(let u=0;u<c;(u+=1)-1)we.v[v][u].colorIndex!==p.v[v][u].colorIndex&&(a.push({column:u,row:v}),l=!1);return{isDifferent:a,allSame:l}}),i=te(()=>b(r).isDifferent),f=te(()=>b(r).allSame);De(()=>{Ze.v=b(f)});const n=()=>{if(!Ze.v){const a=o(0,b(i).length-1),l=b(i)[a].row,d=b(i)[a].column;p.v[l][d]={colorIndex:we.v[l][d].colorIndex,Xed:!1},nt()}};var s=Vo();s.__click=n,$(e,s),B()}se(["click"]);var ht=Y(()=>we),Ve=Y(()=>Tt),Me=Y(()=>G),Ko=k("<span> </span> <!>",1),Qo=k("<button>Start Game</button>"),Zo=k('<header class="svelte-1x7vlvi"><button>Options</button> <!></header>');function jo(e,t){U(t,!1),he();var o=Zo(),r=A(o);r.__click=()=>{Ve(Ve().v=!Ve().v)},C(r,"margin-right","4px");var i=S(r,2);K(i,()=>Me().v,f=>{var n=Ko(),s=Xe(n),a=A(s);N(s);var l=S(s,2);Jo(l,{}),F(()=>Ne(a,Ze.v?"You win!":"Keep trying")),$(f,n)},f=>{var n=Qo();n.__click=()=>{Me(Me().v=!0),ht(ht().v=p.v),Re()},$(f,n)}),N(o),F(()=>C(o,"justify-content",Me().v?"space-between":"center")),$(e,o),B()}se(["click"]);const er=e=>{let t=!1,o,r,i,f;const n=l=>{l.button===1&&(l.preventDefault(),t=!0,o=l.pageX-e.offsetLeft,r=l.pageY-e.offsetTop,i=e.scrollLeft,f=e.scrollTop,e.style.cursor="grabbing",document.addEventListener("mousemove",s),document.addEventListener("mouseup",a))},s=l=>{if(!t)return;l.preventDefault();const d=l.pageX-e.offsetLeft,c=l.pageY-e.offsetTop,v=(d-o)*2,u=(c-r)*2;e.scrollLeft=i-v,e.scrollTop=f-u},a=()=>{t=!1,e.style.cursor="",document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a)};return e.addEventListener("mousedown",n),{destroy:()=>{e.removeEventListener("mousedown",n),e.style.cursor=""}}};var tr=k('<ul class="background svelte-m2n0ro"><li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li> <li class="svelte-m2n0ro"></li></ul> <!> <main class="svelte-m2n0ro"><!></main> <!> <!>',1);function cr(e,t){U(t,!0);const o=v=>{const u=v.match(/(\d+|[a-zX]+)/g),h=[],w=[];if(u)for(let g=0;g<u.length;(g+=1)-1){const I=u[g];isNaN(Number(I))?w.push(I):h.push(Number(I))}if(h.length!==w.length)throw new Error("Error: different number of counts and letters.");return{letters:w,numbers:h}},r=v=>{const u=o(v),h=[];let w=0,g=0;for(let I=0;I<fe.v;(I+=1)-1)h[I]=[];for(let I=0;I<u.numbers.length;(I+=1)-1)for(let E=0;E<u.numbers[I];(E+=1)-1)u.letters[I]==="X"?h[w][(g+=1)-1]={colorIndex:0,Xed:!0}:h[w][(g+=1)-1]={colorIndex:Ke(u.letters[I]),Xed:!1},g>de.v-1&&(w+=1,g=0);return h},i=()=>{if(window.location.hash){try{const v=window.location.hash.slice(1).split("-");G.v=!!Number(v[0]),de.v=Number(v[1]),fe.v=Number(v[2]),ke.v="#"+v[3];const u=G.v?v.slice(4,-2):v.slice(4,-1);for(let h=0;h<u.length;(h+=1)-1)X.v[h]="#"+u[h];p.v=r(v[G.v?v.length-2:v.length-1]),_e.v[0]=Oe(p.v),G.v&&(we.v=r(v[v.length-1]))}catch{alert("Couldn't load the code from the URL. Make sure you copied the link correctly.")}Ee.v=!0}};De(()=>{if(Ee.v){const v=[Number(G.v),de.v,fe.v,ke.v.slice(1)];for(let u=0;u<X.v.length;(u+=1)-1)v.push(X.v[u].slice(1));v.push(p.encoded),G.v&&v.push(we.encoded),window.location.hash=v.join("-")}}),De(()=>{document.body.style.color=X.v[0]});var f=tr();jt(v=>{Zt.title="Shareogram"}),re("contextmenu",me,v=>v.preventDefault()),re("load",me,i);var n=Xe(f),s=S(n,2);jo(s,{});var a=S(s,2),l=A(a);Go(l,{}),N(a);var d=S(a,2);So(d,{});var c=S(d,2);Fo(c),F(()=>C(n,"background-color",ke.v)),no(a,v=>er(v)),$(e,f),B()}export{cr as component,ir as universal};
