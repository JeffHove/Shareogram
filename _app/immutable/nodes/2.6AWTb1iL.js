import{a as C,t as X}from"../chunks/disclose-version.BFyFZ1Tk.js";import{v as Lt,q as ut,o as Kt,R as Zt,w as Qt,at as Rt,A as ee,D as tt,B as jt,a9 as Dt,H as er,C as It,F as rt,G as Re,au as Fe,x as Ot,y as Pt,z as tr,_ as Ve,k as Je,av as gt,aw as $t,ax as bt,ay as rr,a8 as nr,az as or,Q as sr,T as ar,a5 as ir,Z as Yt,aA as lr,m as cr,h as dt,aB as vr,a2 as ur,ab as Bt,u as zt,aC as dr,aD as fr,aE as hr,E as _r,aF as pr,aG as mr,aH as gr,n as De,aI as br,X as kt,Y as Tt,aJ as xr,ac as Ze,b as wr,d as B,g as b,ar as Q,O as V,p as W,a as U,s as H,c as L,r as S,J as Ae,f as Qe,aK as ft,aL as ve,t as J,aM as yr}from"../chunks/runtime.kwFfegih.js";import{a as Ir,b as $r,l as je,d as se,e as te,s as ht,c as kr}from"../chunks/render.DZPyI7WY.js";import{a as Tr,p as le,i as j}from"../chunks/if.QfZRQiwm.js";import{i as ue}from"../chunks/legacy.BZr0P_gC.js";function et(e,t=!1){return qe(e,new Map)}function qe(e,t,r,n){if(typeof e=="object"&&e!==null){const v=t.get(e);if(v!==void 0)return v;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Lt(e)){const a=[];t.set(e,a);for(let i=0;i<e.length;i+=1)a.push(qe(e[i],t));return a}if(ut(e)===Kt){const a={};t.set(e,a);for(var o in e)a[o]=qe(e[o],t);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return qe(e.toJSON(),t)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function pe(e,t){return t}function Cr(e,t,r,n){for(var o=[],v=t.length,a=0;a<v;a++)rr(t[a].e,o,!0);var i=v>0&&o.length===0&&r!==null;if(i){var c=r.parentNode;nr(c),c.append(r),n.clear(),he(e,t[0].prev,t[v-1].next)}or(o,()=>{for(var l=0;l<v;l++){var s=t[l];i||(n.delete(s.k),he(e,s.prev,s.next)),sr(s.e,!i)}})}function me(e,t,r,n,o,v=null){var a=e,i={flags:t,items:new Map,first:null},c=(t&Rt)!==0;if(c){var l=e;a=ee?tt(ar(l)):l.appendChild(Zt())}ee&&jt();var s=null,d=!1;Qt(()=>{var u=r(),h=Lt(u)?u:u==null?[]:Dt(u),f=h.length;if(d&&f===0)return;d=f===0;let _=!1;if(ee){var m=a.data===er;m!==(f===0)&&(a=It(),tt(a),rt(!1),_=!0)}if(ee){for(var g=null,$,I=0;I<f;I++){if(Re.nodeType===8&&Re.data===ir){a=Re,_=!0,rt(!1);break}var x=h[I],p=n(x,I);$=Gt(Re,i,g,null,x,p,I,o,t),i.items.set(p,$),g=$}f>0&&tt(It())}if(!ee){var k=Yt;Xr(h,i,a,o,t,(k.f&Fe)!==0,n)}v!==null&&(f===0?s?Ot(s):s=Pt(()=>v(a)):s!==null&&tr(s,()=>{s=null})),_&&rt(!0),r()}),ee&&(a=Re)}function Xr(e,t,r,n,o,v,a){var F,A,Y,re;var i=(o&lr)!==0,c=(o&(gt|bt))!==0,l=e.length,s=t.items,d=t.first,u=d,h,f=null,_,m=[],g=[],$,I,x,p;if(i)for(p=0;p<l;p+=1)$=e[p],I=a($,p),x=s.get(I),x!==void 0&&((F=x.a)==null||F.measure(),(_??(_=new Set)).add(x));for(p=0;p<l;p+=1){if($=e[p],I=a($,p),x=s.get(I),x===void 0){var k=u?u.e.nodes_start:r;f=Gt(k,t,f,f===null?t.first:f.next,$,I,p,n,o),s.set(I,f),m=[],g=[],u=f.next;continue}if(c&&Er(x,$,p,o),x.e.f&Fe&&(Ot(x.e),i&&((A=x.a)==null||A.unfix(),(_??(_=new Set)).delete(x))),x!==u){if(h!==void 0&&h.has(x)){if(m.length<g.length){var w=g[0],M;f=w.prev;var O=m[0],R=m[m.length-1];for(M=0;M<m.length;M+=1)Ct(m[M],w,r);for(M=0;M<g.length;M+=1)h.delete(g[M]);he(t,O.prev,R.next),he(t,f,O),he(t,R,w),u=w,f=R,p-=1,m=[],g=[]}else h.delete(x),Ct(x,u,r),he(t,x.prev,x.next),he(t,x,f===null?t.first:f.next),he(t,f,x),f=x;continue}for(m=[],g=[];u!==null&&u.k!==I;)(v||!(u.e.f&Fe))&&(h??(h=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue;x=u}m.push(x),f=x,u=x.next}if(u!==null||h!==void 0){for(var E=h===void 0?[]:Dt(h);u!==null;)(v||!(u.e.f&Fe))&&E.push(u),u=u.next;var K=E.length;if(K>0){var Z=o&Rt&&l===0?r:null;if(i){for(p=0;p<K;p+=1)(Y=E[p].a)==null||Y.measure();for(p=0;p<K;p+=1)(re=E[p].a)==null||re.fix()}Cr(t,E,Z,s)}}i&&Ve(()=>{var ye;if(_!==void 0)for(x of _)(ye=x.a)==null||ye.apply()}),Je.first=t.first&&t.first.e,Je.last=f&&f.e}function Er(e,t,r,n){n&gt&&$t(e.v,t),n&bt?$t(e.i,r):e.i=r}function Gt(e,t,r,n,o,v,a,i,c){var l=(c&gt)!==0,s=(c&vr)===0,d=l?s?cr(o):dt(o):o,u=c&bt?dt(a):a,h={i:u,v:d,k:v,a:null,e:null,prev:r,next:n};try{return h.e=Pt(()=>i(e,d,u),ee),h.e.prev=r&&r.e,h.e.next=n&&n.e,r===null?t.first=h:(r.next=h,r.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function Ct(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,o=t?t.e.nodes_start:r,v=e.e.nodes_start;v!==n;){var a=ur(v);o.before(v),v=a}}function he(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Ft(e,t,r){Bt(()=>{var n=zt(()=>t(e,r==null?void 0:r())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function oe(e){if(ee){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;Ke(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var o=e.checked;Ke(e,"checked",null),e.checked=o}}};e.__on_r=r,hr(r),Ir()}}function Ke(e,t,r,n){var o=e.__attributes??(e.__attributes={});ee&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[dr]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Mr(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var Xt=new Map;function Mr(e){var t=Xt.get(e.nodeName);if(t)return t;Xt.set(e.nodeName,t=[]);for(var r,n=ut(e),o=Element.prototype;o!==n;){r=fr(n);for(var v in r)r[v].set&&t.push(v);n=ut(n)}return t}function T(e,t,r,n){var o=e.__styles??(e.__styles={});o[t]!==r&&(o[t]=r,r==null?e.style.removeProperty(t):e.style.setProperty(t,r,""))}const Ar=()=>performance.now(),ge={tick:e=>requestAnimationFrame(e),now:()=>Ar(),tasks:new Set};function qt(e){ge.tasks.forEach(t=>{t.c(e)||(ge.tasks.delete(t),t.f())}),ge.tasks.size!==0&&ge.tick(qt)}function Sr(e){let t;return ge.tasks.size===0&&ge.tick(qt),{promise:new Promise(r=>{ge.tasks.add(t={c:e,f:r})}),abort(){ge.tasks.delete(t)}}}function Ye(e,t){e.dispatchEvent(new CustomEvent(t))}function Hr(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Et(e){const t={},r=e.split(";");for(const n of r){const[o,v]=n.split(":");if(!o||v===void 0)break;const a=Hr(o.trim());t[a]=v.trim()}return t}const Nr=e=>e;function Lr(e,t,r,n){var o=(e&br)!==0,v="both",a,i=t.inert,c,l;function s(){var _=Yt,m=Je;kt(null),Tt(null);try{return a??(a=r()(t,(n==null?void 0:n())??{},{direction:v}))}finally{kt(_),Tt(m)}}var d={is_global:o,in(){t.inert=i,Ye(t,"introstart"),c=_t(t,s(),l,1,()=>{Ye(t,"introend"),c==null||c.abort(),c=a=void 0})},out(_){t.inert=!0,Ye(t,"outrostart"),l=_t(t,s(),c,0,()=>{Ye(t,"outroend"),_==null||_()})},stop:()=>{c==null||c.abort(),l==null||l.abort()}},u=Je;if((u.transitions??(u.transitions=[])).push(d),$r){var h=o;if(!h){for(var f=u.parent;f&&f.f&_r;)for(;(f=f.parent)&&!(f.f&pr););h=!f||(f.f&mr)!==0}h&&Bt(()=>{zt(()=>d.in())})}}function _t(e,t,r,n,o){var v=n===1;if(gr(t)){var a,i=!1;return Ve(()=>{if(!i){var m=t({direction:v?"in":"out"});a=_t(e,m,r,n,o)}}),{abort:()=>{i=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return o(),{abort:De,deactivate:De,reset:De,t:()=>n};const{delay:c=0,css:l,tick:s,easing:d=Nr}=t;var u=[];if(v&&r===void 0&&(s&&s(0,1),l)){var h=Et(l(0,1));u.push(h,h)}var f=()=>1-n,_=e.animate(u,{duration:c});return _.onfinish=()=>{var m=(r==null?void 0:r.t())??1-n;r==null||r.abort();var g=n-m,$=t.duration*Math.abs(g),I=[];if($>0){if(l)for(var x=Math.ceil($/16.666666666666668),p=0;p<=x;p+=1){var k=m+g*d(p/x),w=l(k,1-k);I.push(Et(w))}f=()=>{var M=_.currentTime;return m+g*d(M/$)},s&&Sr(()=>{if(_.playState!=="running")return!1;var M=f();return s(M,1-M),!0})}_=e.animate(I,{duration:$,fill:"forwards"}),_.onfinish=()=>{f=()=>n,s==null||s(n,1-n),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=De)},deactivate:()=>{o=De},reset:()=>{n===0&&(s==null||s(1,0))},t:()=>f()}}function Ne(e,t,r=t){var n=xr();je(e,"input",()=>{var o=At(e)?St(e.value):e.value;r(o),n&&o!==(o=t())&&(e.value=o??"")}),Ze(()=>{var o=t();if(ee&&e.defaultValue!==e.value){r(e.value);return}At(e)&&o===St(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}const nt=new Set;function ot(e,t,r,n,o=n){var v=r.getAttribute("type")==="checkbox",a=e;let i=!1;if(t!==null)for(var c of t)a=a[c]??(a[c]=[]);a.push(r),je(r,"change",()=>{var l=r.__value;v&&(l=Mt(a,l,r.checked)),o(l)},()=>o(v?[]:null)),Ze(()=>{var l=n();if(ee&&r.defaultChecked!==r.checked){i=!0;return}v?(l=l||[],r.checked=l.includes(r.__value)):r.checked=Tr(r.__value,l)}),wr(()=>{var l=a.indexOf(r);l!==-1&&a.splice(l,1)}),nt.has(a)||(nt.add(a),Ve(()=>{a.sort((l,s)=>l.compareDocumentPosition(s)===4?-1:1),nt.delete(a)})),Ve(()=>{if(i){var l;if(v)l=Mt(a,l,r.checked);else{var s=a.find(d=>d.checked);l=s==null?void 0:s.__value}o(l)}})}function Rr(e,t,r=t){je(e,"change",()=>{var n=e.checked;r(n)}),t()==null&&r(!1),Ze(()=>{var n=t();e.checked=!!n})}function Mt(e,t,r){for(var n=new Set,o=0;o<e.length;o+=1)e[o].checked&&n.add(e[o].__value);return r||n.delete(t),Array.from(n)}function At(e){var t=e.type;return t==="number"||t==="range"}function St(e){return e===""?null:+e}function Dr(e,t,r=t){je(e,"change",()=>{r(e.files)}),Ze(()=>{e.files=t()})}function q(e){var t=dt(0);return function(){return arguments.length===1?(B(t,b(t)+1),arguments[0]):(b(t),e())}}const Or=!0,Kn=Object.freeze(Object.defineProperty({__proto__:null,prerender:Or},Symbol.toStringTag,{value:"Module"})),ne=e=>e.colorIndex!==0,xt=()=>{const e=[[]];for(let t=0;t<xe.v;(t+=1)-1){e[t]=[];for(let r=0;r<be.v;(r+=1)-1)e[t][r]={colorIndex:0,Xed:!1}}return e},Wt=()=>{for(let e=0;e<y.numRows;(e+=1)-1)for(let t=0;t<y.numColumns;(t+=1)-1)y.v[e][t].colorIndex>N.v.length-1&&(y.v[e][t].colorIndex=0)},wt=()=>{ce.v!==we.v.length-1&&we.v.splice(ce.v+1),ce.v+=1,we.v.push(et(y.v))},We=()=>{be.v<1||xe.v<1||(y.v=xt(),we.reset(),we.v[0]=et(y.v),ce.reset(),_e.v=!1)},pt=e=>{let t=0;for(let r=0;r<e.length;(r+=1)-1)t*=26,t+=e.charCodeAt(r)-97+1;return t-1},mt=e=>{const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,t&255]},Ue=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),Be=e=>{let t="";for(;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t},P=e=>{let t=Q(le(e));return{set v(n){B(t,le(n))},get v(){return b(t)},reset:()=>B(t,le(e))}},Ut=()=>{const e=P(Vt),t=V(()=>e.v.length),r=V(()=>e.v[0].length),n=V(()=>e.v.map(i=>i.map(c=>c.colorIndex))),o=V(()=>{const i=[[]],c=e.v.length,l=e.v[0].length;for(let s=0;s<c;(s+=1)-1){i[s]=[{color:"",count:0}];for(let d=0;d<l;(d+=1)-1)if(ne(e.v[s][d])){const u=d===0?null:e.v[s][d-1].colorIndex,h=e.v[s][d].colorIndex;u!==h?i[s].push({color:Be(h),count:1}):i[s][i[s].length-1].count+=1}i[s].length>1&&i[s][0].count===0&&i[s].shift()}return i}),v=V(()=>{const i=[[]];for(let c=0;c<b(r);(c+=1)-1){i[c]=[{color:"",count:0}];for(let l=0;l<b(t);(l+=1)-1)if(ne(e.v[l][c])){const s=l===0?null:e.v[l-1][c].colorIndex,d=e.v[l][c].colorIndex;s!==d?i[c].push({color:Be(d),count:1}):i[c][i[c].length-1].count+=1}i[c].length>1&&i[c][0].count===0&&i[c].shift()}return i}),a=V(()=>{let i="",c=1;for(let s=0;s<b(t);(s+=1)-1)for(let d=0;d<b(r);(d+=1)-1)if(!(s===0&&d===0)){const u=d===0?e.v[s-1][b(r)-1]:e.v[s][d-1];u.colorIndex===e.v[s][d].colorIndex&&u.Xed===e.v[s][d].Xed?c+=1:(i+=c+(u.Xed?"X":Be(u.colorIndex)),c=1)}const l=e.v[b(t)-1][b(r)-1];return i+=c+(l.Xed?"X":Be(l.colorIndex)),i});return{get colorIndices(){return b(n)},get columnHints(){return b(v)},get numColumns(){return b(r)},get rowHints(){return b(o)},set v(i){e.v=i},get encoded(){return b(a)},get numRows(){return b(t)},get v(){return e.v},reset:e.reset}},Se=P("#476fb8"),N=P(["#f8fafc","#020617"]),Te=P(1),be=P(5),xe=P(5),Vt=xt(),y=Ut(),Ce=Ut(),we=P([Vt]),ce=P(0),G=P(!1),D=P({colorIndex:-1,column:-1,Xed:!1,row:-1}),ie=P(1),Pe=P(!1),z=P(50),He=P(!1),yt=P(!1),_e=P(!1),Me=P(!0),Le=P(!1);var Xe=q(()=>xe),Ee=q(()=>be),st=q(()=>G),Pr=X("<button>New Editor</button>"),Yr=X('<div class="svelte-16du0in"><input type="text" class="svelte-16du0in"> <input type="text" class="svelte-16du0in"></div>'),Br=X('<div class="svelte-16du0in"><!></div>');function zr(e,t){W(t,!1);const r=v=>Math.max(0,Number(String(v).replace(/[^0-9]/g,"")));ue();var n=Br(),o=L(n);j(o,()=>st().v,v=>{var a=Pr();a.__click=()=>{st(st().v=!1),We()},C(v,a)},v=>{var a=Yr(),i=L(a);oe(i),i.__input=()=>{Ee(Ee().v=r(Ee().v)),We()};var c=H(i,2);oe(c),c.__input=()=>{Xe(Xe().v=r(Xe().v)),We()},S(a),Ne(i,()=>Ee().v,l=>Ee(Ee().v=l)),Ne(c,()=>Xe().v,l=>Xe(Xe().v=l)),C(v,a)}),S(n),C(e,n),U()}se(["click","input"]);const Gr=(e,t)=>{t(y.colorIndices,N.v,r=>{const n=document.createElement("a");n.download="shareogram.png",n.href=r,n.click()})};var Fr=X("<button>Export as PNG</button>");function qr(e,t){W(t,!1);const r=(o,v,a)=>{const i=o[0].length,c=o.length,l=document.createElement("canvas");l.width=i,l.height=c;const s=l.getContext("2d");if(s){const d=s.createImageData(i,c);for(let h=0;h<c;(h+=1)-1)for(let f=0;f<i;(f+=1)-1){const _=v[o[h][f]],m=mt(_);if(m){const[g,$,I]=m,x=(h*i+f)*4;d.data[x]=g,d.data[x+1]=$,d.data[x+2]=I,d.data[x+3]=255}}s.putImageData(d,0,0);const u=l.toDataURL("image/png");a(u)}};ue();var n=Fr();n.__click=[Gr,r],C(e,n),U()}se(["click"]);var Wr=X('<input type="range" max="442" min="10">'),Ur=X('<input accept="image/png" id="file-upload" type="file" class="svelte-nlo4k4"> <!>',1);function Vr(e,t){W(t,!0);let r=Q(10),n=Q(void 0);const o=(d,u,h)=>{const[f,_,m]=d,[g,$,I]=u;return Math.sqrt((f-g)**2+(_-$)**2+(m-I)**2)<=h},v=(d,u,h)=>"#"+[d,u,h].map(f=>Math.round(f).toString(16).padStart(2,"0")).join(""),a=(d,u,h)=>{const f=mt(d);for(let _=0;_<u.length;(_+=1)-1){const m=mt(u[_]);if(o(f,m,h))return _}return u.push(d),u.length-1},i=(d,u,h)=>{const f=new FileReader;f.onload=_=>{var g;const m=new Image;m.onload=()=>{const $=document.createElement("canvas"),I=$.getContext("2d");if(I){$.width=m.width,$.height=m.height,I.drawImage(m,0,0);const x=I.getImageData(0,0,m.width,m.height).data,p=[],k=[];for(let w=0;w<m.height;(w+=1)-1){const M=[];for(let O=0;O<m.width;(O+=1)-1){const R=(w*m.width+O)*4,E=x[R],K=x[R+1],Z=x[R+2],F=v(E,K,Z),A=a(F,p,u);M.push(A)}k.push(M)}h(k,p)}},m.src=(g=_.target)==null?void 0:g.result},f.readAsDataURL(d)};Ae(()=>{b(n)&&i(b(n)[0],b(r),(d,u)=>{be.v=d[0].length,xe.v=d.length,N.v=u,Te.v=0,y.v=xt();for(let h=0;h<y.numRows;(h+=1)-1)for(let f=0;f<y.numColumns;(f+=1)-1)y.v[h][f].colorIndex=d[h][f];wt()})});var c=Ur(),l=Qe(c),s=H(l,2);j(s,()=>b(n),d=>{var u=Wr();oe(u),Ne(u,()=>b(r),h=>B(r,h)),C(d,u)}),Dr(l,()=>b(n),d=>B(n,d)),C(e,c),U()}var de=q(()=>Pe),at=q(()=>Te),it=q(()=>Se),fe=q(()=>N),Jr=X('<button class="svelte-1ubn0yt">-</button>'),Kr=X('<!> <button class="svelte-1ubn0yt">+</button>',1),Zr=X('<input type="color" class="svelte-1ubn0yt">'),Qr=X('<div class="svelte-1ubn0yt"><div class="svelte-1ubn0yt"><!></div> <div class="svelte-1ubn0yt"><input type="color" class="svelte-1ubn0yt"> <!></div></div>');function jr(e,t){W(t,!1);const r=()=>{const s="0123456789abcdef";let d="#";for(let u=0;u<6;(u+=1)-1){const h=Math.floor(Math.random()*s.length);d+=s[h]}return d},n=()=>fe().v.length>2;ue();var o=Qr(),v=L(o),a=L(v);j(a,()=>!G.v,s=>{var d=Kr(),u=Qe(d);j(u,n,f=>{var _=Jr();_.__click=()=>{fe().v.pop(),at().v>fe().v.length-1&&at(at().v-=1),Wt()},C(f,_)});var h=H(u,2);h.__click=()=>{fe().v.push(r())},C(s,d)}),S(v);var i=H(v,2),c=L(i);oe(c),c.__change=()=>{de(de().v=!0)},c.__click=()=>{de(de().v=!1)};var l=H(c,2);me(l,1,()=>fe().v,pe,(s,d,u)=>{var h=Zr();oe(h),h.__change=()=>{de(de().v=!0)},h.__click=()=>{de(de().v=!1)},Ne(h,()=>fe().v[u],f=>fe(fe().v[u]=f)),C(s,h)}),S(i),S(o),Ne(c,()=>it().v,s=>it(it().v=s)),C(e,o),U()}se(["click","change"]);var lt=q(()=>Me),en=X('<div class="svelte-1xxyg97"><label class="switch"><input type="checkbox" class="svelte-1xxyg97"></label></div>');function tn(e,t){W(t,!1),ue();var r=en(),n=L(r),o=L(n);oe(o),S(n),S(r),Rr(o,()=>lt().v,v=>lt(lt().v=v)),C(e,r),U()}var ae=q(()=>ie),rn=X('<input name="border" type="radio" class="svelte-qc9c1k">'),nn=X('<div class="svelte-qc9c1k"><input name="border" type="radio" class="svelte-qc9c1k"> <input name="border" type="radio" class="svelte-qc9c1k"> <!></div>');function on(e,t){W(t,!1);const r=[];ue();var n=nn(),o=L(n);oe(o),o.value=(o.__value=0)==null?"":0;var v=H(o,2);oe(v),v.value=(v.__value=1)==null?"":1;var a=H(v,2);j(a,()=>be.v>5||xe.v>5,i=>{var c=rn();oe(c),c.value=(c.__value=2)==null?"":2,ot(r,[],c,()=>ae().v,l=>ae(ae().v=l)),C(i,c)}),S(n),ot(r,[],o,()=>ae().v,i=>ae(ae().v=i)),ot(r,[],v,()=>ae().v,i=>ae(ae().v=i)),C(e,n),U()}var sn=X("<button>Reveal Tile</button>");function an(e,t){W(t,!0);const r=V(()=>{const i=[];let c=!0;const l=y.numRows,s=y.numColumns;for(let d=0;d<l;(d+=1)-1)for(let u=0;u<s;(u+=1)-1)Ce.v[d][u].colorIndex!==y.v[d][u].colorIndex&&(i.push({column:u,row:d}),c=!1);return{isDifferent:i,allSame:c}}),n=V(()=>b(r).isDifferent),o=V(()=>b(r).allSame);Ae(()=>{He.v=b(o)});const v=()=>{if(!He.v){const i=Ue(0,b(n).length-1),c=b(n)[i].row,l=b(n)[i].column;y.v[c][l]={colorIndex:Ce.v[c][l].colorIndex,Xed:!1},wt()}};var a=sn();a.__click=v,C(e,a),U()}se(["click"]);const Jt="none";function ln(e){return Array.isArray(e)?e:[e]}function Oe(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function cn(e,t){const r=e.getBoundingClientRect(),n=Math.abs(t[0].clientX-t[1].clientX),o=Math.abs(t[0].clientY-t[1].clientY),v=Math.min(t[0].clientX,t[1].clientX),a=Math.min(t[0].clientY,t[1].clientY),i=v+n/2,c=a+o/2,l=Math.round(i-r.left),s=Math.round(c-r.top);return{x:l,y:s}}function vn(e,t){return t.filter(r=>e.pointerId!==r.pointerId)}function ze(e,t,r,n,o){const v=e.getBoundingClientRect(),a=Math.round(r.clientX-v.left),i=Math.round(r.clientY-v.top);e.dispatchEvent(new CustomEvent(`${t}${o}`,{detail:{event:r,pointersCount:n.length,target:r.target,x:a,y:i}}))}function un(e,t,r,n,o,v=Jt){t.style.touchAction=ln(v).join(" ");let a=[];function i(l){a.push(l),ze(t,e,l,a,"down"),n==null||n(a,l);const s=l.pointerId;function d(g){s===g.pointerId&&(a=vn(g,a),a.length||u(),ze(t,e,g,a,"up"),o==null||o(a,g))}function u(){h(),f(),_(),m()}const h=Oe(t,"pointermove",g=>{a=a.map($=>g.pointerId===$.pointerId?g:$),ze(t,e,g,a,"move"),r==null||r(a,g)}),f=Oe(t,"lostpointercapture",g=>{d(g)}),_=Oe(t,"pointerup",g=>{d(g)}),m=Oe(t,"pointerleave",g=>{a=[],u(),ze(t,e,g,a,"up"),o==null||o(a,g)})}const c=Oe(t,"pointerdown",i);return{destroy:()=>{c()}}}function Ht(e){return Math.hypot(e[0].clientX-e[1].clientX,e[0].clientY-e[1].clientY)}function dn(e,t){const r={touchAction:Jt,composed:!1,...t},n="pinch";let o,v=0,a;function i(s,d){s.length===1&&(o=void 0)}function c(s,d){s.length===2&&(v=Ht(s),a=cn(e,s))}function l(s,d){if(s.length===2){const u=Ht(s);if(o!==void 0&&u!==o){const h=u/v;e.dispatchEvent(new CustomEvent(n,{detail:{scale:h,center:a,pointerType:d.pointerType}}))}o=u}return!1}return r.composed?{onMove:l,onDown:c,onUp:null}:un(n,e,l,c,i,r.touchAction)}var fn=X('<input type="range" class="svelte-1wz0dqh">');function hn(e,t){W(t,!0);const r=100,n=10;let o=Q(1);const v=c=>{c.preventDefault(),c.deltaY<0&&z.v<r?z.v+=5:c.deltaY>0&&z.v>n&&(z.v-=5)},a=c=>{if(!Le.v)return;const l=b(o);B(o,le(c.detail.scale));const s=b(o)<l;s&&z.v>n?z.v-=1:!s&&z.v<r&&(z.v+=1)};var i=fn();te("wheel",ve,v,void 0,!1),Ft(ft.body,c=>dn(c)),te("pinch",ft.body,a),oe(i),Ke(i,"max",r),Ke(i,"min",n),Ne(i,()=>z.v,c=>z.v=c),C(e,i),U()}var Ge=q(()=>yt),_n=X("<!> <!>",1),pn=X('<div class="svelte-xm1pu0"><!> <!> <!> <!> <!> <!> <!></div>');function mn(e,t){W(t,!1);const r=d=>{d.key==="o"&&Ge(Ge().v=!Ge().v)};ue();var n=pn();te("keydown",ve,r);var o=L(n);j(o,()=>!G.v,d=>{var u=_n(),h=Qe(u);Vr(h,{});var f=H(h,2);qr(f,{}),C(d,u)});var v=H(o,2);zr(v,{});var a=H(v,2);jr(a,{});var i=H(a,2);on(i,{});var c=H(i,2);tn(c,{});var l=H(c,2);hn(l,{});var s=H(l,2);j(s,()=>G.v,d=>{an(d,{})}),S(n),J(()=>T(n,"right",Ge().v?"0":"-200px")),C(e,n),U()}const gn=e=>e;function bn(e,{delay:t=0,duration:r=400,easing:n=gn}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:v=>`opacity: ${v*o}`}}var xn=X("<div> </div>"),wn=X('<th class="svelte-16s63u3"></th>'),yn=X('<thead><tr><th class="svelte-16s63u3"></th><!></tr></thead>'),In=X("<div> </div>"),$n=X("<td></td>"),kn=X("<span>X</span>"),Tn=X("<td><!></td>"),Cn=X("<tr><!><!></tr>"),Xn=X('<table class="svelte-16s63u3"><!><tbody></tbody></table>');function En(e,t){W(t,!0);let r=Q(!1),n=Q(!1),o=Q(""),v=Q(0);const a=(p,k,w,M)=>{const O=Math.abs(p-w),R=Math.abs(k-M);return O===0&&R===1?M>k?"right":"left":O===1&&R===0?w>p?"below":"above":"not adjacent"},i=p=>p.Xed,c=p=>p.colorIndex===Te.v,l=(p,k)=>{p.colorIndex=k},s=p=>{p.colorIndex=0},d=p=>{p.Xed=!p.Xed},u=(p,k,w)=>{Le.v||(p.target instanceof HTMLElement&&p.target.releasePointerCapture(p.pointerId),p.button===0?B(r,!0):p.button===2&&B(n,!0),D.v={colorIndex:y.v[k][w].colorIndex,Xed:y.v[k][w].Xed,column:w,row:k},Pe.v=!1,B(v,0),G.v?p.button===0?_e.v&&!ne(y.v[k][w])?d(y.v[k][w]):!_e.v&&!i(y.v[k][w])&&(c(y.v[k][w])?s(y.v[k][w]):l(y.v[k][w],Te.v)):p.button===2&&(ne(y.v[k][w])?s(y.v[k][w]):d(y.v[k][w])):p.button===0?l(y.v[k][w],Te.v):p.button===2&&s(y.v[k][w]))},h=p=>{p.button===0?B(r,!1):p.button===2&&B(n,!1),Pe.v=!0},f=(p,k)=>{if(!b(r)&&!b(n)||b(r)&&b(n)||D.v.row===-1||Le.v)return;yr(v),b(v)===1&&B(o,le(a(D.v.row,D.v.column,p,k)));const w=y.v[D.v.row][D.v.column];if(G.v)if(b(o)==="above"||b(o)==="below"){const M=Math.min(D.v.row,p),O=Math.max(D.v.row,p);for(let R=M;R<O+1;(R+=1)-1){const E=y.v[R][D.v.column];b(r)?_e.v&&!ne(E)?E.Xed=w.Xed:!_e.v&&!i(E)&&l(E,w.colorIndex):D.v.Xed&&!ne(E)?E.Xed=!1:D.v.colorIndex===0&&!ne(E)?E.Xed=!0:D.v.colorIndex!==0&&!i(E)&&s(E)}}else{const M=Math.min(D.v.column,k),O=Math.max(D.v.column,k);for(let R=M;R<O+1;(R+=1)-1){const E=y.v[D.v.row][R];b(r)?_e.v&&!ne(E)?E.Xed=w.Xed:!_e.v&&!i(E)&&l(E,w.colorIndex):D.v.Xed&&!ne(E)?E.Xed=!1:D.v.colorIndex===0&&!ne(E)?E.Xed=!0:D.v.colorIndex!==0&&!i(E)&&s(E)}}else b(r)?l(y.v[p][k],Te.v):s(y.v[p][k])};let _=Q(!1),m=Q(le(ie.v)),g=Q(le(Me.v));Ae(()=>{He.v&&!b(_)?(B(_,!0),B(m,le(ie.v)),B(g,le(Me.v)),ie.v=0,Me.v=!1):!He.v&&b(_)&&(B(_,!1),ie.v=b(m),Me.v=b(g))});var $=Xn();te("pointerup",ve,h);var I=L($);j(I,()=>G.v,p=>{var k=yn(),w=L(k),M=H(L(w));me(M,17,()=>({length:y.numColumns}),pe,(O,R,E)=>{var K=wn();me(K,21,()=>Ce.columnHints[E],pe,(Z,F)=>{var A=xn();const Y=V(()=>N.v[pt(b(F).color)]);J(()=>T(A,"color",b(Y)));var re=L(A,!0);S(A),J(()=>{T(A,"font-size",z.v/1.5+"px"),ht(re,b(F).count)}),C(Z,A)}),S(K),C(O,K)}),S(w),S(k),C(p,k)});var x=H(I);me(x,21,()=>({length:y.numRows}),pe,(p,k,w)=>{var M=Cn(),O=L(M);j(O,()=>G.v,K=>{var Z=$n();T(Z,"justify-content","right"),T(Z,"display","flex"),me(Z,21,()=>Ce.rowHints[w],pe,(F,A)=>{var Y=In();const re=V(()=>N.v[pt(b(A).color)]);J(()=>T(Y,"color",b(re))),T(Y,"justify-content","center"),T(Y,"align-items","center"),T(Y,"display","flex");var ye=L(Y,!0);S(Y),J(()=>{T(Y,"font-size",z.v/1.5+"px"),T(Y,"min-width",z.v+"px"),T(Y,"height",z.v+"px"),ht(ye,b(A).count)}),C(F,Y)}),S(Z),C(K,Z)});var R=H(O);me(R,17,()=>({length:y.numColumns}),pe,(K,Z,F)=>{var A=Tn();A.__pointerdown=re=>{u(re,w,F)},T(A,"transition","background-color .5s, border-radius .5s"),T(A,"text-align","center");var Y=L(A);j(Y,()=>i(y.v[w][F])&&!He.v,re=>{var ye=kn();Lr(3,ye,()=>bn,()=>({duration:300})),C(re,ye)}),S(A),J(()=>{T(A,"border-left",ie.v===0?"0":`solid ${F%5===0&&F!==0&&ie.v===2?`4px ${N.v[1]}`:`2px ${Se.v}`}`),T(A,"border-top",ie.v===0?"0":`solid ${w%5===0&&w!==0&&ie.v===2?`4px ${N.v[1]}`:`2px ${Se.v}`}`),T(A,"border-radius",Me.v===!0?"20%":"0"),T(A,"background-color",N.v[y.v[w][F].colorIndex]),T(A,"font-size",z.v/1.5+"px"),T(A,"min-width",z.v+"px"),T(A,"height",z.v+"px"),T(A,"color",N.v[1])}),te("pointerenter",A,()=>{f(w,F)}),C(K,A)}),S(M),C(p,M)}),S(x),S($),C(e,$),U()}se(["pointerdown"]);var Mn=X('<div class="svelte-r2sle7"><button class="svelte-r2sle7">Undo</button> <button class="svelte-r2sle7">Redo</button></div>');function An(e,t){W(t,!0);const r=()=>{D.v.row!==-1&&wt(),D.reset()},n=s=>{s.key==="z"?v():s.key==="y"&&a()},o=()=>{y.v=et(we.v[ce.v]),Wt()},v=()=>{ce.v!==0&&(ce.v-=1,o())},a=()=>{ce.v!==we.v.length-1&&(ce.v+=1,o())};var i=Mn();te("keydown",ve,n),te("pointerup",ve,r);var c=L(i);c.__click=v;var l=H(c,2);l.__click=a,S(i),C(e,i),U()}se(["click"]);var Ie=q(()=>Le),$e=q(()=>Te),ke=q(()=>_e),Sn=X('<button class="svelte-1sjs956"></button>'),Hn=X('<button class="svelte-1sjs956">X</button>'),Nn=X('<div class="svelte-1sjs956"><!> <!> <button aria-label="Move" class="svelte-1sjs956"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21v-9m0 9l3-3m-3 3l-3-3m3-6V3m0 9H3m9 0h9m-9-9L9 6m3-3l3 3M3 12l3 3m-3-3l3-3m15 3l-3-3m3 3l-3 3"></path></svg></button></div>');function Ln(e,t){W(t,!1);const r=s=>{/[1-9]/.test(s.key)&&Number(s.key)<=N.v.length?n(Number(s.key)-1):s.key==="m"?v():s.key==="x"&&G.v&&o()},n=s=>{ke(ke().v=!1),Ie(Ie().v=!1),$e($e().v=s)},o=()=>{ke(ke().v=!0),Ie(Ie().v=!1),$e($e().v=-1)},v=()=>{ke(ke().v=!1),Ie(Ie().v=!0),$e($e().v=-1)};ue();var a=Nn();te("keydown",ve,r);var i=L(a);me(i,1,()=>N.v,pe,(s,d,u)=>{var h=Sn();h.__click=()=>{n(u)},h.textContent=u+1,J(()=>{T(h,"border",`solid 2px ${u===$e().v?u===0?N.v[1]:N.v[0]:N.v[u]}`),T(h,"color",u===0?N.v[1]:N.v[0]),T(h,"background-color",N.v[u])}),C(s,h)});var c=H(i,2);j(c,()=>G.v,s=>{var d=Hn();d.__click=o,J(()=>T(d,"border",`solid 2px ${ke().v?N.v[1]:"ButtonFace"}`)),C(s,d)});var l=H(c,2);l.__click=v,S(a),J(()=>T(l,"border",`solid 2px ${Ie().v?N.v[1]:"ButtonFace"}`)),C(e,a),U()}se(["click"]);var ct=q(()=>yt),Rn=X('<footer class="svelte-6v3vqk"><div><button>Options</button> <div><!> <!></div></div></footer>');function Dn(e,t){W(t,!1),ue();var r=Rn(),n=L(r);T(n,"border-top-right-radius","8px"),T(n,"border-top-left-radius","8px"),T(n,"overflow","hidden"),T(n,"display","flex");var o=L(n);o.__click=()=>{ct(ct().v=!ct().v)};var v=H(o,2),a=L(v);Ln(a,{});var i=H(a,2);An(i,{}),S(v),S(n),S(r),C(e,r),U()}se(["click"]);var Nt=q(()=>Ce),vt=q(()=>G),On=X("<span> </span>"),Pn=X('<button class="svelte-93z3ep">Start Game</button>'),Yn=X('<header class="svelte-93z3ep"><!></header>');function Bn(e,t){W(t,!1),ue();var r=Yn(),n=L(r);j(n,()=>vt().v,o=>{var v=On();T(v,"padding-top","10px");var a=L(v,!0);S(v),J(()=>ht(a,He.v?"You win!":"Keep trying")),C(o,v)},o=>{var v=Pn();v.__click=()=>{vt(vt().v=!0),Nt(Nt().v=y.v),We()},C(o,v)}),S(r),C(e,r),U()}se(["click"]);const zn=e=>{let t=!1,r,n,o,v;const a=l=>{(l.button===1||l.button===0&&Le.v)&&(l.preventDefault(),t=!0,r=l.pageX-e.offsetLeft,n=l.pageY-e.offsetTop,o=e.scrollLeft,v=e.scrollTop,e.style.cursor="grabbing",document.addEventListener("mousemove",i),document.addEventListener("mouseup",c))},i=l=>{if(!t)return;l.preventDefault();const s=l.pageX-e.offsetLeft,d=l.pageY-e.offsetTop,u=(s-r)*2,h=(d-n)*2;e.scrollLeft=o-u,e.scrollTop=v-h},c=()=>{t=!1,e.style.cursor="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",c)};return e.addEventListener("mousedown",a),{destroy:()=>{e.removeEventListener("mousedown",a),e.style.cursor=""}}};var Gn=X('<li class="svelte-1ggrsig"></li>'),Fn=X('<div class="github svelte-1ggrsig"><a href="https://github.com/Tree52/Shareogram" aria-label="Link to GitHub repository" class="svelte-1ggrsig"><svg height="96" width="98" xmlns="http://www.w3.org/2000/svg" class="svelte-1ggrsig"><path clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill-rule="evenodd" class="svelte-1ggrsig"></path></svg></a></div> <ul class="background svelte-1ggrsig"></ul> <!>  <main class="svelte-1ggrsig"><!></main> <!> <!>',1);function Zn(e,t){W(t,!0);let r=Q(!1);const n=f=>{const _=f.match(/(\d+|[a-zX]+)/g),m=[],g=[];if(_)for(let $=0;$<_.length;($+=1)-1){const I=_[$];isNaN(Number(I))?g.push(I):m.push(Number(I))}if(m.length!==g.length)throw new Error("Error: different number of counts and letters.");return{letters:g,numbers:m}},o=f=>{const _=n(f),m=[];let g=0,$=0;for(let I=0;I<xe.v;(I+=1)-1)m[I]=[];for(let I=0;I<_.numbers.length;(I+=1)-1)for(let x=0;x<_.numbers[I];(x+=1)-1)_.letters[I]==="X"?m[g][($+=1)-1]={colorIndex:0,Xed:!0}:m[g][($+=1)-1]={colorIndex:pt(_.letters[I]),Xed:!1},$>be.v-1&&(g+=1,$=0);return m},v=f=>(f.preventDefault(),f.returnValue="",""),a=()=>{const f=window.location.hash;if(f){try{const _=f.slice(1).split("-");G.v=!!Number(_[0]),be.v=Number(_[1]),xe.v=Number(_[2]),Se.v="#"+_[3];const m=G.v?_.slice(4,-2):_.slice(4,-1);for(let g=0;g<m.length;(g+=1)-1)N.v[g]="#"+m[g];y.v=o(_[G.v?_.length-2:_.length-1]),we.v[0]=et(y.v),G.v&&(Ce.v=o(_[_.length-1]))}catch{alert("Couldn't load the code from the URL. Make sure you copied the link correctly.")}Pe.v=!0}B(r,!0)};Ae(()=>{for(;!b(r);)a()}),Ae(()=>{if(Pe.v){const f=[Number(G.v),be.v,xe.v,Se.v.slice(1)];for(let _=0;_<N.v.length;(_+=1)-1)f.push(N.v[_].slice(1));f.push(y.encoded),G.v&&f.push(Ce.encoded),window.location.hash=f.join("-")}}),Ae(()=>{document.body.style.color=N.v[0]});var i=Fn();kr(f=>{ft.title="Shareogram"}),te("contextmenu",ve,f=>f.preventDefault()),te("load",ve,a),te("beforeunload",ve,f=>{v(f)});var c=H(Qe(i),2);me(c,20,()=>({length:35}),pe,(f,_)=>{var m=Gn();const g=V(()=>Ue(0,60)+"s");J(()=>T(m,"animation-delay",b(g)));const $=V(()=>Ue(5,200)+"px");J(()=>T(m,"width",b($)));const I=V(()=>Ue(0,100)+"%");J(()=>T(m,"left",b(I))),C(f,m)}),S(c);var l=H(c,2);Bn(l,{});var s=H(l,2);s.__click=()=>{yt.v=!1};var d=L(s);En(d,{}),S(s),Ft(s,f=>zn(f));var u=H(s,2);Dn(u,{});var h=H(u,2);mn(h,{}),J(()=>{T(c,"background-color",Se.v),T(s,"touch-action",Le.v?"auto":"none")}),C(e,i),U()}se(["click"]);export{Zn as component,Kn as universal};
