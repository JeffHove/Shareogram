import"../chunks/Bg9kRutz.js";import{ao as Be,C as Kt,ap as Qt,F as We,aB as Ze,u as $e,E as Je,aC as Ke,aD as Qe,aE as je,aF as to,_ as eo,aa as Rt,W as Ie,X as Me,Y as oo,aG as no,h as xe,q as et,n as H,l as ro,A as be,P as J,Q as mt,V as K,c as T,s as E,r as X,an as $t,aH as st,R as Q,G as Ee,aI as ao,aJ as so,ac as io,aK as Se}from"../chunks/BMllRh0k.js";import{a as lo,w as co,l as ye,d as it,e as tt,s as he}from"../chunks/BZTk13Ft.js";import{c as Fe,a as M,t as S}from"../chunks/D9jZUCQx.js";import{t as dt,r as vo,a as W,c as k,n as ke,d as Zt,f as Jt,h as Ot,j as me,k as N,l as It,m as Ne,e as gt,i as wt,b as _e,o as Oe,p as Nt,q as fo,g as uo,u as Xt,v as Ft,M as pe,w as ge,x as at,y as Ce,s as z,z as Mt,A as R,B as Pe,C as ft,D as nt,E as Dt,F as Le,G as ho}from"../chunks/CaYc5QwK.js";import{p as Ye}from"../chunks/zVeqNCes.js";import"../chunks/69_IOA4Y.js";import{i as Z}from"../chunks/DB27O15u.js";import{i as rt}from"../chunks/DzuhLE2f.js";import{r as xt,s as ut}from"../chunks/B53-cB37.js";function He(t,e,o){Be(()=>{var n=Kt(()=>e(t,o==null?void 0:o())||{});if(o&&(n!=null&&n.update)){var a=!1,v={};Qt(()=>{var d=o();We(d),a&&Ze(v,d)&&(v=d,n.update(d))}),a=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}const mo=()=>performance.now(),ht={tick:t=>requestAnimationFrame(t),now:()=>mo(),tasks:new Set};function Ge(){const t=ht.now();ht.tasks.forEach(e=>{e.c(t)||(ht.tasks.delete(e),e.f())}),ht.tasks.size!==0&&ht.tick(Ge)}function _o(t){let e;return ht.tasks.size===0&&ht.tick(Ge),{promise:new Promise(o=>{ht.tasks.add(e={c:t,f:o})}),abort(){ht.tasks.delete(e)}}}function Gt(t,e){co(()=>{t.dispatchEvent(new CustomEvent(e))})}function po(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function Xe(t){const e={},o=t.split(";");for(const n of o){const[a,v]=n.split(":");if(!a||v===void 0)break;const d=po(a.trim());e[d]=v.trim()}return e}const go=t=>t;function Ve(t,e,o,n){var a=(t&je)!==0,v="both",d,i=e.inert,w=e.style.overflow,l,c;function m(){var x=oo,b=$e;Ie(null),Me(null);try{return d??(d=o()(e,(n==null?void 0:n())??{},{direction:v}))}finally{Ie(x),Me(b)}}var f={is_global:a,in(){e.inert=i,Gt(e,"introstart"),l=we(e,m(),c,1,()=>{Gt(e,"introend"),l==null||l.abort(),l=d=void 0,e.style.overflow=w})},out(x){e.inert=!0,Gt(e,"outrostart"),c=we(e,m(),l,0,()=>{Gt(e,"outroend"),x==null||x()})},stop:()=>{l==null||l.abort(),c==null||c.abort()}},g=$e;if((g.transitions??(g.transitions=[])).push(f),lo){var h=a;if(!h){for(var _=g.parent;_&&_.f&Je;)for(;(_=_.parent)&&!(_.f&Ke););h=!_||(_.f&Qe)!==0}h&&Be(()=>{Kt(()=>f.in())})}}function we(t,e,o,n,a){var v=n===1;if(to(e)){var d,i=!1;return eo(()=>{if(!i){var x=e({direction:v?"in":"out"});d=we(t,x,o,n,a)}}),{abort:()=>{i=!0,d==null||d.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(o==null||o.deactivate(),!(e!=null&&e.duration))return a(),{abort:Rt,deactivate:Rt,reset:Rt,t:()=>n};const{delay:w=0,css:l,tick:c,easing:m=go}=e;var f=[];if(v&&o===void 0&&(c&&c(0,1),l)){var g=Xe(l(0,1));f.push(g,g)}var h=()=>1-n,_=t.animate(f,{duration:w});return _.onfinish=()=>{var x=(o==null?void 0:o.t())??1-n;o==null||o.abort();var b=n-x,P=e.duration*Math.abs(b),L=[];if(P>0){var B=!1;if(l)for(var D=Math.ceil(P/16.666666666666668),q=0;q<=D;q+=1){var _t=x+b*m(q/D),lt=Xe(l(_t,1-_t));L.push(lt),B||(B=lt.overflow==="hidden")}B&&(t.style.overflow="hidden"),h=()=>{var ct=_.currentTime;return x+b*m(ct/P)},c&&_o(()=>{if(_.playState!=="running")return!1;var ct=h();return c(ct,1-ct),!0})}_=t.animate(L,{duration:P,fill:"forwards"}),_.onfinish=()=>{h=()=>n,c==null||c(n,1-n),a()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=Rt)},deactivate:()=>{a=Rt},reset:()=>{n===0&&(c==null||c(1,0))},t:()=>h()}}function Tt(t,e,o=e){var n=no();ye(t,"input",a=>{var v=a?t.defaultValue:t.value;if(v=oe(t)?ne(v):v,o(v),n&&v!==(v=e())){var d=t.selectionStart,i=t.selectionEnd;t.value=v??"",i!==null&&(t.selectionStart=d,t.selectionEnd=Math.min(i,t.value.length))}}),(xe&&t.defaultValue!==t.value||Kt(e)==null&&t.value)&&o(oe(t)?ne(t.value):t.value),Qt(()=>{var a=e();oe(t)&&a===ne(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function Te(t,e,o=e){ye(t,"change",n=>{var a=n?t.defaultChecked:t.checked;o(a)}),(xe&&t.defaultChecked!==t.checked||Kt(e)==null)&&o(t.checked),Qt(()=>{var n=e();t.checked=!!n})}function oe(t){var e=t.type;return e==="number"||e==="range"}function ne(t){return t===""?null:+t}function wo(t,e,o=e){ye(t,"change",()=>{o(t.files)}),xe&&t.files&&o(t.files),Qt(()=>{t.files=e()})}function G(t){var e=ro(0);return function(){return arguments.length===1?(et(e,H(e)+1),arguments[0]):(H(e),t())}}const qe="none";function xo(t){return Array.isArray(t)?t:[t]}function zt(t,e,o){return t.addEventListener(e,o),()=>t.removeEventListener(e,o)}function bo(t,e){const o=t.getBoundingClientRect(),n=Math.abs(e[0].clientX-e[1].clientX),a=Math.abs(e[0].clientY-e[1].clientY),v=Math.min(e[0].clientX,e[1].clientX),d=Math.min(e[0].clientY,e[1].clientY),i=v+n/2,w=d+a/2,l=Math.round(i-o.left),c=Math.round(w-o.top);return{x:l,y:c}}function yo(t,e){return e.filter(o=>t.pointerId!==o.pointerId)}function ko(t,e,o){const n=t.getBoundingClientRect(),a=Math.round(e.clientX-n.left),v=Math.round(e.clientY-n.top);return{event:e,pointersCount:o.length,target:e.target,x:a,y:v}}function Vt(t,e,o,n,a){const v=ko(t,o,n);return t.dispatchEvent(new CustomEvent(`${e}${a}`,{detail:v})),v}function Co(t,e,o,n,a,v=qe,d=[]){e.style.touchAction=xo(v).join(" ");let i=[];function w(c){i.push(c);const m=Vt(e,t,c,i,"down");n==null||n(i,c),d.forEach(L=>{var B;(B=L.onDown)==null||B.call(L,m,i)});const f=c.pointerId;function g(L){if(f===L.pointerId){i=yo(L,i),i.length||h();const B=Vt(e,t,L,i,"up");a==null||a(i,L),d.forEach(D=>{var q;(q=D.onUp)==null||q.call(D,B,i)})}}function h(){_(),x(),b(),P()}const _=zt(e,"pointermove",L=>{i=i.map(D=>L.pointerId===D.pointerId?L:D);const B=Vt(e,t,L,i,"move");o==null||o(i,L),d.forEach(D=>{var q;(q=D.onMove)==null||q.call(D,B,i)})}),x=zt(e,"lostpointercapture",L=>{g(L)}),b=zt(e,"pointerup",L=>{g(L)}),P=zt(e,"pointerleave",L=>{i=[],h();const B=Vt(e,t,L,i,"up");a==null||a(i,L),d.forEach(D=>{var q;(q=D.onUp)==null||q.call(D,B,i)})})}const l=zt(e,"pointerdown",w);return{destroy:()=>{l()}}}function Ae(t){return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)}const re=(t,e)=>{be(()=>{const{onMove:o,onDown:n,onUp:a,gestureName:v,parameters:d}=$o(t,e==null?void 0:e());return Co(v,t,o,n,a,d.touchAction,d.plugins).destroy})};function $o(t,e){const o={touchAction:qe,composed:!1,...e},n="pinch";let a,v=0,d;function i(c){c.length===1&&(a=void 0)}function w(c){c.length===2&&(v=Ae(c),d=bo(t,c))}function l(c,m){if(c.length===2){const f=Ae(c);if(a!==void 0&&f!==a){const g=f/v;t.dispatchEvent(new CustomEvent(n,{detail:{scale:g,center:d,pointerType:m.pointerType}}))}a=f}return!1}return{onMove:l,onDown:w,onUp:i,gestureName:n,parameters:o}}var Lt=G(()=>Jt),Ht=G(()=>Zt),ae=G(()=>W),Bt=G(()=>k),Io=S("<button>Edit</button>"),Mo=t=>{t.key==="Enter"&&ke()},Eo=t=>{t.key==="Enter"&&ke()},So=()=>{ke()},Lo=(t,e)=>e("left"),Ho=(t,e)=>e("right"),Xo=(t,e)=>e("up"),To=(t,e)=>e("down"),Ao=S('<div class="flex"><input class="min-w-0 p-2.5 text-center text-black" type="text" inputmode="numeric"> <input class="min-w-0 p-2.5 text-center text-black" type="text" inputmode="numeric"></div> <button>Resize</button> <div class="flex"><button aria-label="Shift Left" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.41z"></path></svg></button> <button aria-label="Shift Right" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M8.59 16.59L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.41z"></path></svg></button> <button aria-label="Shift Up" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8.59l4.59 4.58L18 12l-6-6l-6 6l1.41 1.41L12 8.59z"></path></svg></button> <button aria-label="Shift Down" class="flex-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 15.41L7.41 10.83L6 12l6 6l6-6l-1.41-1.41L12 15.41z"></path></svg></button></div>',1);function Ro(t,e){J(e,!1);const o=w=>Math.max(0,Number(String(w).replace(/[^0-9]/g,""))),n=w=>{Bt(Bt().v=Bt().v.map((l,c,m)=>{switch(w){case"right":return[l.slice(-1)[0],...l.slice(0,-1)];case"left":return[...l.slice(1),l[0]];case"down":return m[(c-1+m.length)%m.length];case"up":return m[(c+1)%m.length];default:return l}})),Ot()};rt();var a=Fe(),v=mt(a);{var d=w=>{var l=Io();l.__click=()=>{ae(ae().v=!1),Bt(Bt().v=dt.v),vo()},M(w,l)},i=w=>{var l=Ao(),c=mt(l),m=T(c);xt(m),m.__keydown=[Mo],m.__input=()=>{Ht(Ht().v=o(Ht().v))};var f=E(m,2);xt(f),f.__keydown=[Eo],f.__input=()=>{Lt(Lt().v=o(Lt().v))},X(c);var g=E(c,2);g.__click=[So];var h=E(g,2),_=T(h);_.__click=[Lo,n];var x=E(_,2);x.__click=[Ho,n];var b=E(x,2);b.__click=[Xo,n];var P=E(b,2);P.__click=[To,n],X(h),Tt(m,()=>Ht().v,L=>Ht(Ht().v=L)),Tt(f,()=>Lt().v,L=>Lt(Lt().v=L)),M(w,l)};Z(v,w=>{ae().v?w(d):w(i,!1)})}M(t,a),K()}it(["click","keydown","input"]);const Do=(t,e)=>{e(k.colorIndices,N.v,o=>{const n=document.createElement("a");n.download="shareogram.png",n.href=o,n.click()})};var zo=S("<button>Save as PNG</button>");function Bo(t,e){J(e,!1);const o=(a,v,d)=>{const i=a[0].length,w=a.length,l=document.createElement("canvas");l.width=i,l.height=w;const c=l.getContext("2d");if(c){const m=c.createImageData(i,w);for(let g=0;g<w;g++)for(let h=0;h<i;h++){const _=v[a[g][h]],x=me(_);if(x){const[b,P,L]=x,B=(g*i+h)*4;m.data[B]=b,m.data[B+1]=P,m.data[B+2]=L,m.data[B+3]=255}}c.putImageData(m,0,0);const f=l.toDataURL("image/png");d(f)}};rt();var n=zo();n.__click=[Do,o],M(t,n),K()}it(["click"]);var Fo=S('<input class="mx-2" type="range" max="442" min="10">'),No=S('<input class="hidden" accept="image/png" id="file-upload" type="file"> <label class="w-full cursor-pointer bg-[ButtonFace] p-2.5 text-center font-sans text-black active:brightness-50 hover:brightness-75" for="file-upload">Load PNG</label> <!>',1);function Oo(t,e){J(e,!0);let o=$t(10),n=$t(void 0);const a=(f,g,h)=>{const[_,x,b]=f,[P,L,B]=g;return Math.sqrt((_-P)**2+(x-L)**2+(b-B)**2)<=h},v=(f,g,h)=>"#"+[f,g,h].map(_=>Math.round(_).toString(16).padStart(2,"0")).join(""),d=(f,g,h)=>{const _=me(f);for(let x=0;x<g.length;x++){const b=me(g[x]);if(a(_,b,h))return x}return g.push(f),g.length-1},i=(f,g,h)=>{const _=new FileReader;_.onload=x=>{var P;const b=new Image;b.onload=()=>{const L=document.createElement("canvas"),B=L.getContext("2d");if(B){L.width=b.width,L.height=b.height,B.drawImage(b,0,0);const D=B.getImageData(0,0,b.width,b.height).data,q=[],_t=[];for(let lt=0;lt<b.height;lt++){const ct=[];for(let At=0;At<b.width;At++){const bt=(lt*b.width+At)*4,Et=D[bt],Pt=D[bt+1],jt=D[bt+2],Yt=D[bt+3]<1?"#ffffff":v(Et,Pt,jt),ee=d(Yt,q,g);ct.push(ee)}_t.push(ct)}h(_t,q)}},b.src=(P=x.target)==null?void 0:P.result},_.readAsDataURL(f)};be(()=>{H(n)!==void 0&&H(n).length>=1&&i(H(n)[0],H(o),(f,g)=>{Zt.v=f[0].length,Jt.v=f.length,N.v=g,It.v=0,k.v=Ne();for(let h=0;h<k.numRows;h++)for(let _=0;_<k.numColumns;_++)k.v[h][_].colorIndex=f[h][_];Ot()})});var w=No(),l=mt(w),c=E(l,4);{var m=f=>{var g=Fo();xt(g),Tt(g,()=>H(o),h=>et(o,h)),M(f,g)};Z(c,f=>{H(n)!==void 0&&H(n).length>=1&&f(m)})}wo(l,()=>H(n),f=>et(n,f)),M(t,w),K()}var se=G(()=>It),ie=G(()=>_e),pt=G(()=>N),Po=S('<button class="flex-1">-</button>'),Yo=S('<!> <button class="flex-1">+</button>',1),Go=S('<input type="color" class="h-8 min-w-12 flex-1 border-0">'),Vo=S('<div><div class="flex flex-wrap"><!></div> <div class="flex flex-wrap"><input type="color" class="h-8 min-w-12 flex-1 border-0"> <!></div></div>');function qo(t,e){J(e,!1);const o=()=>{const m="0123456789abcdef";let f="#";for(let g=0;g<6;g++){const h=Math.floor(Math.random()*m.length);f+=m[h]}return f},n=()=>pt().v.length>2;rt();var a=Vo(),v=T(a),d=T(v);{var i=m=>{var f=Yo(),g=mt(f);{var h=x=>{var b=Po();b.__click=()=>{pt().v.pop(),se().v>pt().v.length-1&&se(se().v--),Oe()},M(x,b)};Z(g,x=>{n()&&x(h)})}var _=E(g,2);_.__click=()=>{pt().v.push(o())},M(m,f)};Z(d,m=>{W.v||m(i)})}X(v);var w=E(v,2),l=T(w);xt(l);var c=E(l,2);gt(c,1,()=>pt().v,wt,(m,f,g)=>{var h=Go();xt(h),Tt(h,()=>pt().v[g],_=>pt(pt().v[g]=_)),M(m,h)}),X(w),X(a),Tt(l,()=>ie().v,m=>ie(ie().v=m)),M(t,a),K()}it(["click"]);var Re=G(()=>k),Uo=S("<button>Reveal Tile</button>");function Wo(t,e){J(e,!1);const o=()=>{if(!Nt()){const a=fo(),v=uo(0,a.length-1),d=a[v].row,i=a[v].column;Re(Re().v[d][i]={colorIndex:dt.v[d][i].colorIndex,Xed:!1}),Ot()}};rt();var n=Uo();n.__click=o,M(t,n),K()}it(["click"]);var le=G(()=>Ft),ce=G(()=>Xt),Zo=S('<div class="flex justify-between border-t-2 border-t-black p-5"><input type="checkbox" class="svelte-rve7gr"> <input type="checkbox" class="svelte-rve7gr"></div>');function Jo(t,e){J(e,!1),rt();var o=Zo(),n=T(o);xt(n);var a=E(n,2);xt(a),X(o),Te(n,()=>ce().v,v=>ce(ce().v=v)),Te(a,()=>le().v,v=>le(le().v=v)),M(t,o),K()}var ve=G(()=>at),Ko=S('<input step=".025" type="range" class="svelte-4s2jov">');function Qo(t,e){J(e,!1),rt();var o=Ko();xt(o),ut(o,"max",pe),ut(o,"min",ge),Tt(o,()=>ve().v,n=>ve(ve().v=n)),M(t,o),K()}const jo=t=>t;function tn(t){const e=t-1;return e*e*e+1}function De(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function en(t,{delay:e=0,duration:o=400,easing:n=jo}={}){const a=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:n,css:v=>`opacity: ${v*a}`}}function on(t,{delay:e=0,duration:o=400,easing:n=tn,x:a=0,y:v=0,opacity:d=0}={}){const i=getComputedStyle(t),w=+i.opacity,l=i.transform==="none"?"":i.transform,c=w*(1-d),[m,f]=De(a),[g,h]=De(v);return{delay:e,duration:o,easing:n,css:(_,x)=>`
			transform: ${l} translate(${(1-_)*m}${f}, ${(1-_)*g}${h});
			opacity: ${w-c*x}`}}var qt=G(()=>Ce),nn=S("<!> <!>",1),rn=S("<!> <!>",1),an=S('<div class="fixed inset-y-0 right-0 z-50 flex w-40 max-w-[75%] flex-col overflow-hidden rounded-l-3xl bg-white"><!> <!> <!> <!> <!></div>');function sn(t,e){J(e,!1);const o=d=>{d.key==="o"&&qt(qt().v=!qt().v)};rt();var n=Fe();tt("keydown",st,o);var a=mt(n);{var v=d=>{var i=an(),w=T(i);{var l=_=>{var x=nn(),b=mt(x);Bo(b,{});var P=E(b,2);Oo(P,{}),M(_,x)};Z(w,_=>{W.v||_(l)})}var c=E(w,2);Ro(c,{});var m=E(c,2);qo(m,{});var f=E(m,2);Qo(f,{});var g=E(f,2);{var h=_=>{var x=rn(),b=mt(x);Jo(b,{});var P=E(b,2);Wo(P,{}),M(_,x)};Z(g,_=>{W.v&&_(h)})}X(i),Ve(3,i,()=>on,()=>({x:80})),M(d,i)};Z(a,d=>{qt().v&&d(v)})}M(t,n),K()}var ln=S('<div class="font-bold"> </div>'),cn=S("<th></th>"),vn=S('<thead class="top-0 z-20 align-bottom"><tr><th class="sticky left-0 z-30"></th><!></tr></thead>'),fn=S('<div class="flex items-center justify-center font-bold"> </div>'),dn=S('<td class="left-0 z-10"><div class="flex justify-end"></div></td>'),un=S("<span>X</span>"),hn=S('<td class="box-content h-6 min-w-6 text-center transition-colors duration-500" tabindex="0"><!></td>'),mn=S('<td class="px-1 text-center"></td>'),_n=S("<tr><!><!><!></tr>"),pn=S('<td class="text-center"></td>'),gn=S("<tr><td></td><!></tr>"),wn=S('<table class="m-32 border-collapse"><!><tbody><!><!></tbody></table>');function xn(t,e){J(e,!0);let o=$t(!1),n=$t(!1),a=$t(""),v=$t(0);const d=(r,s,u,C)=>{const $=Math.abs(r-u),p=Math.abs(s-C);return $===0&&p===1?C>s?"right":"left":$===1&&p===0?u>r?"below":"above":"not adjacent"},i=r=>r.Xed,w=r=>r.colorIndex===It.v,l=(r,s)=>{r.colorIndex=s},c=r=>{r.colorIndex=0},m=r=>{r.Xed=!r.Xed},f=(r,s,u)=>{Mt.v||(r.target instanceof HTMLElement&&r.target.releasePointerCapture(r.pointerId),r.button===0?et(o,!0):r.button===2&&et(n,!0),g(s,u))},g=(r,s)=>{R.v={colorIndex:k.v[r][s].colorIndex,Xed:k.v[r][s].Xed,column:s,row:r},et(v,0),W.v?H(o)?ft.v&&!nt(k.v[r][s])?m(k.v[r][s]):!ft.v&&!i(k.v[r][s])&&(w(k.v[r][s])?c(k.v[r][s]):l(k.v[r][s],It.v)):H(n)&&(nt(k.v[r][s])?c(k.v[r][s]):m(k.v[r][s])):H(o)?l(k.v[r][s],It.v):H(n)&&c(k.v[r][s])},h=r=>{r.button===0?et(o,!1):r.button===2&&et(n,!1)},_=(r,s)=>{if(!H(o)&&!H(n)||H(o)&&H(n)||R.v.row===-1||Mt.v)return;ao(v),H(v)===1&&et(a,Ye(d(R.v.row,R.v.column,r,s)));const u=k.v[R.v.row][R.v.column];if(W.v)if(Pe.v){const C=Math.min(R.v.row,r),$=Math.max(R.v.row,r),p=Math.min(R.v.column,s),y=Math.max(R.v.column,s);for(let F=C;F<=$;F++)for(let V=p;V<=y;V++){const I=k.v[F][V];H(o)?ft.v&&!nt(I)?I.Xed=u.Xed:!ft.v&&!i(I)&&l(I,u.colorIndex):R.v.Xed&&!nt(I)?I.Xed=!1:R.v.colorIndex===0&&!nt(I)?I.Xed=!0:R.v.colorIndex!==0&&!i(I)&&c(I)}}else if(H(a)==="above"||H(a)==="below"){const C=Math.min(R.v.row,r),$=Math.max(R.v.row,r);for(let p=C;p<$+1;p++){const y=k.v[p][R.v.column];H(o)?ft.v&&!nt(y)?y.Xed=u.Xed:!ft.v&&!i(y)&&l(y,u.colorIndex):R.v.Xed&&!nt(y)?y.Xed=!1:R.v.colorIndex===0&&!nt(y)?y.Xed=!0:R.v.colorIndex!==0&&!i(y)&&c(y)}}else{const C=Math.min(R.v.column,s),$=Math.max(R.v.column,s);for(let p=C;p<$+1;p++){const y=k.v[R.v.row][p];H(o)?ft.v&&!nt(y)?y.Xed=u.Xed:!ft.v&&!i(y)&&l(y,u.colorIndex):R.v.Xed&&!nt(y)?y.Xed=!1:R.v.colorIndex===0&&!nt(y)?y.Xed=!0:R.v.colorIndex!==0&&!i(y)&&c(y)}}else H(o)?l(k.v[r][s],It.v):c(k.v[r][s])};let x=0,b=0;const P=(r,s)=>{x=r,b=s},L=r=>{var C;if(r.key!=="ArrowUp"&&r.key!=="ArrowDown"&&r.key!=="ArrowLeft"&&r.key!=="ArrowRight"&&r.key!==" ")return;r.preventDefault();let s=x,u=b;r.key==="ArrowUp"&&x>0?s--:r.key==="ArrowDown"&&x<k.numRows-1?s++:r.key==="ArrowLeft"&&b>0?u--:r.key==="ArrowRight"&&b<k.numColumns-1?u++:r.key===" "&&et(o,!0),(C=document.querySelector(`[data-row="${s}"][data-col="${u}"]`))==null||C.focus(),H(o)&&!Mt.v&&g(s,u)},B=r=>{r.key===" "&&(et(o,!1),Ot())},D=(r,s)=>{let u=0;for(let $=0;$<=r;$++)$!==0&&s[$-1].colorIndex===s[$].colorIndex&&u++,$<r&&(u+=s[$].count);let C=0;for(let $=s.length-1;$>=r;$--)$!==s.length-1&&s[$].colorIndex===s[$+1].colorIndex&&C++,$>r&&(C+=s[$].count);return{offsetHead:u,offsetTail:C}},q=(r,s,u)=>{const{offsetHead:C,offsetTail:$}=D(r,s);let p=0,y=0;for(;p<C&&y<=u.length-1;)u[y].colorIndex!==-1?p+=u[y].count:y>0&&p++,y++;p=0;let F=u.length-1;for(;p<$&&F>=0;)u[F].colorIndex!==-1?p+=u[F].count:F<u.length-1&&p++,F--;return{encodesStartIndex:y,encodesEndIndex:F}},_t=(r,s)=>{const u=new Array(r.length).fill(void 0),C=new Array(r.length).fill(void 0),$=new Array(r.length).fill(void 0);for(let p=0;p<r.length;p++){const{encodesStartIndex:y,encodesEndIndex:F}=q(p,r,s),V=r[p];for(let I=y;I<=F;I++)if(V.colorIndex===s[I].colorIndex&&V.count>=s[I].count){if(u.slice(0,p).includes(I))continue;u[p]=I;for(let A=0;A<p;A++)u[A]>I&&(u[A]=void 0);break}}for(let p=r.length-1;p>=0;p--){const{encodesStartIndex:y,encodesEndIndex:F}=q(p,r,s),V=r[p];for(let I=F;I>=y;I--)if(V.colorIndex===s[I].colorIndex&&V.count>=s[I].count){if(C.slice(p+1).includes(I))continue;C[p]=I;for(let A=r.length-1;A>p;A--)C[A]<I&&(C[A]=void 0);break}}for(let p=0;p<r.length;p++)u[p]===C[p]&&($[p]=u[p]);return $},lt=(r,s)=>{const u=_t(r,s);let C=[],$=u[0]!==void 0?u[0]:0;for(let p=1;p<u.length;p++)u[p]!==void 0&&!($===0&&u[p]===s.length-1)&&(u[p-1]===void 0&&C.push([$,u[p]]),$=u[p]);u[u.length-1]===void 0&&$!==s.length-1&&$!==0&&C.push([$,s.length-1]);for(let p=0;p<C.length;p++){const[y,F]=C[p],V=y===0?0:u.indexOf(y),I=F===s.length-1?r.length-1:u.indexOf(F),A=r.slice(V,I+1),U=s.slice(y,F+1);let j=0;for(let O=0;O<U.length;O++)s[O].colorIndex!==-1?j+=s[O].count:O>0&&O<U.length-1&&j++;const{offsetTail:Y}=D(0,A);if(Y+A[0].count>j)continue;const ot=_t(A,U);for(let O=0;O<ot.length;O++)ot[O]!==void 0&&(ot[O]=ot[O]+y);u.splice(V,I-V+1,...ot)}return u},ct=Ee(()=>{let r=[[]];for(let s=0;s<dt.rowHints.length;s++){const u=dt.rowHints[s],C=k.rowEncodes[s];r[s]=lt(u,C)}return r}),At=Ee(()=>{let r=[[]];for(let s=0;s<dt.columnHints.length;s++){const u=dt.columnHints[s],C=k.columnEncodes[s];r[s]=lt(u,C)}return r}),bt=(r,s,u,C)=>{const $=C?H(ct):H(At),p=C?k.rowEncodes[r]:k.columnEncodes[r];return $[r][s]!==void 0&&JSON.stringify(u)===JSON.stringify(p[$[r][s]])};var Et=wn();tt("pointerup",st,h),tt("keyup",st,B);var Pt=T(Et);{var jt=r=>{var s=vn(),u=T(s),C=T(u),$=E(C);gt($,17,()=>({length:k.numColumns}),wt,(p,y,F)=>{var V=cn();gt(V,21,()=>dt.columnHints[F],wt,(I,A,U)=>{var j=ln(),Y=T(j,!0);X(j),Q(ot=>{z(j,"opacity",ot),z(j,"font-size",Ft.v?".5rem":""),z(j,"color",N.v[H(A).colorIndex]),he(Y,H(A).count)},[()=>bt(F,U,H(A),!1)?.2:1]),M(I,j)}),X(V),M(p,V)}),X(u),X(s),Q(()=>{z(s,"background-color",Ft.v?N.v[0]:""),z(s,"position",Ft.v?"sticky":""),z(C,"visibility",Xt.v&&Ft.v?"":"hidden"),z(C,"background-color",N.v[0])}),M(r,s)};Z(Pt,r=>{W.v&&r(jt)})}var te=E(Pt),Yt=T(te);gt(Yt,17,()=>({length:k.numRows}),wt,(r,s,u)=>{var C=_n(),$=T(C);{var p=I=>{var A=dn(),U=T(A);gt(U,21,()=>dt.rowHints[u],wt,(j,Y,ot)=>{var O=fn(),vt=T(O,!0);X(O),Q(St=>{z(O,"opacity",St),z(O,"width",Xt.v?".75rem":"1.5rem"),z(O,"font-size",Xt.v?".5rem":""),z(O,"color",N.v[H(Y).colorIndex]),he(vt,H(Y).count)},[()=>bt(u,ot,H(Y),!0)?.2:1]),M(j,O)}),X(U),X(A),Q(()=>{z(A,"background-color",Xt.v?N.v[0]:""),z(A,"position",Xt.v?"sticky":"")}),M(I,A)};Z($,I=>{W.v&&I(p)})}var y=E($);gt(y,17,()=>({length:k.numColumns}),wt,(I,A,U,j)=>{var Y=hn();Y.__pointerdown=vt=>{f(vt,u,U)},ut(Y,"data-row",u),ut(Y,"data-col",U),Y.__keydown=L;var ot=T(Y);{var O=vt=>{var St=un();Ve(3,St,()=>en,()=>({duration:300})),M(vt,St)};Z(ot,vt=>{i(k.v[u][U])&&!Nt()&&vt(O)})}X(Y),Q((vt,St)=>{z(Y,"border-left",vt),z(Y,"border-top",St),z(Y,"background-color",N.v[k.v[u][U].colorIndex]),z(Y,"color",N.v[1])},[()=>Nt()||!W.v?"0":`solid ${U%5===0&&U!==0?`4px ${N.v[1]}`:`2px ${_e.v}`}`,()=>Nt()||!W.v?"0":`solid ${u%5===0&&u!==0?`4px ${N.v[1]}`:`2px ${_e.v}`}`]),tt("pointerenter",Y,()=>{_(u,U)}),tt("focus",Y,()=>{P(u,U)}),M(I,Y)});var F=E(y);{var V=I=>{var A=mn();A.textContent=u%5===4?u+1:"",M(I,A)};Z(F,I=>{k.numRows>10&&W.v&&I(V)})}X(C),M(r,C)});var ee=E(Yt);{var Ue=r=>{var s=gn(),u=E(T(s));gt(u,17,()=>({length:k.numColumns}),wt,(C,$,p)=>{var y=pn();y.textContent=p%5===4?p+1:"",M(C,y)}),X(s),M(r,s)};Z(ee,r=>{k.numColumns>10&&W.v&&r(Ue)})}X(te),X(Et),Q(()=>z(Et,"zoom",at.v)),M(t,Et),K()}it(["pointerdown","keydown"]);var bn=S('<div class="flex"><button class="flex-1">Undo</button> <button class="flex-1">Redo</button></div>');function yn(t,e){J(e,!0);const o=()=>{R.v.row!==-1&&Ot(),R.reset()},n=m=>{m.key==="z"?d():m.key==="y"&&i()},a=()=>{k.numRows!==Jt.v&&(Jt.v=k.numRows),k.numColumns!==Zt.v&&(Zt.v=k.numColumns)},v=()=>{k.v=ho(Le.v[Dt.v]),Oe(),a()},d=()=>{Dt.v!==0&&(Dt.v--,v())},i=()=>{Dt.v!==Le.v.length-1&&(Dt.v++,v())};var w=bn();tt("keydown",st,n),tt("pointerup",st,o);var l=T(w);l.__click=d;var c=E(l,2);c.__click=i,X(w),M(t,w),K()}it(["click"]);var yt=G(()=>Mt),kt=G(()=>It),Ut=G(()=>Pe),Ct=G(()=>ft),kn=S('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0"></button>'),Cn=S('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">X</button>'),$n=S('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">2d</button>'),In=S('<div class="flex flex-wrap"><!> <!> <button class="flex aspect-square h-8 flex-1 items-center justify-center p-0" aria-label="Move"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21v-9m0 9l3-3m-3 3l-3-3m3-6V3m0 9H3m9 0h9m-9-9L9 6m3-3l3 3M3 12l3 3m-3-3l3-3m15 3l-3-3m3 3l-3 3"></path></svg></button> <!></div>');function Mn(t,e){J(e,!1);const o=h=>{/[1-9]/.test(h.key)&&Number(h.key)<=N.v.length?n(Number(h.key)-1):h.key==="m"?v():h.key==="x"&&W.v?a():h.key==="d"&&W.v&&d()},n=h=>{Ct(Ct().v=!1),yt(yt().v=!1),kt(kt().v=h)},a=()=>{Ct(Ct().v=!0),yt(yt().v=!1),kt(kt().v=-1)},v=()=>{Ct(Ct().v=!1),yt(yt().v=!0),kt(kt().v=-1)},d=()=>{Ut(Ut().v=!Ut().v)};rt();var i=In();tt("keydown",st,o);var w=T(i);gt(w,1,()=>N.v,wt,(h,_,x)=>{var b=kn();b.__click=()=>{n(x)},b.textContent=x+1,Q(()=>{z(b,"filter",x===kt().v?"brightness(50%)":""),z(b,"color",x===0?N.v[1]:N.v[0]),z(b,"background-color",N.v[x])}),M(h,b)});var l=E(w,2);{var c=h=>{var _=Cn();_.__click=a,Q(()=>z(_,"filter",Ct().v?"brightness(50%)":"")),M(h,_)};Z(l,h=>{W.v&&h(c)})}var m=E(l,2);m.__click=v;var f=E(m,2);{var g=h=>{var _=$n();_.__click=d,Q(()=>z(_,"filter",Ut().v?"brightness(50%)":"")),M(h,_)};Z(f,h=>{W.v&&h(g)})}X(i),Q(()=>z(m,"filter",yt().v?"brightness(50%)":"")),M(t,i),K()}it(["click"]);var Wt=G(()=>Ce),En=S('<footer class="flex justify-center"><div class="flex overflow-hidden rounded-t-lg"><button>Options</button> <div><!> <!></div></div></footer>');function Sn(t,e){J(e,!1),rt();var o=En(),n=T(o),a=T(n);a.__click=()=>{Wt(Wt().v=!Wt().v)};var v=E(a,2),d=T(v);Mn(d,{});var i=E(d,2);yn(i,{}),X(v),X(n),X(o),Q(()=>z(a,"filter",Wt().v?"brightness(50%)":"")),M(t,o),K()}it(["click"]);var Ln=S('<a href="https://github.com/JeffHove/Shareogram" aria-label="GitHub"><svg width="49" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill-rule="evenodd"></path></svg></a> <a class="mt-0.5" href="https://ko-fi.com/jeffhove" aria-label="Kofi"><svg xmlns="http://www.w3.org/2000/svg" width="60" viewBox="0 0 241 194" fill="none"><mask id="mask0_1_219" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="-1" y="0" width="242" height="194"><path d="M240.469 0.958984H-0.00585938V193.918H240.469V0.958984Z" fill="white"></path></mask><g mask="url(#mask0_1_219)"><path d="M96.1344 193.911C61.1312 193.911 32.6597 178.256 15.9721 149.829C1.19788 124.912 -0.00585938 97.9229 -0.00585938 67.7662C-0.00585938 49.8876 5.37293 34.3215 15.5413 22.7466C24.8861 12.1157 38.1271 5.22907 52.8317 3.35378C70.2858 1.14271 91.9848 0.958984 114.545 0.958984C151.259 0.958984 161.63 1.4088 176.075 2.85328C195.29 4.76026 211.458 11.932 222.824 23.5955C234.368 35.4428 240.469 51.2624 240.469 69.3627V72.9994C240.469 103.885 219.821 129.733 191.046 136.759C188.898 141.827 186.237 146.871 183.089 151.837L183.006 151.964C172.869 167.632 149.042 193.918 103.401 193.918H96.1281L96.1344 193.911Z"></path><path d="M174.568 17.9772C160.927 16.6151 151.38 16.1589 114.552 16.1589C90.908 16.1589 70.9008 16.387 54.7644 18.4334C33.3949 21.164 15.2058 37.5285 15.2058 67.7674C15.2058 98.0066 16.796 121.422 29.0741 142.107C42.9425 165.751 66.1302 178.707 96.1412 178.707H103.414C140.242 178.707 160.25 159.156 170.253 143.698C174.574 136.874 177.754 130.058 179.801 123.234C205.947 120.96 225.27 99.3624 225.27 72.9941V69.3577C225.27 40.9432 206.631 21.164 174.574 17.9772H174.568Z"></path><path d="M15.1975 67.7674C15.1975 37.5285 33.3866 21.164 54.7559 18.4334C70.8987 16.387 90.906 16.1589 114.544 16.1589C151.372 16.1589 160.919 16.6151 174.559 17.9772C206.617 21.1576 225.255 40.937 225.255 69.3577V72.9941C225.255 99.3687 205.932 120.966 179.786 123.234C177.74 130.058 174.559 136.874 170.238 143.698C160.235 159.156 140.228 178.707 103.4 178.707H96.1264C66.1155 178.707 42.9277 165.751 29.0595 142.107C16.7814 121.422 15.1912 98.4563 15.1912 67.7674" fill="#202020"></path><path d="M32.2469 67.9899C32.2469 97.3168 34.0654 116.184 43.6127 133.689C54.5225 153.924 74.3018 161.653 96.8117 161.653H103.857C133.411 161.653 147.736 147.329 155.693 134.829C159.558 128.462 162.966 121.417 164.784 112.547L166.147 106.864H174.332C192.521 106.864 208.208 92.09 208.208 73.2166V69.8082C208.208 48.6669 195.024 37.5228 172.058 34.7987C159.102 33.6646 151.372 33.2084 114.538 33.2084C89.7602 33.2084 72.0272 33.4364 58.6152 35.4828C39.7483 38.2134 32.2407 48.8951 32.2407 67.9899"></path><path d="M166.158 83.6801C166.158 86.4107 168.204 88.4572 171.841 88.4572C183.435 88.4572 189.802 81.8619 189.802 70.9523C189.802 60.0427 183.435 53.2195 171.841 53.2195C168.204 53.2195 166.158 55.2657 166.158 57.9963V83.6866V83.6801Z" fill="#202020"></path><path d="M54.5321 82.3198C54.5321 95.732 62.0332 107.326 71.5807 116.424C77.9478 122.562 87.9515 128.93 94.7685 133.022C96.8147 134.157 98.8611 134.841 101.136 134.841C103.866 134.841 106.134 134.157 107.959 133.022C114.782 128.93 124.779 122.562 130.919 116.424C140.694 107.332 148.195 95.7383 148.195 82.3198C148.195 67.7673 137.286 54.8115 121.599 54.8115C112.28 54.8115 105.912 59.5882 101.136 66.1772C96.8147 59.582 90.2259 54.8115 80.9001 54.8115C64.9855 54.8115 54.5256 67.7673 54.5256 82.3198"></path></g></svg></a>',1);function Hn(t,e){J(e,!1),rt();var o=Ln(),n=mt(o),a=T(n),v=T(a);X(a),X(n);var d=E(n,2),i=T(d),w=E(T(i)),l=T(w),c=E(l),m=E(c,2),f=E(m,2);X(w),X(i),X(d),Q(()=>{ut(v,"fill",N.v[0]),ut(l,"fill",N.v[0]),ut(c,"fill",N.v[0]),ut(m,"fill",N.v[0]),ut(f,"fill",N.v[1])}),M(t,o),K()}var ze=G(()=>dt),fe=G(()=>W),de=G(()=>k),Xn=S('<span class="pt-2.5"> </span>'),Tn=S('<button class="-mt-1 rounded-b-lg">Play</button>'),An=S('<header class="flex items-center justify-center"><div class="flex flex-1 justify-start gap-1 p-1"><!></div> <div class="flex flex-1 justify-center"><!></div> <div class="flex flex-1 justify-end"></div></header>');function Rn(t,e){J(e,!1),rt();var o=An(),n=T(o),a=T(n);Hn(a,{}),X(n);var v=E(n,2),d=T(v);{var i=l=>{var c=Xn(),m=T(c,!0);X(c),Q(f=>he(m,f),[()=>Nt()?"You win!":"Keep trying"],io),M(l,c)},w=l=>{var c=Tn();c.__click=()=>{fe(fe().v=!0),ze(ze().v=de().v),de(de().v=Ne())},M(l,c)};Z(d,l=>{fe().v?l(i):l(w,!1)})}X(v),so(2),X(o),M(t,o),K()}it(["click"]);const ue=t=>{let e=!1,o,n,a,v;const d=l=>{(l.button===1||l.button===0&&Mt.v)&&(l.preventDefault(),e=!0,o=l.pageX-t.offsetLeft,n=l.pageY-t.offsetTop,a=t.scrollLeft,v=t.scrollTop,t.style.cursor="grabbing",document.addEventListener("mousemove",i),document.addEventListener("mouseup",w))},i=l=>{if(!e)return;l.preventDefault();const c=l.pageX-t.offsetLeft,m=l.pageY-t.offsetTop,f=(c-o)*2,g=(m-n)*2;t.scrollLeft=a-f,t.scrollTop=v-g},w=()=>{e=!1,t.style.cursor="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",w)};return t.addEventListener("mousedown",d),{destroy:()=>{t.removeEventListener("mousedown",d),t.style.cursor=""}}};var Dn=S('<!>  <main class="m-3 flex flex-1 overflow-auto svelte-v5w8hs"><!></main> <!> <!>',1);function Un(t,e){J(e,!0);let o=$t(1);const n=f=>{f.preventDefault(),f.deltaY<0&&at.v<pe?at.v+=.05:f.deltaY>0&&at.v>ge&&(at.v-=.05)},a=f=>{if(!Mt.v)return;const g=H(o);et(o,Ye(f.detail.scale));const h=H(o)<g;h&&at.v>ge?at.v-=.025:!h&&at.v<pe&&(at.v+=.025)},v=f=>(f.preventDefault(),f.returnValue="","");be(()=>{document.body.style.color=N.v[0]});var d=Dn();tt("wheel",st,n,void 0,!1),tt("contextmenu",st,f=>f.preventDefault()),tt("load",st,onload),tt("beforeunload",st,f=>{v(f)}),He(Se.body,(f,g)=>re==null?void 0:re(f,g),()=>()=>({})),tt("pinch",Se.body,a);var i=mt(d);Rn(i,{});var w=E(i,2);w.__click=()=>{Ce.v=!1};var l=T(w);xn(l,{}),X(w),He(w,f=>ue==null?void 0:ue(f));var c=E(w,2);Sn(c,{});var m=E(c,2);sn(m,{}),Q(()=>z(w,"touch-action",Mt.v?"auto":"none")),M(t,d),K()}it(["click"]);export{Un as component};
