import{a as I,t as C}from"../chunks/disclose-version.BxG2XW3z.js";import{t as Tt,q as zt,o as Pt,Q as Gt,v as Bt,ak as Et,h as Q,x as Ve,i as Ft,a1 as qt,H as Yt,w as pt,y as Je,C as Me,z as St,A as Nt,B as Ut,al as Wt,O as Be,n as lt,am as dt,s as B,an as ut,ao as Kt,G as Vt,a as gt,ap as Jt,a0 as Qt,aq as Zt,ar as jt,W as er,Z as tr,as as rr,V as or,a5 as Xt,d as At,at as sr,au as nr,E as lr,av as ar,aw as ir,ax as vr,D as De,ay as cr,a6 as Ye,F as dr,aj as j,g as k,ae as ce,I as Y,K as U,L as M,N as A,M as N,b as Re,j as Ue,az as ue,J as ee,aA as ur,aB as fr}from"../chunks/runtime._feqlq_v.js";import{a as _r,d as oe,e as te,s as at,b as hr}from"../chunks/render.D56lw24O.js";import{g as xt,a as mr,p as ge,i as V}from"../chunks/if.DgMJmC-C.js";import{i as se}from"../chunks/lifecycle.DWtY_f7m.js";import{r as F}from"../chunks/misc.CQJW9TTE.js";function We(e,t=!1){return Pe(e,new Map)}function Pe(e,t,r,o){if(typeof e=="object"&&e!==null){const v=t.get(e);if(v!==void 0)return v;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Tt(e)){const s=[];t.set(e,s);for(let i=0;i<e.length;i+=1)s.push(Pe(e[i],t));return s}if(zt(e)===Pt){const s={};t.set(e,s);for(var l in e)s[l]=Pe(e[l],t);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return Pe(e.toJSON(),t)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let Qe=null;function ye(e,t){return t}function pr(e,t,r,o){for(var l=[],v=t.length,s=0;s<v;s++)Jt(t[s].e,l,!0);var i=v>0&&l.length===0&&r!==null;if(i){var a=r.parentNode;Qt(a),a.append(r),o.clear(),me(e,t[0].prev,t[v-1].next)}Zt(l,()=>{for(var n=0;n<v;n++){var u=t[n];i||(o.delete(u.k),me(e,u.prev,u.next)),jt(u.e,!i)}})}function $e(e,t,r,o,l,v=null){var s=e,i={flags:t,items:new Map,first:null},a=(t&Et)!==0;if(a){var n=e;s=Q?Ve(er(n)):n.appendChild(Gt())}Q&&Ft();var u=null;Bt(()=>{var c=r(),d=Tt(c)?c:c==null?[]:qt(c),f=d.length;let _=!1;if(Q){var h=s.data===Yt;h!==(f===0)&&(s=pt(),Ve(s),Je(!1),_=!0)}if(Q){for(var m=null,$,E=0;E<f;E++){if(Me.nodeType===8&&Me.data===tr){s=Me,_=!0,Je(!1);break}var x=d[E],y=o(x,E);$=Mt(Me,i,m,null,x,y,E,l,t),i.items.set(y,$),m=$}f>0&&Ve(pt())}Q||gr(d,i,s,l,t,o),v!==null&&(f===0?u?St(u):u=Nt(()=>v(s)):u!==null&&Ut(u,()=>{u=null})),_&&Je(!0)}),Q&&(s=Me)}function gr(e,t,r,o,l,v){var K,W,G,S;var s=(l&rr)!==0,i=(l&(dt|ut))!==0,a=e.length,n=t.items,u=t.first,c=u,d,f=null,_,h=[],m=[],$,E,x,y;if(s)for(y=0;y<a;y+=1)$=e[y],E=v($,y),x=n.get(E),x!==void 0&&((K=x.a)==null||K.measure(),(_??(_=new Set)).add(x));for(y=0;y<a;y+=1){if($=e[y],E=v($,y),x=n.get(E),x===void 0){var J=c?c.e.nodes_start:r;f=Mt(J,t,f,f===null?t.first:f.next,$,E,y,o,l),n.set(E,f),h=[],m=[],c=f.next;continue}if(i&&xr(x,$,y,l),x.e.f&Wt&&(St(x.e),s&&((W=x.a)==null||W.unfix(),(_??(_=new Set)).delete(x))),x!==c){if(d!==void 0&&d.has(x)){if(h.length<m.length){var p=m[0],g;f=p.prev;var b=h[0],L=h[h.length-1];for(g=0;g<h.length;g+=1)bt(h[g],p,r);for(g=0;g<m.length;g+=1)d.delete(m[g]);me(t,b.prev,L.next),me(t,f,b),me(t,L,p),c=p,f=L,y-=1,h=[],m=[]}else d.delete(x),bt(x,c,r),me(t,x.prev,x.next),me(t,x,f===null?t.first:f.next),me(t,f,x),f=x;continue}for(h=[],m=[];c!==null&&c.k!==E;)(d??(d=new Set)).add(c),m.push(c),c=c.next;if(c===null)continue;x=c}h.push(x),f=x,c=x.next}if(c!==null||d!==void 0){for(var R=d===void 0?[]:qt(d);c!==null;)R.push(c),c=c.next;var H=R.length;if(H>0){var q=l&Et&&a===0?r:null;if(s){for(y=0;y<H;y+=1)(G=R[y].a)==null||G.measure();for(y=0;y<H;y+=1)(S=R[y].a)==null||S.fix()}pr(t,R,q,n)}}s&&Be(()=>{var O;if(_!==void 0)for(x of _)(O=x.a)==null||O.apply()}),lt.first=t.first&&t.first.e,lt.last=f&&f.e}function xr(e,t,r,o){o&dt&&B(e.v,t),o&ut?B(e.i,r):e.i=r}function Mt(e,t,r,o,l,v,s,i,a){var n=Qe;try{var u=(a&dt)!==0,c=(a&Kt)===0,d=u?c?Vt(l):gt(l):l,f=a&ut?gt(s):s,_={i:f,v:d,k:v,a:null,e:null,prev:r,next:o};return Qe=_,_.e=Nt(()=>i(e,d,f),Q),_.e.prev=r&&r.e,_.e.next=o&&o.e,r===null?t.first=_:(r.next=_,r.e.next=_.e),o!==null&&(o.prev=_,o.e.prev=_.e),_}finally{Qe=n}}function bt(e,t,r){for(var o=e.next?e.next.e.nodes_start:r,l=t?t.e.nodes_start:r,v=e.e.nodes_start;v!==o;){var s=or(v);l.before(v),v=s}}function me(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function br(e,t,r){Xt(()=>{var o=At(()=>t(e,r==null?void 0:r())||{});if(o!=null&&o.destroy)return()=>o.destroy()})}let wt=!1;function Rt(){wt||(wt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function re(e){if(Q){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;Fe(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var l=e.checked;Fe(e,"checked",null),e.checked=l}}};e.__on_r=r,nr(r),Rt()}}function Fe(e,t,r,o){r=r==null?null:r+"";var l=e.__attributes??(e.__attributes={});Q&&(l[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||l[t]!==(l[t]=r)&&(t==="loading"&&(e[sr]=r),r===null?e.removeAttribute(t):e.setAttribute(t,r))}function T(e,t,r,o,l){var v=e.__attributes??(e.__attributes={}),s=e.style,i="style-"+t;v[i]===r&&!l||(v[i]=r,r==null?s.removeProperty(t):s.setProperty(t,r,""))}const wr=requestAnimationFrame,kr=()=>performance.now(),xe={tick:e=>wr(e),now:()=>kr(),tasks:new Set};function Lt(e){xe.tasks.forEach(t=>{t.c(e)||(xe.tasks.delete(t),t.f())}),xe.tasks.size!==0&&xe.tick(Lt)}function yr(e){let t;return xe.tasks.size===0&&xe.tick(Lt),{promise:new Promise(r=>{xe.tasks.add(t={c:e,f:r})}),abort(){xe.tasks.delete(t)}}}function He(e,t){e.dispatchEvent(new CustomEvent(t))}function $r(e){const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function kt(e){const t={},r=e.split(";");for(const o of r){const[l,v]=o.split(":");if(!l||v===void 0)break;const s=$r(l.trim());t[s]=v.trim()}return t}const Ir=e=>e;function Cr(e,t,r,o){var l=(e&cr)!==0,v="both",s,i=t.inert,a,n;function u(){return s??(s=r()(t,(o==null?void 0:o())??{},{direction:v}))}var c={is_global:l,in(){t.inert=i,He(t,"introstart"),a=it(t,u(),n,1,()=>{He(t,"introend"),a==null||a.abort(),a=s=void 0})},out(h){t.inert=!0,He(t,"outrostart"),n=it(t,u(),a,0,()=>{He(t,"outroend"),h==null||h()})},stop:()=>{a==null||a.abort(),n==null||n.abort()}},d=lt;if((d.transitions??(d.transitions=[])).push(c),_r){var f=l;if(!f){for(var _=d.parent;_&&_.f&lr;)for(;(_=_.parent)&&!(_.f&ar););f=!_||(_.f&ir)!==0}f&&Xt(()=>{At(()=>c.in())})}}function it(e,t,r,o,l){var v=o===1;if(vr(t)){var s,i=!1;return Be(()=>{if(!i){var m=t({direction:v?"in":"out"});s=it(e,m,r,o,l)}}),{abort:()=>{i=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return l(),{abort:De,deactivate:De,reset:De,t:()=>o};const{delay:a=0,css:n,tick:u,easing:c=Ir}=t;var d=[];if(v&&r===void 0&&(u&&u(0,1),n)){var f=kt(n(0,1));d.push(f,f)}var _=()=>1-o,h=e.animate(d,{duration:a});return h.onfinish=()=>{var m=(r==null?void 0:r.t())??1-o;r==null||r.abort();var $=o-m,E=t.duration*Math.abs($),x=[];if(E>0){if(n)for(var y=Math.ceil(E/16.666666666666668),J=0;J<=y;J+=1){var p=m+$*c(J/y),g=n(p,1-p);x.push(kt(g))}_=()=>{var b=h.currentTime;return m+$*c(b/E)},u&&yr(()=>{if(h.playState!=="running")return!1;var b=_();return u(b,1-b),!0})}h=e.animate(x,{duration:E,fill:"forwards"}),h.onfinish=()=>{_=()=>o,u==null||u(o,1-o),l()}},{abort:()=>{h&&(h.cancel(),h.effect=null)},deactivate:()=>{l=De},reset:()=>{o===0&&(u==null||u(1,0))},t:()=>_()}}function Ke(e,t,r,o=r){e.addEventListener(t,r);const l=e.__on_r;l?e.__on_r=()=>{l(),o()}:e.__on_r=o,Rt()}function Xe(e,t,r){Ke(e,"input",()=>{r($t(e)?It(e.value):e.value)}),Ye(()=>{var o=t();if(Q&&e.defaultValue!==e.value){r(e.value);return}$t(e)&&o===It(e.value)||e.type==="date"&&!o&&!e.value||(e.value=o??"")})}const Ze=new Set;function je(e,t,r,o,l){var v=r.getAttribute("type")==="checkbox",s=e;let i=!1;if(t!==null)for(var a of t)s=s[a]??(s[a]=[]);s.push(r),Ke(r,"change",()=>{var n=r.__value;v&&(n=yt(s,n,r.checked)),l(n)},()=>l(v?[]:null)),Ye(()=>{var n=o();if(Q&&r.defaultChecked!==r.checked){i=!0;return}v?(n=n||[],r.checked=xt(n).includes(xt(r.__value))):r.checked=mr(r.__value,n)}),dr(()=>{var n=s.indexOf(r);n!==-1&&s.splice(n,1)}),Ze.has(s)||(Ze.add(s),Be(()=>{s.sort((n,u)=>n.compareDocumentPosition(u)===4?-1:1),Ze.delete(s)})),Be(()=>{if(i){var n;if(v)n=yt(s,n,r.checked);else{var u=s.find(c=>c.checked);n=u==null?void 0:u.__value}l(n)}})}function Tr(e,t,r){Ke(e,"change",()=>{var o=e.checked;r(o)}),t()==null&&r(!1),Ye(()=>{var o=t();e.checked=!!o})}function yt(e,t,r){for(var o=new Set,l=0;l<e.length;l+=1)e[l].checked&&o.add(e[l].__value);return r||o.delete(t),Array.from(o)}function $t(e){var t=e.type;return t==="number"||t==="range"}function It(e){return e===""?null:+e}function Er(e,t,r){Ke(e,"change",()=>{r(e.files)}),Ye(()=>{e.files=t()})}const qr=!0,Lo=Object.freeze(Object.defineProperty({__proto__:null,prerender:qr},Symbol.toStringTag,{value:"Module"})),Z=e=>e.colorIndex!==0,ft=()=>{const e=[[]];for(let t=0;t<we.v;(t+=1)-1){e[t]=[];for(let r=0;r<be.v;(r+=1)-1)e[t][r]={colorIndex:0,Xed:!1}}return e},Dt=()=>{for(let e=0;e<w.numRows;(e+=1)-1)for(let t=0;t<w.numColumns;(t+=1)-1)w.v[e][t].colorIndex>X.v.length-1&&(w.v[e][t].colorIndex=0)},_t=()=>{de.v!==ke.v.length-1&&ke.v.splice(de.v+1),de.v+=1,ke.v.push(We(w.v))},Ge=()=>{be.v<1||we.v<1||(w.v=ft(),ke.reset(),ke.v[0]=We(w.v),de.reset(),pe.v=!1)},vt=e=>{let t=0;for(let r=0;r<e.length;(r+=1)-1)t*=26,t+=e.charCodeAt(r)-97+1;return t-1},ct=e=>{const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,t&255]},Oe=e=>{let t="";for(;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t},P=e=>{let t=j(ge(e));return{set v(o){B(t,ge(o))},get v(){return k(t)},reset:()=>B(t,ge(e))}},Ht=()=>{const e=P(Ot),t=ce(()=>e.v.length),r=ce(()=>e.v[0].length),o=ce(()=>e.v.map(i=>i.map(a=>a.colorIndex))),l=ce(()=>{const i=[[]],a=e.v.length,n=e.v[0].length;for(let u=0;u<a;(u+=1)-1){i[u]=[{color:"",count:0}];for(let c=0;c<n;(c+=1)-1)if(Z(e.v[u][c])){const d=c===0?null:e.v[u][c-1].colorIndex,f=e.v[u][c].colorIndex;d!==f?i[u].push({color:Oe(f),count:1}):i[u][i[u].length-1].count+=1}i[u].length>1&&i[u][0].count===0&&i[u].shift()}return i}),v=ce(()=>{const i=[[]];for(let a=0;a<k(r);(a+=1)-1){i[a]=[{color:"",count:0}];for(let n=0;n<k(t);(n+=1)-1)if(Z(e.v[n][a])){const u=n===0?null:e.v[n-1][a].colorIndex,c=e.v[n][a].colorIndex;u!==c?i[a].push({color:Oe(c),count:1}):i[a][i[a].length-1].count+=1}i[a].length>1&&i[a][0].count===0&&i[a].shift()}return i}),s=ce(()=>{let i="",a=1;for(let u=0;u<k(t);(u+=1)-1)for(let c=0;c<k(r);(c+=1)-1)if(!(u===0&&c===0)){const d=c===0?e.v[u-1][k(r)-1]:e.v[u][c-1];d.colorIndex===e.v[u][c].colorIndex&&d.Xed===e.v[u][c].Xed?a+=1:(i+=a+(d.Xed?"X":Oe(d.colorIndex)),a=1)}const n=e.v[k(t)-1][k(r)-1];return i+=a+(n.Xed?"X":Oe(n.colorIndex)),i});return{get colorIndices(){return k(o)},get columnHints(){return k(v)},get numColumns(){return k(r)},get rowHints(){return k(l)},set v(i){e.v=i},get encoded(){return k(s)},get numRows(){return k(t)},get v(){return e.v},reset:e.reset}},Se=P("#476fb8"),X=P(["#f8fafc","#020617"]),Ie=P(1),be=P(5),we=P(5),Ot=ft(),w=Ht(),Ce=Ht(),ke=P([Ot]),de=P(0),z=P(!1),D=P({colorIndex:-1,column:-1,Xed:!1,row:-1}),ve=P(1),Le=P(!1),he=P(50),Ne=P(!1),ht=P(!1),pe=P(!1),qe=P(!0);var Te=F(()=>we),Ee=F(()=>be),et=F(()=>z),Sr=C("<button>New Editor</button>"),Nr=C('<div class="svelte-16du0in"><input type="text" class="svelte-16du0in"> <input type="text" class="svelte-16du0in"></div>'),Xr=C('<div class="svelte-16du0in"><!></div>');function Ar(e,t){Y(t,!1);const r=v=>Math.max(0,Number(String(v).replace(/[^0-9]/g,"")));se();var o=Xr(),l=M(o);V(l,()=>et().v,v=>{var s=Sr();s.__click=()=>{et(et().v=!1),Ge()},I(v,s)},v=>{var s=Nr(),i=M(s);re(i),i.__input=()=>{Ee(Ee().v=r(Ee().v)),Ge()};var a=A(i,2);re(a),a.__input=()=>{Te(Te().v=r(Te().v)),Ge()},N(s),Xe(i,()=>Ee().v,n=>Ee(Ee().v=n)),Xe(a,()=>Te().v,n=>Te(Te().v=n)),I(v,s)}),N(o),I(e,o),U()}oe(["click","input"]);const Mr=(e,t)=>{t(w.colorIndices,X.v,r=>{const o=document.createElement("a");o.download="shareogram.png",o.href=r,o.click()})};var Rr=C("<button>Export as PNG</button>");function Lr(e,t){Y(t,!1);const r=(l,v,s)=>{const i=l[0].length,a=l.length,n=document.createElement("canvas");n.width=i,n.height=a;const u=n.getContext("2d");if(u){const c=u.createImageData(i,a);for(let f=0;f<a;(f+=1)-1)for(let _=0;_<i;(_+=1)-1){const h=v[l[f][_]],m=ct(h);if(m){const[$,E,x]=m,y=(f*i+_)*4;c.data[y]=$,c.data[y+1]=E,c.data[y+2]=x,c.data[y+3]=255}}u.putImageData(c,0,0);const d=n.toDataURL("image/png");s(d)}};se();var o=Rr();o.__click=[Mr,r],I(e,o),U()}oe(["click"]);var Dr=C('<input type="range" max="442" min="10">'),Hr=C('<input accept="image/png" id="file-upload" type="file" class="svelte-nlo4k4"> <!>',1);function Or(e,t){Y(t,!0);let r=j(10),o=j(void 0);const l=(c,d,f)=>{const[_,h,m]=c,[$,E,x]=d;return Math.sqrt((_-$)**2+(h-E)**2+(m-x)**2)<=f},v=(c,d,f)=>"#"+[c,d,f].map(_=>Math.round(_).toString(16).padStart(2,"0")).join(""),s=(c,d,f)=>{const _=ct(c);for(let h=0;h<d.length;(h+=1)-1){const m=ct(d[h]);if(l(_,m,f))return h}return d.push(c),d.length-1},i=(c,d,f)=>{const _=new FileReader;_.onload=h=>{var $;const m=new Image;m.onload=()=>{const E=document.createElement("canvas"),x=E.getContext("2d");if(x){E.width=m.width,E.height=m.height,x.drawImage(m,0,0);const y=x.getImageData(0,0,m.width,m.height).data,J=[],p=[];for(let g=0;g<m.height;(g+=1)-1){const b=[];for(let L=0;L<m.width;(L+=1)-1){const R=(g*m.width+L)*4,H=y[R],q=y[R+1],K=y[R+2],W=v(H,q,K),G=s(W,J,d);b.push(G)}p.push(b)}f(p,J)}},m.src=($=h.target)==null?void 0:$.result},_.readAsDataURL(c)};Re(()=>{k(o)&&i(k(o)[0],k(r),(c,d)=>{be.v=c[0].length,we.v=c.length,X.v=d,Ie.v=0,w.v=ft();for(let f=0;f<w.numRows;(f+=1)-1)for(let _=0;_<w.numColumns;(_+=1)-1)w.v[f][_].colorIndex=c[f][_];_t()})});var a=Hr(),n=Ue(a),u=A(n,2);V(u,()=>k(o),c=>{var d=Dr();re(d),Xe(d,()=>k(r),f=>B(r,f)),I(c,d)}),Er(n,()=>k(o),c=>B(o,c)),I(e,a),U()}var fe=F(()=>Le),tt=F(()=>Ie),rt=F(()=>Se),_e=F(()=>X),zr=C('<button class="svelte-1ubn0yt">-</button>'),Pr=C('<!> <button class="svelte-1ubn0yt">+</button>',1),Gr=C('<input type="color" class="svelte-1ubn0yt">'),Br=C('<div class="svelte-1ubn0yt"><div class="svelte-1ubn0yt"><!></div> <div class="svelte-1ubn0yt"><input type="color" class="svelte-1ubn0yt"> <!></div></div>');function Fr(e,t){Y(t,!1);const r=()=>{const u="0123456789abcdef";let c="#";for(let d=0;d<6;(d+=1)-1){const f=Math.floor(Math.random()*u.length);c+=u[f]}return c},o=()=>_e().v.length>2;se();var l=Br(),v=M(l),s=M(v);V(s,()=>!z.v,u=>{var c=Pr(),d=Ue(c);V(d,o,_=>{var h=zr();h.__click=()=>{_e().v.pop(),tt().v>_e().v.length-1&&tt(tt().v-=1),Dt()},I(_,h)});var f=A(d,2);f.__click=()=>{_e().v.push(r())},I(u,c)}),N(v);var i=A(v,2),a=M(i);re(a),a.__change=()=>{fe(fe().v=!0)},a.__click=()=>{fe(fe().v=!1)};var n=A(a,2);$e(n,1,()=>_e().v,ye,(u,c,d)=>{var f=Gr();re(f),f.__change=()=>{fe(fe().v=!0)},f.__click=()=>{fe(fe().v=!1)},Xe(f,()=>_e().v[d],_=>_e(_e().v[d]=_)),I(u,f)}),N(i),N(l),Xe(a,()=>rt().v,u=>rt(rt().v=u)),I(e,l),U()}oe(["click","change"]);var ot=F(()=>qe),Yr=C('<div class="svelte-1xxyg97"><label class="switch"><input type="checkbox" class="svelte-1xxyg97"></label></div>');function Ur(e,t){Y(t,!1),se();var r=Yr(),o=M(r),l=M(o);re(l),N(o),N(r),Tr(l,()=>ot().v,v=>ot(ot().v=v)),I(e,r),U()}var ne=F(()=>ve),Wr=C('<input name="border" type="radio" class="svelte-qc9c1k">'),Kr=C('<div class="svelte-qc9c1k"><input name="border" type="radio" class="svelte-qc9c1k"> <input name="border" type="radio" class="svelte-qc9c1k"> <!></div>');function Vr(e,t){Y(t,!1);const r=[];se();var o=Kr(),l=M(o);re(l),l.value=(l.__value=0)==null?"":0;var v=A(l,2);re(v),v.value=(v.__value=1)==null?"":1;var s=A(v,2);V(s,()=>be.v>5||we.v>5,i=>{var a=Wr();re(a),a.value=(a.__value=2)==null?"":2,je(r,[],a,()=>ne().v,n=>ne(ne().v=n)),I(i,a)}),N(o),je(r,[],l,()=>ne().v,i=>ne(ne().v=i)),je(r,[],v,()=>ne().v,i=>ne(ne().v=i)),I(e,o),U()}var Jr=C("<button>Reveal Tile</button>");function Qr(e,t){Y(t,!0);const r=(a,n)=>Math.floor(Math.random()*(n-a+1)+a),o=ce(()=>{const a=[];let n=!0;const u=w.numRows,c=w.numColumns;for(let d=0;d<u;(d+=1)-1)for(let f=0;f<c;(f+=1)-1)Ce.v[d][f].colorIndex!==w.v[d][f].colorIndex&&(a.push({column:f,row:d}),n=!1);return{isDifferent:a,allSame:n}}),l=ce(()=>k(o).isDifferent),v=ce(()=>k(o).allSame);Re(()=>{Ne.v=k(v)});const s=()=>{if(!Ne.v){const a=r(0,k(l).length-1),n=k(l)[a].row,u=k(l)[a].column;w.v[n][u]={colorIndex:Ce.v[n][u].colorIndex,Xed:!1},_t()}};var i=Jr();i.__click=s,I(e,i),U()}oe(["click"]);var le=F(()=>he),Zr=C('<input type="range" class="svelte-1wz0dqh">');function jr(e,t){Y(t,!1);const r=100,o=10,l=s=>{s.preventDefault(),s.deltaY<0&&le().v<r?le(le().v+=5):s.deltaY>0&&le().v>o&&le(le().v-=5)};se();var v=Zr();te("wheel",ue,l,void 0,!1),re(v),Fe(v,"max",r),Fe(v,"min",o),Xe(v,()=>le().v,s=>le(le().v=s)),I(e,v),U()}var ze=F(()=>ht),eo=C("<!> <!>",1),to=C('<div class="svelte-xm1pu0"><!> <!> <!> <!> <!> <!> <!></div>');function ro(e,t){Y(t,!1);const r=c=>{c.key==="o"&&ze(ze().v=!ze().v)};se();var o=to();te("keydown",ue,r);var l=M(o);V(l,()=>!z.v,c=>{var d=eo(),f=Ue(d);Or(f,{});var _=A(f,2);Lr(_,{}),I(c,d)});var v=A(l,2);Ar(v,{});var s=A(v,2);Fr(s,{});var i=A(s,2);Vr(i,{});var a=A(i,2);Ur(a,{});var n=A(a,2);jr(n,{});var u=A(n,2);V(u,()=>z.v,c=>{Qr(c,{})}),N(o),ee(()=>T(o,"right",ze().v?"0":"-200px")),I(e,o),U()}const oo=e=>e;function so(e,{delay:t=0,duration:r=400,easing:o=oo}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:o,css:v=>`opacity: ${v*l}`}}var no=C("<div> </div>"),lo=C('<th class="svelte-16s63u3"></th>'),ao=C('<thead><tr><th class="svelte-16s63u3"></th><!></tr></thead>'),io=C("<div> </div>"),vo=C("<td></td>"),co=C("<span>X</span>"),uo=C("<td><!></td>"),fo=C("<tr><!><!></tr>"),_o=C('<table class="svelte-16s63u3"><!><tbody></tbody></table>');function ho(e,t){Y(t,!0);let r=j(!1),o=j(!1),l=j(""),v=j(0);const s=(p,g,b,L)=>{const R=Math.abs(p-b),H=Math.abs(g-L);return R===0&&H===1?L>g?"right":"left":R===1&&H===0?b>p?"below":"above":"not adjacent"},i=p=>p.Xed,a=p=>p.colorIndex===Ie.v,n=(p,g)=>{p.colorIndex=g},u=p=>{p.colorIndex=0},c=p=>{p.Xed=!p.Xed},d=(p,g,b)=>{D.v={colorIndex:w.v[g][b].colorIndex,Xed:w.v[g][b].Xed,column:b,row:g},Le.v=!1,B(v,0),z.v?p.button===0?pe.v&&!Z(w.v[g][b])?c(w.v[g][b]):!pe.v&&!i(w.v[g][b])&&(a(w.v[g][b])?u(w.v[g][b]):n(w.v[g][b],Ie.v)):p.button===2&&(Z(w.v[g][b])?u(w.v[g][b]):c(w.v[g][b])):p.button===0?n(w.v[g][b],Ie.v):p.button===2&&u(w.v[g][b])},f=p=>{p.button===0?B(r,!0):p.button===2&&B(o,!0)},_=p=>{p.button===0?B(r,!1):p.button===2&&B(o,!1),Le.v=!0},h=(p,g)=>{if(!k(r)&&!k(o)||k(r)&&k(o)||D.v.row===-1)return;ur(v),k(v)===1&&B(l,ge(s(D.v.row,D.v.column,p,g)));const b=w.v[D.v.row][D.v.column];if(z.v)if(k(l)==="above"||k(l)==="below"){const L=Math.min(D.v.row,p),R=Math.max(D.v.row,p);for(let H=L;H<R+1;(H+=1)-1){const q=w.v[H][D.v.column];k(r)?pe.v&&!Z(q)?q.Xed=b.Xed:!pe.v&&!i(q)&&n(q,b.colorIndex):D.v.Xed&&!Z(q)?q.Xed=!1:D.v.colorIndex===0&&!Z(q)?q.Xed=!0:D.v.colorIndex!==0&&!i(q)&&u(q)}}else{const L=Math.min(D.v.column,g),R=Math.max(D.v.column,g);for(let H=L;H<R+1;(H+=1)-1){const q=w.v[D.v.row][H];k(r)?pe.v&&!Z(q)?q.Xed=b.Xed:!pe.v&&!i(q)&&n(q,b.colorIndex):D.v.Xed&&!Z(q)?q.Xed=!1:D.v.colorIndex===0&&!Z(q)?q.Xed=!0:D.v.colorIndex!==0&&!i(q)&&u(q)}}else k(r)?n(w.v[p][g],Ie.v):u(w.v[p][g])};let m=j(!1),$=j(ge(ve.v)),E=j(ge(qe.v));Re(()=>{Ne.v&&!k(m)?(B(m,!0),B($,ge(ve.v)),B(E,ge(qe.v)),ve.v=0,qe.v=!1):!Ne.v&&k(m)&&(B(m,!1),ve.v=k($),qe.v=k(E))});var x=_o();te("mousedown",ue,f),te("mouseup",ue,_);var y=M(x);V(y,()=>z.v,p=>{var g=ao(),b=M(g),L=A(M(b));$e(L,17,()=>({length:w.numColumns}),ye,(R,H,q)=>{var K=lo();$e(K,21,()=>Ce.columnHints[q],ye,(W,G)=>{var S=no();ee(()=>T(S,"color",X.v[vt(k(G).color)]));var O=M(S);N(S),ee(()=>{T(S,"font-size",he.v/1.5+"px"),at(O,k(G).count)}),I(W,S)}),N(K),I(R,K)}),N(b),N(g),I(p,g)});var J=A(y);$e(J,21,()=>({length:w.numRows}),ye,(p,g,b)=>{var L=fo(),R=M(L);V(R,()=>z.v,K=>{var W=vo();T(W,"justify-content","right"),T(W,"display","flex"),$e(W,21,()=>Ce.rowHints[b],ye,(G,S)=>{var O=io();ee(()=>T(O,"color",X.v[vt(k(S).color)])),T(O,"justify-content","center"),T(O,"align-items","center"),T(O,"display","flex");var Ae=M(O);N(O),ee(()=>{T(O,"font-size",he.v/1.5+"px"),T(O,"min-width",he.v+"px"),T(O,"height",he.v+"px"),at(Ae,k(S).count)}),I(G,O)}),N(W),I(K,W)});var H=A(R);$e(H,17,()=>({length:w.numColumns}),ye,(K,W,G)=>{var S=uo();S.__mousedown=Ae=>{d(Ae,b,G)},T(S,"transition","background-color .5s"),T(S,"text-align","center");var O=M(S);V(O,()=>i(w.v[b][G])&&!Ne.v,Ae=>{var mt=co();Cr(3,mt,()=>so,()=>({duration:300})),I(Ae,mt)}),N(S),ee(()=>{T(S,"border-left",ve.v===0?"0":`solid ${G%5===0&&G!==0&&ve.v===2?`4px ${X.v[1]}`:`2px ${Se.v}`}`),T(S,"border-top",ve.v===0?"0":`solid ${b%5===0&&b!==0&&ve.v===2?`4px ${X.v[1]}`:`2px ${Se.v}`}`),T(S,"border-radius",qe.v===!0?"20%":"0"),T(S,"background-color",X.v[w.v[b][G].colorIndex]),T(S,"font-size",he.v/1.5+"px"),T(S,"min-width",he.v+"px"),T(S,"height",he.v+"px"),T(S,"color",X.v[1])}),te("mouseenter",S,()=>{h(b,G)}),I(K,S)}),N(L),I(p,L)}),N(J),N(x),I(e,x),U()}oe(["mousedown"]);var mo=C('<div class="svelte-r2sle7"><button class="svelte-r2sle7">Undo</button> <button class="svelte-r2sle7">Redo</button></div>');function po(e,t){Y(t,!0);const r=()=>{D.v.row!==-1&&_t(),D.reset()},o=u=>{u.key==="z"?v():u.key==="y"&&s()},l=()=>{w.v=We(ke.v[de.v]),Dt()},v=()=>{de.v!==0&&(de.v-=1,l())},s=()=>{de.v!==ke.v.length-1&&(de.v+=1,l())};var i=mo();te("keydown",ue,o),te("mouseup",ue,r);var a=M(i);a.__click=v;var n=A(a,2);n.__click=s,N(i),I(e,i),U()}oe(["click"]);var ae=F(()=>Ie),ie=F(()=>pe),go=C('<button class="svelte-7gpg2x"></button>'),xo=C('<button class="svelte-7gpg2x">X</button>'),bo=C('<div class="svelte-7gpg2x"><!> <!></div>');function wo(e,t){Y(t,!1);const r=s=>{/[1-9]/.test(s.key)&&Number(s.key)<=X.v.length?(ie(ie().v=!1),ae(ae().v=Number(s.key)-1)):s.key==="x"&&z.v&&(ie(ie().v=!0),ae(ae().v=-1))};se();var o=bo();te("keydown",ue,r);var l=M(o);$e(l,1,()=>X.v,ye,(s,i,a)=>{var n=go();n.__click=()=>{ae(ae().v=a),ie(ie().v=!1)},n.textContent=a+1,ee(()=>{T(n,"border",`solid 2px ${a===ae().v?a===0?X.v[1]:X.v[0]:X.v[a]}`),T(n,"--max-h",(X.v.length>4?"2":"6")+"rem"),T(n,"color",a===0?X.v[1]:X.v[0]),T(n,"background-color",X.v[a])}),I(s,n)});var v=A(l,2);V(v,()=>z.v,s=>{var i=xo();i.__click=()=>{ie(ie().v=!0),ae(ae().v=-1)},ee(()=>{T(i,"border",`solid 2px ${ie().v?X.v[1]:"ButtonFace"}`),T(i,"--max-h",(X.v.length>4?"2":"6")+"rem")}),I(s,i)}),N(o),I(e,o),U()}oe(["click"]);var st=F(()=>ht),ko=C('<footer class="svelte-6v3vqk"><div><button>Options</button> <div><!> <!></div></div></footer>');function yo(e,t){Y(t,!1),se();var r=ko(),o=M(r);T(o,"border-top-right-radius","8px"),T(o,"border-top-left-radius","8px"),T(o,"overflow","hidden"),T(o,"display","flex");var l=M(o);l.__click=()=>{st(st().v=!st().v)};var v=A(l,2),s=M(v);wo(s,{});var i=A(s,2);po(i,{}),N(v),N(o),N(r),I(e,r),U()}oe(["click"]);var Ct=F(()=>Ce),nt=F(()=>z),$o=C("<span> </span>"),Io=C('<button class="svelte-93z3ep">Start Game</button>'),Co=C('<header class="svelte-93z3ep"><!></header>');function To(e,t){Y(t,!1),se();var r=Co(),o=M(r);V(o,()=>nt().v,l=>{var v=$o();T(v,"padding-top","10px");var s=M(v);N(v),ee(()=>at(s,Ne.v?"You win!":"Keep trying")),I(l,v)},l=>{var v=Io();v.__click=()=>{nt(nt().v=!0),Ct(Ct().v=w.v),Ge()},I(l,v)}),N(r),I(e,r),U()}oe(["click"]);const Eo=e=>{let t=!1,r,o,l,v;const s=n=>{n.button===1&&(n.preventDefault(),t=!0,r=n.pageX-e.offsetLeft,o=n.pageY-e.offsetTop,l=e.scrollLeft,v=e.scrollTop,e.style.cursor="grabbing",document.addEventListener("mousemove",i),document.addEventListener("mouseup",a))},i=n=>{if(!t)return;n.preventDefault();const u=n.pageX-e.offsetLeft,c=n.pageY-e.offsetTop,d=(u-r)*2,f=(c-o)*2;e.scrollLeft=l-d,e.scrollTop=v-f},a=()=>{t=!1,e.style.cursor="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};return e.addEventListener("mousedown",s),{destroy:()=>{e.removeEventListener("mousedown",s),e.style.cursor=""}}};var qo=C('<ul class="background svelte-1xs4ql9"><li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li> <li class="svelte-1xs4ql9"></li></ul> <!>  <main class="svelte-1xs4ql9"><!></main> <!> <!>',1);function Do(e,t){Y(t,!0);const r=d=>{const f=d.match(/(\d+|[a-zX]+)/g),_=[],h=[];if(f)for(let m=0;m<f.length;(m+=1)-1){const $=f[m];isNaN(Number($))?h.push($):_.push(Number($))}if(_.length!==h.length)throw new Error("Error: different number of counts and letters.");return{letters:h,numbers:_}},o=d=>{const f=r(d),_=[];let h=0,m=0;for(let $=0;$<we.v;($+=1)-1)_[$]=[];for(let $=0;$<f.numbers.length;($+=1)-1)for(let E=0;E<f.numbers[$];(E+=1)-1)f.letters[$]==="X"?_[h][(m+=1)-1]={colorIndex:0,Xed:!0}:_[h][(m+=1)-1]={colorIndex:vt(f.letters[$]),Xed:!1},m>be.v-1&&(h+=1,m=0);return _},l=()=>{if(window.location.hash){try{const d=window.location.hash.slice(1).split("-");z.v=!!Number(d[0]),be.v=Number(d[1]),we.v=Number(d[2]),Se.v="#"+d[3];const f=z.v?d.slice(4,-2):d.slice(4,-1);for(let _=0;_<f.length;(_+=1)-1)X.v[_]="#"+f[_];w.v=o(d[z.v?d.length-2:d.length-1]),ke.v[0]=We(w.v),z.v&&(Ce.v=o(d[d.length-1]))}catch{alert("Couldn't load the code from the URL. Make sure you copied the link correctly.")}Le.v=!0}};Re(()=>{if(Le.v){const d=[Number(z.v),be.v,we.v,Se.v.slice(1)];for(let f=0;f<X.v.length;(f+=1)-1)d.push(X.v[f].slice(1));d.push(w.encoded),z.v&&d.push(Ce.encoded),window.location.hash=d.join("-")}}),Re(()=>{document.body.style.color=X.v[0]});var v=qo();hr(d=>{fr.title="Shareogram"}),te("contextmenu",ue,d=>d.preventDefault()),te("load",ue,l);var s=Ue(v),i=A(s,2);To(i,{});var a=A(i,2);a.__click=()=>{ht.v=!1};var n=M(a);ho(n,{}),N(a);var u=A(a,2);yo(u,{});var c=A(u,2);ro(c,{}),ee(()=>T(s,"background-color",Se.v)),br(a,d=>Eo(d)),I(e,v),U()}oe(["click"]);export{Do as component,Lo as universal};
