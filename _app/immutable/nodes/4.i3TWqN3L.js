import"../chunks/Bg9kRutz.js";import{ar as Ne,C as Jt,as as Kt,F as Ue,aE as We,u as ke,E as Ve,aF as Je,aG as Ke,aH as Ze,aI as Qe,a2 as je,ac as Lt,_ as $e,$ as Ie,a0 as to,aJ as eo,h as xe,q as et,m as M,k as oo,A as Zt,V as K,W as It,Y as Z,c as F,Z as T,r as R,aq as kt,aK as at,X as j,G as Ee,aL as no,ae as ro,af as Se}from"../chunks/WqTU90lj.js";import{a as ao,w as so,l as we,d as st,e as tt,s as de}from"../chunks/BIRfbpT8.js";import{c as Fe,a as S,t as C}from"../chunks/CbT8sa7i.js";import{t as dt,r as io,n as ue,a as V,c as y,d as Ut,f as Wt,h as me,j as z,k as $t,l as co,m as be,e as _t,i as pt,b as he,o as Oe,p as Ft,q as lo,g as vo,u as Tt,v as Nt,M as _e,w as pe,x as rt,y as ye,s as D,z as Et,A as H,B as Ge,C as ft,D as nt,E as Dt,F as Ce,G as fo}from"../chunks/Cw2uyFsR.js";import{p as Pe}from"../chunks/CqAtsxFK.js";import"../chunks/69_IOA4Y.js";import{i as J}from"../chunks/BOTU0zjx.js";import{i as it}from"../chunks/l7raKeyZ.js";import{r as gt,s as Vt}from"../chunks/BSkjZOyV.js";function Me(t,e,o){Ne(()=>{var n=Jt(()=>e(t,o==null?void 0:o())||{});if(o&&(n!=null&&n.update)){var i=!1,c={};Kt(()=>{var v=o();Ue(v),i&&We(c,v)&&(c=v,n.update(v))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}const uo=()=>performance.now(),ut={tick:t=>requestAnimationFrame(t),now:()=>uo(),tasks:new Set};function Ye(){const t=ut.now();ut.tasks.forEach(e=>{e.c(t)||(ut.tasks.delete(e),e.f())}),ut.tasks.size!==0&&ut.tick(Ye)}function mo(t){let e;return ut.tasks.size===0&&ut.tick(Ye),{promise:new Promise(o=>{ut.tasks.add(e={c:t,f:o})}),abort(){ut.tasks.delete(e)}}}function Pt(t,e){so(()=>{t.dispatchEvent(new CustomEvent(e))})}function ho(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function Xe(t){const e={},o=t.split(";");for(const n of o){const[i,c]=n.split(":");if(!i||c===void 0)break;const v=ho(i.trim());e[v]=c.trim()}return e}const _o=t=>t;function qe(t,e,o,n){var i=(t&Ze)!==0,c="both",v,a=e.inert,p=e.style.overflow,f,d;function x(){var w=to,k=ke;$e(null),Ie(null);try{return v??(v=o()(e,(n==null?void 0:n())??{},{direction:c}))}finally{$e(w),Ie(k)}}var u={is_global:i,in(){e.inert=a,Pt(e,"introstart"),f=ge(e,x(),d,1,()=>{Pt(e,"introend"),f==null||f.abort(),f=v=void 0,e.style.overflow=p})},out(w){e.inert=!0,Pt(e,"outrostart"),d=ge(e,x(),f,0,()=>{Pt(e,"outroend"),w==null||w()})},stop:()=>{f==null||f.abort(),d==null||d.abort()}},g=ke;if((g.transitions??(g.transitions=[])).push(u),ao){var m=i;if(!m){for(var _=g.parent;_&&_.f&Ve;)for(;(_=_.parent)&&!(_.f&Je););m=!_||(_.f&Ke)!==0}m&&Ne(()=>{Jt(()=>u.in())})}}function ge(t,e,o,n,i){var c=n===1;if(Qe(e)){var v,a=!1;return je(()=>{if(!a){var w=e({direction:c?"in":"out"});v=ge(t,w,o,n,i)}}),{abort:()=>{a=!0,v==null||v.abort()},deactivate:()=>v.deactivate(),reset:()=>v.reset(),t:()=>v.t()}}if(o==null||o.deactivate(),!(e!=null&&e.duration))return i(),{abort:Lt,deactivate:Lt,reset:Lt,t:()=>n};const{delay:p=0,css:f,tick:d,easing:x=_o}=e;var u=[];if(c&&o===void 0&&(d&&d(0,1),f)){var g=Xe(f(0,1));u.push(g,g)}var m=()=>1-n,_=t.animate(u,{duration:p});return _.onfinish=()=>{var w=(o==null?void 0:o.t())??1-n;o==null||o.abort();var k=n-w,Y=e.duration*Math.abs(k),X=[];if(Y>0){var N=!1;if(f)for(var L=Math.ceil(Y/16.666666666666668),U=0;U<=L;U+=1){var mt=w+k*x(U/L),ct=Xe(f(mt,1-mt));X.push(ct),N||(N=ct.overflow==="hidden")}N&&(t.style.overflow="hidden"),m=()=>{var lt=_.currentTime;return w+k*x(lt/Y)},d&&mo(()=>{if(_.playState!=="running")return!1;var lt=m();return d(lt,1-lt),!0})}_=t.animate(X,{duration:Y,fill:"forwards"}),_.onfinish=()=>{m=()=>n,d==null||d(n,1-n),i()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=Lt)},deactivate:()=>{i=Lt},reset:()=>{n===0&&(d==null||d(1,0))},t:()=>m()}}function At(t,e,o=e){var n=eo();we(t,"input",i=>{var c=i?t.defaultValue:t.value;if(c=ee(t)?oe(c):c,o(c),n&&c!==(c=e())){var v=t.selectionStart,a=t.selectionEnd;t.value=c??"",a!==null&&(t.selectionStart=v,t.selectionEnd=Math.min(a,t.value.length))}}),(xe&&t.defaultValue!==t.value||Jt(e)==null&&t.value)&&o(ee(t)?oe(t.value):t.value),Kt(()=>{var i=e();ee(t)&&i===oe(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Te(t,e,o=e){we(t,"change",n=>{var i=n?t.defaultChecked:t.checked;o(i)}),(xe&&t.defaultChecked!==t.checked||Jt(e)==null)&&o(t.checked),Kt(()=>{var n=e();t.checked=!!n})}function ee(t){var e=t.type;return e==="number"||e==="range"}function oe(t){return t===""?null:+t}function po(t,e,o=e){we(t,"change",()=>{o(t.files)}),xe&&t.files&&o(t.files),Kt(()=>{t.files=e()})}function B(t){var e=oo(0);return function(){return arguments.length===1?(et(e,M(e)+1),arguments[0]):(M(e),t())}}const ze="none";function go(t){return Array.isArray(t)?t:[t]}function Rt(t,e,o){return t.addEventListener(e,o),()=>t.removeEventListener(e,o)}function xo(t,e){const o=t.getBoundingClientRect(),n=Math.abs(e[0].clientX-e[1].clientX),i=Math.abs(e[0].clientY-e[1].clientY),c=Math.min(e[0].clientX,e[1].clientX),v=Math.min(e[0].clientY,e[1].clientY),a=c+n/2,p=v+i/2,f=Math.round(a-o.left),d=Math.round(p-o.top);return{x:f,y:d}}function wo(t,e){return e.filter(o=>t.pointerId!==o.pointerId)}function bo(t,e,o){const n=t.getBoundingClientRect(),i=Math.round(e.clientX-n.left),c=Math.round(e.clientY-n.top);return{event:e,pointersCount:o.length,target:e.target,x:i,y:c}}function Yt(t,e,o,n,i){const c=bo(t,o,n);return t.dispatchEvent(new CustomEvent(`${e}${i}`,{detail:c})),c}function yo(t,e,o,n,i,c=ze,v=[]){e.style.touchAction=go(c).join(" ");let a=[];function p(d){a.push(d);const x=Yt(e,t,d,a,"down");n==null||n(a,d),v.forEach(X=>{var N;(N=X.onDown)==null||N.call(X,x,a)});const u=d.pointerId;function g(X){if(u===X.pointerId){a=wo(X,a),a.length||m();const N=Yt(e,t,X,a,"up");i==null||i(a,X),v.forEach(L=>{var U;(U=L.onUp)==null||U.call(L,N,a)})}}function m(){_(),w(),k(),Y()}const _=Rt(e,"pointermove",X=>{a=a.map(L=>X.pointerId===L.pointerId?X:L);const N=Yt(e,t,X,a,"move");o==null||o(a,X),v.forEach(L=>{var U;(U=L.onMove)==null||U.call(L,N,a)})}),w=Rt(e,"lostpointercapture",X=>{g(X)}),k=Rt(e,"pointerup",X=>{g(X)}),Y=Rt(e,"pointerleave",X=>{a=[],m();const N=Yt(e,t,X,a,"up");i==null||i(a,X),v.forEach(L=>{var U;(U=L.onUp)==null||U.call(L,N,a)})})}const f=Rt(e,"pointerdown",p);return{destroy:()=>{f()}}}function Ae(t){return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)}const ne=(t,e)=>{Zt(()=>{const{onMove:o,onDown:n,onUp:i,gestureName:c,parameters:v}=ko(t,e==null?void 0:e());return yo(c,t,o,n,i,v.touchAction,v.plugins).destroy})};function ko(t,e){const o={touchAction:ze,composed:!1,...e},n="pinch";let i,c=0,v;function a(d){d.length===1&&(i=void 0)}function p(d){d.length===2&&(c=Ae(d),v=xo(t,d))}function f(d,x){if(d.length===2){const u=Ae(d);if(i!==void 0&&u!==i){const g=u/c;t.dispatchEvent(new CustomEvent(n,{detail:{scale:g,center:v,pointerType:x.pointerType}}))}i=u}return!1}return{onMove:f,onDown:p,onUp:a,gestureName:n,parameters:o}}var Mt=B(()=>Wt),Xt=B(()=>Ut),re=B(()=>V),He=B(()=>y),$o=C("<button>Edit</button>"),Io=C('<div class="flex"><input class="min-w-0 p-2.5 text-center text-black" type="text" inputmode="numeric"> <input class="min-w-0 p-2.5 text-center text-black" type="text" inputmode="numeric"></div>');function Eo(t,e){K(e,!1);const o=a=>Math.max(0,Number(String(a).replace(/[^0-9]/g,"")));it();var n=Fe(),i=It(n);{var c=a=>{var p=$o();p.__click=()=>{re(re().v=!1),He(He().v=dt.v),io()},S(a,p)},v=a=>{var p=Io(),f=F(p);gt(f),f.__input=()=>{Xt(Xt().v=o(Xt().v)),ue()};var d=T(f,2);gt(d),d.__input=()=>{Mt(Mt().v=o(Mt().v)),ue()},R(p),At(f,()=>Xt().v,x=>Xt(Xt().v=x)),At(d,()=>Mt().v,x=>Mt(Mt().v=x)),S(a,p)};J(i,a=>{re().v?a(c):a(v,!1)})}S(t,n),Z()}st(["click","input"]);const So=(t,e)=>{e(y.colorIndices,z.v,o=>{const n=document.createElement("a");n.download="shareogram.png",n.href=o,n.click()})};var Co=C("<button>Save as PNG</button>");function Mo(t,e){K(e,!1);const o=(i,c,v)=>{const a=i[0].length,p=i.length,f=document.createElement("canvas");f.width=a,f.height=p;const d=f.getContext("2d");if(d){const x=d.createImageData(a,p);for(let g=0;g<p;g++)for(let m=0;m<a;m++){const _=c[i[g][m]],w=me(_);if(w){const[k,Y,X]=w,N=(g*a+m)*4;x.data[N]=k,x.data[N+1]=Y,x.data[N+2]=X,x.data[N+3]=255}}d.putImageData(x,0,0);const u=f.toDataURL("image/png");v(u)}};it();var n=Co();n.__click=[So,o],S(t,n),Z()}st(["click"]);var Xo=C('<input class="mx-2" type="range" max="442" min="10">'),To=C('<input class="hidden" accept="image/png" id="file-upload" type="file"> <label class="w-full cursor-pointer bg-[ButtonFace] p-2.5 text-center font-sans text-black active:brightness-50 hover:brightness-75" for="file-upload">Load PNG</label> <!>',1);function Ao(t,e){K(e,!0);let o=kt(10),n=kt(void 0);const i=(u,g,m)=>{const[_,w,k]=u,[Y,X,N]=g;return Math.sqrt((_-Y)**2+(w-X)**2+(k-N)**2)<=m},c=(u,g,m)=>"#"+[u,g,m].map(_=>Math.round(_).toString(16).padStart(2,"0")).join(""),v=(u,g,m)=>{const _=me(u);for(let w=0;w<g.length;w++){const k=me(g[w]);if(i(_,k,m))return w}return g.push(u),g.length-1},a=(u,g,m)=>{const _=new FileReader;_.onload=w=>{var Y;const k=new Image;k.onload=()=>{const X=document.createElement("canvas"),N=X.getContext("2d");if(N){X.width=k.width,X.height=k.height,N.drawImage(k,0,0);const L=N.getImageData(0,0,k.width,k.height).data,U=[],mt=[];for(let ct=0;ct<k.height;ct++){const lt=[];for(let Ht=0;Ht<k.width;Ht++){const xt=(ct*k.width+Ht)*4,St=L[xt],Ot=L[xt+1],Qt=L[xt+2],Gt=L[xt+3]<1?"#ffffff":c(St,Ot,Qt),te=v(Gt,U,g);lt.push(te)}mt.push(lt)}m(mt,U)}},k.src=(Y=w.target)==null?void 0:Y.result},_.readAsDataURL(u)};Zt(()=>{M(n)!==void 0&&M(n).length>=1&&a(M(n)[0],M(o),(u,g)=>{Ut.v=u[0].length,Wt.v=u.length,z.v=g,$t.v=0,y.v=co();for(let m=0;m<y.numRows;m++)for(let _=0;_<y.numColumns;_++)y.v[m][_].colorIndex=u[m][_];be()})});var p=To(),f=It(p),d=T(f,4);{var x=u=>{var g=Xo();gt(g),At(g,()=>M(o),m=>et(o,m)),S(u,g)};J(d,u=>{M(n)!==void 0&&M(n).length>=1&&u(x)})}po(f,()=>M(n),u=>et(n,u)),S(t,p),Z()}var ae=B(()=>$t),se=B(()=>he),ht=B(()=>z),Ho=C('<button class="flex-1">-</button>'),Lo=C('<!> <button class="flex-1">+</button>',1),Do=C('<input type="color" class="h-8 min-w-12 flex-1 border-0">'),Ro=C('<div><div class="flex flex-wrap"><!></div> <div class="flex flex-wrap"><input type="color" class="h-8 min-w-12 flex-1 border-0"> <!></div></div>');function No(t,e){K(e,!1);const o=()=>{const x="0123456789abcdef";let u="#";for(let g=0;g<6;g++){const m=Math.floor(Math.random()*x.length);u+=x[m]}return u},n=()=>ht().v.length>2;it();var i=Ro(),c=F(i),v=F(c);{var a=x=>{var u=Lo(),g=It(u);{var m=w=>{var k=Ho();k.__click=()=>{ht().v.pop(),ae().v>ht().v.length-1&&ae(ae().v--),Oe()},S(w,k)};J(g,w=>{n()&&w(m)})}var _=T(g,2);_.__click=()=>{ht().v.push(o())},S(x,u)};J(v,x=>{V.v||x(a)})}R(c);var p=T(c,2),f=F(p);gt(f);var d=T(f,2);_t(d,1,()=>ht().v,pt,(x,u,g)=>{var m=Do();gt(m),At(m,()=>ht().v[g],_=>ht(ht().v[g]=_)),S(x,m)}),R(p),R(i),At(f,()=>se().v,x=>se(se().v=x)),S(t,i),Z()}st(["click"]);var Le=B(()=>y),Fo=C("<button>Reveal Tile</button>");function Oo(t,e){K(e,!1);const o=()=>{if(!Ft()){const i=lo(),c=vo(0,i.length-1),v=i[c].row,a=i[c].column;Le(Le().v[v][a]={colorIndex:dt.v[v][a].colorIndex,Xed:!1}),be()}};it();var n=Fo();n.__click=o,S(t,n),Z()}st(["click"]);var ie=B(()=>Nt),ce=B(()=>Tt),Go=C('<div class="flex justify-between border-t-2 border-t-black p-5"><input type="checkbox" class="svelte-rve7gr"> <input type="checkbox" class="svelte-rve7gr"></div>');function Po(t,e){K(e,!1),it();var o=Go(),n=F(o);gt(n);var i=T(n,2);gt(i),R(o),Te(n,()=>ce().v,c=>ce(ce().v=c)),Te(i,()=>ie().v,c=>ie(ie().v=c)),S(t,o),Z()}var le=B(()=>rt),Yo=C('<input step=".025" type="range" class="svelte-4s2jov">');function qo(t,e){K(e,!1),it();var o=Yo();gt(o),Vt(o,"max",_e),Vt(o,"min",pe),At(o,()=>le().v,n=>le(le().v=n)),S(t,o),Z()}const zo=t=>t;function Bo(t){const e=t-1;return e*e*e+1}function De(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Uo(t,{delay:e=0,duration:o=400,easing:n=zo}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:n,css:c=>`opacity: ${c*i}`}}function Wo(t,{delay:e=0,duration:o=400,easing:n=Bo,x:i=0,y:c=0,opacity:v=0}={}){const a=getComputedStyle(t),p=+a.opacity,f=a.transform==="none"?"":a.transform,d=p*(1-v),[x,u]=De(i),[g,m]=De(c);return{delay:e,duration:o,easing:n,css:(_,w)=>`
			transform: ${f} translate(${(1-_)*x}${u}, ${(1-_)*g}${m});
			opacity: ${p-d*w}`}}var qt=B(()=>ye),Vo=C("<!> <!>",1),Jo=C("<!> <!>",1),Ko=C('<div class="fixed inset-y-0 right-0 z-50 flex w-40 max-w-[75%] flex-col overflow-hidden rounded-l-3xl bg-white"><!> <!> <!> <!> <!></div>');function Zo(t,e){K(e,!1);const o=v=>{v.key==="o"&&qt(qt().v=!qt().v)};it();var n=Fe();tt("keydown",at,o);var i=It(n);{var c=v=>{var a=Ko(),p=F(a);{var f=_=>{var w=Vo(),k=It(w);Mo(k,{});var Y=T(k,2);Ao(Y,{}),S(_,w)};J(p,_=>{V.v||_(f)})}var d=T(p,2);Eo(d,{});var x=T(d,2);No(x,{});var u=T(x,2);qo(u,{});var g=T(u,2);{var m=_=>{var w=Jo(),k=It(w);Po(k,{});var Y=T(k,2);Oo(Y,{}),S(_,w)};J(g,_=>{V.v&&_(m)})}R(a),qe(3,a,()=>Wo,()=>({x:80})),S(v,a)};J(i,v=>{qt().v&&v(c)})}S(t,n),Z()}var Qo=C('<div class="font-bold"> </div>'),jo=C("<th></th>"),tn=C('<thead class="top-0 z-20 align-bottom"><tr><th class="sticky left-0 z-30"></th><!></tr></thead>'),en=C('<div class="flex items-center justify-center font-bold"> </div>'),on=C('<td class="left-0 z-10"><div class="flex justify-end"></div></td>'),nn=C("<span>X</span>"),rn=C('<td class="box-content h-6 min-w-6 text-center transition-colors duration-500" tabindex="0"><!></td>'),an=C('<td class="px-1 text-center"></td>'),sn=C("<tr><!><!><!></tr>"),cn=C('<td class="text-center"></td>'),ln=C("<tr><td></td><!></tr>"),vn=C('<table class="m-32 border-collapse"><!><tbody><!><!></tbody></table>');function fn(t,e){K(e,!0);let o=kt(!1),n=kt(!1),i=kt(""),c=kt(0);const v=(r,s,l,$)=>{const I=Math.abs(r-l),h=Math.abs(s-$);return I===0&&h===1?$>s?"right":"left":I===1&&h===0?l>r?"below":"above":"not adjacent"},a=r=>r.Xed,p=r=>r.colorIndex===$t.v,f=(r,s)=>{r.colorIndex=s},d=r=>{r.colorIndex=0},x=r=>{r.Xed=!r.Xed},u=(r,s,l)=>{Et.v||(r.target instanceof HTMLElement&&r.target.releasePointerCapture(r.pointerId),r.button===0?et(o,!0):r.button===2&&et(n,!0),g(s,l))},g=(r,s)=>{H.v={colorIndex:y.v[r][s].colorIndex,Xed:y.v[r][s].Xed,column:s,row:r},et(c,0),V.v?M(o)?ft.v&&!nt(y.v[r][s])?x(y.v[r][s]):!ft.v&&!a(y.v[r][s])&&(p(y.v[r][s])?d(y.v[r][s]):f(y.v[r][s],$t.v)):M(n)&&(nt(y.v[r][s])?d(y.v[r][s]):x(y.v[r][s])):M(o)?f(y.v[r][s],$t.v):M(n)&&d(y.v[r][s])},m=r=>{r.button===0?et(o,!1):r.button===2&&et(n,!1)},_=(r,s)=>{if(!M(o)&&!M(n)||M(o)&&M(n)||H.v.row===-1||Et.v)return;no(c),M(c)===1&&et(i,Pe(v(H.v.row,H.v.column,r,s)));const l=y.v[H.v.row][H.v.column];if(V.v)if(Ge.v){const $=Math.min(H.v.row,r),I=Math.max(H.v.row,r),h=Math.min(H.v.column,s),b=Math.max(H.v.column,s);for(let O=$;O<=I;O++)for(let q=h;q<=b;q++){const E=y.v[O][q];M(o)?ft.v&&!nt(E)?E.Xed=l.Xed:!ft.v&&!a(E)&&f(E,l.colorIndex):H.v.Xed&&!nt(E)?E.Xed=!1:H.v.colorIndex===0&&!nt(E)?E.Xed=!0:H.v.colorIndex!==0&&!a(E)&&d(E)}}else if(M(i)==="above"||M(i)==="below"){const $=Math.min(H.v.row,r),I=Math.max(H.v.row,r);for(let h=$;h<I+1;h++){const b=y.v[h][H.v.column];M(o)?ft.v&&!nt(b)?b.Xed=l.Xed:!ft.v&&!a(b)&&f(b,l.colorIndex):H.v.Xed&&!nt(b)?b.Xed=!1:H.v.colorIndex===0&&!nt(b)?b.Xed=!0:H.v.colorIndex!==0&&!a(b)&&d(b)}}else{const $=Math.min(H.v.column,s),I=Math.max(H.v.column,s);for(let h=$;h<I+1;h++){const b=y.v[H.v.row][h];M(o)?ft.v&&!nt(b)?b.Xed=l.Xed:!ft.v&&!a(b)&&f(b,l.colorIndex):H.v.Xed&&!nt(b)?b.Xed=!1:H.v.colorIndex===0&&!nt(b)?b.Xed=!0:H.v.colorIndex!==0&&!a(b)&&d(b)}}else M(o)?f(y.v[r][s],$t.v):d(y.v[r][s])};let w=0,k=0;const Y=(r,s)=>{w=r,k=s},X=r=>{var $;if(r.key!=="ArrowUp"&&r.key!=="ArrowDown"&&r.key!=="ArrowLeft"&&r.key!=="ArrowRight"&&r.key!==" ")return;r.preventDefault();let s=w,l=k;r.key==="ArrowUp"&&w>0?s--:r.key==="ArrowDown"&&w<y.numRows-1?s++:r.key==="ArrowLeft"&&k>0?l--:r.key==="ArrowRight"&&k<y.numColumns-1?l++:r.key===" "&&et(o,!0),($=document.querySelector(`[data-row="${s}"][data-col="${l}"]`))==null||$.focus(),M(o)&&!Et.v&&g(s,l)},N=r=>{r.key===" "&&et(o,!1)},L=(r,s)=>{let l=0;for(let I=0;I<=r;I++)I!==0&&s[I-1].colorIndex===s[I].colorIndex&&l++,I<r&&(l+=s[I].count);let $=0;for(let I=s.length-1;I>=r;I--)I!==s.length-1&&s[I].colorIndex===s[I+1].colorIndex&&$++,I>r&&($+=s[I].count);return{offsetHead:l,offsetTail:$}},U=(r,s,l)=>{const{offsetHead:$,offsetTail:I}=L(r,s);let h=0,b=0;for(;h<$&&b<=l.length-1;)l[b].colorIndex!==-1?h+=l[b].count:b>0&&h++,b++;h=0;let O=l.length-1;for(;h<I&&O>=0;)l[O].colorIndex!==-1?h+=l[O].count:O<l.length-1&&h++,O--;return{encodesStartIndex:b,encodesEndIndex:O}},mt=(r,s)=>{const l=new Array(r.length).fill(void 0),$=new Array(r.length).fill(void 0),I=new Array(r.length).fill(void 0);for(let h=0;h<r.length;h++){const{encodesStartIndex:b,encodesEndIndex:O}=U(h,r,s),q=r[h];for(let E=b;E<=O;E++)if(q.colorIndex===s[E].colorIndex&&q.count>=s[E].count){if(l.slice(0,h).includes(E))continue;l[h]=E;for(let A=0;A<h;A++)l[A]>E&&(l[A]=void 0);break}}for(let h=r.length-1;h>=0;h--){const{encodesStartIndex:b,encodesEndIndex:O}=U(h,r,s),q=r[h];for(let E=O;E>=b;E--)if(q.colorIndex===s[E].colorIndex&&q.count>=s[E].count){if($.slice(h+1).includes(E))continue;$[h]=E;for(let A=r.length-1;A>h;A--)$[A]<E&&($[A]=void 0);break}}for(let h=0;h<r.length;h++)l[h]===$[h]&&(I[h]=l[h]);return I},ct=(r,s)=>{const l=mt(r,s);let $=[],I=l[0]!==void 0?l[0]:0;for(let h=1;h<l.length;h++)l[h]!==void 0&&!(I===0&&l[h]===s.length-1)&&(l[h-1]===void 0&&$.push([I,l[h]]),I=l[h]);l[l.length-1]===void 0&&I!==s.length-1&&I!==0&&$.push([I,s.length-1]);for(let h=0;h<$.length;h++){const[b,O]=$[h],q=b===0?0:l.indexOf(b),E=O===s.length-1?r.length-1:l.indexOf(O),A=r.slice(q,E+1),W=s.slice(b,O+1);let Q=0;for(let G=0;G<W.length;G++)s[G].colorIndex!==-1?Q+=s[G].count:G>0&&G<W.length-1&&Q++;const{offsetTail:P}=L(0,A);if(P+A[0].count>Q)continue;const ot=mt(A,W);for(let G=0;G<ot.length;G++)ot[G]!==void 0&&(ot[G]=ot[G]+b);l.splice(q,E-q+1,...ot)}return l},lt=Ee(()=>{let r=[[]];for(let s=0;s<dt.rowHints.length;s++){const l=dt.rowHints[s],$=y.rowEncodes[s];r[s]=ct(l,$)}return r}),Ht=Ee(()=>{let r=[[]];for(let s=0;s<dt.columnHints.length;s++){const l=dt.columnHints[s],$=y.columnEncodes[s];r[s]=ct(l,$)}return r}),xt=(r,s,l,$)=>{const I=$?M(lt):M(Ht),h=$?y.rowEncodes[r]:y.columnEncodes[r];return I[r][s]!==void 0&&JSON.stringify(l)===JSON.stringify(h[I[r][s]])};var St=vn();tt("pointerup",at,m),tt("keyup",at,N);var Ot=F(St);{var Qt=r=>{var s=tn(),l=F(s),$=F(l),I=T($);_t(I,17,()=>({length:y.numColumns}),pt,(h,b,O)=>{var q=jo();_t(q,21,()=>dt.columnHints[O],pt,(E,A,W)=>{var Q=Qo(),P=F(Q,!0);R(Q),j(ot=>{D(Q,"opacity",ot),D(Q,"font-size",Nt.v?".5rem":""),D(Q,"color",z.v[M(A).colorIndex]),de(P,M(A).count)},[()=>xt(O,W,M(A),!1)?.2:1]),S(E,Q)}),R(q),S(h,q)}),R(l),R(s),j(()=>{D(s,"background-color",Nt.v?z.v[0]:""),D(s,"position",Nt.v?"sticky":""),D($,"visibility",Tt.v&&Nt.v?"":"hidden"),D($,"background-color",z.v[0])}),S(r,s)};J(Ot,r=>{V.v&&r(Qt)})}var jt=T(Ot),Gt=F(jt);_t(Gt,17,()=>({length:y.numRows}),pt,(r,s,l)=>{var $=sn(),I=F($);{var h=E=>{var A=on(),W=F(A);_t(W,21,()=>dt.rowHints[l],pt,(Q,P,ot)=>{var G=en(),vt=F(G,!0);R(G),j(Ct=>{D(G,"opacity",Ct),D(G,"width",Tt.v?".75rem":"1.5rem"),D(G,"font-size",Tt.v?".5rem":""),D(G,"color",z.v[M(P).colorIndex]),de(vt,M(P).count)},[()=>xt(l,ot,M(P),!0)?.2:1]),S(Q,G)}),R(W),R(A),j(()=>{D(A,"background-color",Tt.v?z.v[0]:""),D(A,"position",Tt.v?"sticky":"")}),S(E,A)};J(I,E=>{V.v&&E(h)})}var b=T(I);_t(b,17,()=>({length:y.numColumns}),pt,(E,A,W,Q)=>{var P=rn();P.__pointerdown=vt=>{u(vt,l,W)},Vt(P,"data-row",l),Vt(P,"data-col",W),P.__keydown=X;var ot=F(P);{var G=vt=>{var Ct=nn();qe(3,Ct,()=>Uo,()=>({duration:300})),S(vt,Ct)};J(ot,vt=>{a(y.v[l][W])&&!Ft()&&vt(G)})}R(P),j((vt,Ct)=>{D(P,"border-left",vt),D(P,"border-top",Ct),D(P,"background-color",z.v[y.v[l][W].colorIndex]),D(P,"color",z.v[1])},[()=>Ft()||!V.v?"0":`solid ${W%5===0&&W!==0?`4px ${z.v[1]}`:`2px ${he.v}`}`,()=>Ft()||!V.v?"0":`solid ${l%5===0&&l!==0?`4px ${z.v[1]}`:`2px ${he.v}`}`]),tt("pointerenter",P,()=>{_(l,W)}),tt("focus",P,()=>{Y(l,W)}),S(E,P)});var O=T(b);{var q=E=>{var A=an();A.textContent=l%5===4?l+1:"",S(E,A)};J(O,E=>{y.numRows>10&&V.v&&E(q)})}R($),S(r,$)});var te=T(Gt);{var Be=r=>{var s=ln(),l=T(F(s));_t(l,17,()=>({length:y.numColumns}),pt,($,I,h)=>{var b=cn();b.textContent=h%5===4?h+1:"",S($,b)}),R(s),S(r,s)};J(te,r=>{y.numColumns>10&&V.v&&r(Be)})}R(jt),R(St),j(()=>D(St,"zoom",rt.v)),S(t,St),Z()}st(["pointerdown","keydown"]);var dn=C('<div class="flex"><button class="flex-1">Undo</button> <button class="flex-1">Redo</button></div>');function un(t,e){K(e,!0);const o=()=>{H.v.row!==-1&&be(),H.reset()},n=x=>{x.key==="z"?v():x.key==="y"&&a()},i=()=>{y.numRows!==Wt.v&&(Wt.v=y.numRows),y.numColumns!==Ut.v&&(Ut.v=y.numColumns)},c=()=>{y.v=fo(Ce.v[Dt.v]),Oe(),i()},v=()=>{Dt.v!==0&&(Dt.v--,c())},a=()=>{Dt.v!==Ce.v.length-1&&(Dt.v++,c())};var p=dn();tt("keydown",at,n),tt("pointerup",at,o);var f=F(p);f.__click=v;var d=T(f,2);d.__click=a,R(p),S(t,p),Z()}st(["click"]);var wt=B(()=>Et),bt=B(()=>$t),zt=B(()=>Ge),yt=B(()=>ft),mn=C('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0"></button>'),hn=C('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">X</button>'),_n=C('<button class="flex aspect-square h-8 flex-1 items-center justify-center p-0">2d</button>'),pn=C('<div class="flex flex-wrap"><!> <!> <button class="flex aspect-square h-8 flex-1 items-center justify-center p-0" aria-label="Move"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21v-9m0 9l3-3m-3 3l-3-3m3-6V3m0 9H3m9 0h9m-9-9L9 6m3-3l3 3M3 12l3 3m-3-3l3-3m15 3l-3-3m3 3l-3 3"></path></svg></button> <!></div>');function gn(t,e){K(e,!1);const o=m=>{/[1-9]/.test(m.key)&&Number(m.key)<=z.v.length?n(Number(m.key)-1):m.key==="m"?c():m.key==="x"&&V.v?i():m.key==="d"&&V.v&&v()},n=m=>{yt(yt().v=!1),wt(wt().v=!1),bt(bt().v=m)},i=()=>{yt(yt().v=!0),wt(wt().v=!1),bt(bt().v=-1)},c=()=>{yt(yt().v=!1),wt(wt().v=!0),bt(bt().v=-1)},v=()=>{zt(zt().v=!zt().v)};it();var a=pn();tt("keydown",at,o);var p=F(a);_t(p,1,()=>z.v,pt,(m,_,w)=>{var k=mn();k.__click=()=>{n(w)},k.textContent=w+1,j(()=>{D(k,"filter",w===bt().v?"brightness(50%)":""),D(k,"color",w===0?z.v[1]:z.v[0]),D(k,"background-color",z.v[w])}),S(m,k)});var f=T(p,2);{var d=m=>{var _=hn();_.__click=i,j(()=>D(_,"filter",yt().v?"brightness(50%)":"")),S(m,_)};J(f,m=>{V.v&&m(d)})}var x=T(f,2);x.__click=c;var u=T(x,2);{var g=m=>{var _=_n();_.__click=v,j(()=>D(_,"filter",zt().v?"brightness(50%)":"")),S(m,_)};J(u,m=>{V.v&&m(g)})}R(a),j(()=>D(x,"filter",wt().v?"brightness(50%)":"")),S(t,a),Z()}st(["click"]);var Bt=B(()=>ye),xn=C('<footer class="flex justify-center"><div class="flex overflow-hidden rounded-t-lg"><button>Options</button> <div><!> <!></div></div></footer>');function wn(t,e){K(e,!1),it();var o=xn(),n=F(o),i=F(n);i.__click=()=>{Bt(Bt().v=!Bt().v)};var c=T(i,2),v=F(c);gn(v,{});var a=T(v,2);un(a,{}),R(c),R(n),R(o),j(()=>D(i,"filter",Bt().v?"brightness(50%)":"")),S(t,o),Z()}st(["click"]);var bn=C('<div class="absolute -top-4 -left-4 scale-[40%]" id="dynamic-svg"><a href="https://github.com/JeffHove/Shareogram" aria-label="Link to GitHub repository"><svg height="96" width="98" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="#fff" fill-rule="evenodd"></path></svg></a></div>');function yn(t,e){K(e,!0),Zt(()=>{const n=document.querySelector("#dynamic-svg path");n==null||n.setAttribute("fill",z.v[0])});var o=bn();S(t,o),Z()}var Re=B(()=>dt),ve=B(()=>V),kn=C('<span class="pt-2.5"> </span>'),$n=C('<button class="-mt-1 rounded-b-lg">Play</button>'),In=C('<header class="flex items-center justify-center"><!> <!></header>');function En(t,e){K(e,!1),it();var o=In(),n=F(o);yn(n,{});var i=T(n,2);{var c=a=>{var p=kn(),f=F(p,!0);R(p),j(d=>de(f,d),[()=>Ft()?"You win!":"Keep trying"],ro),S(a,p)},v=a=>{var p=$n();p.__click=()=>{ve(ve().v=!0),Re(Re().v=y.v),ue()},S(a,p)};J(i,a=>{ve().v?a(c):a(v,!1)})}R(o),S(t,o),Z()}st(["click"]);const fe=t=>{let e=!1,o,n,i,c;const v=f=>{(f.button===1||f.button===0&&Et.v)&&(f.preventDefault(),e=!0,o=f.pageX-t.offsetLeft,n=f.pageY-t.offsetTop,i=t.scrollLeft,c=t.scrollTop,t.style.cursor="grabbing",document.addEventListener("mousemove",a),document.addEventListener("mouseup",p))},a=f=>{if(!e)return;f.preventDefault();const d=f.pageX-t.offsetLeft,x=f.pageY-t.offsetTop,u=(d-o)*2,g=(x-n)*2;t.scrollLeft=i-u,t.scrollTop=c-g},p=()=>{e=!1,t.style.cursor="",document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",p)};return t.addEventListener("mousedown",v),{destroy:()=>{t.removeEventListener("mousedown",v),t.style.cursor=""}}};var Sn=C('<!>  <main class="m-3 flex flex-1 overflow-auto svelte-v5w8hs"><!></main> <!> <!>',1);function Fn(t,e){K(e,!0);let o=kt(1);const n=u=>{u.preventDefault(),u.deltaY<0&&rt.v<_e?rt.v+=.05:u.deltaY>0&&rt.v>pe&&(rt.v-=.05)},i=u=>{if(!Et.v)return;const g=M(o);et(o,Pe(u.detail.scale));const m=M(o)<g;m&&rt.v>pe?rt.v-=.025:!m&&rt.v<_e&&(rt.v+=.025)},c=u=>(u.preventDefault(),u.returnValue="","");Zt(()=>{document.body.style.color=z.v[0]});var v=Sn();tt("wheel",at,n,void 0,!1),tt("contextmenu",at,u=>u.preventDefault()),tt("load",at,onload),tt("beforeunload",at,u=>{c(u)}),Me(Se.body,(u,g)=>ne==null?void 0:ne(u,g),()=>()=>({})),tt("pinch",Se.body,i);var a=It(v);En(a,{});var p=T(a,2);p.__click=()=>{ye.v=!1};var f=F(p);fn(f,{}),R(p),Me(p,u=>fe==null?void 0:fe(u));var d=T(p,2);wn(d,{});var x=T(d,2);Zo(x,{}),j(()=>D(p,"touch-action",Et.v?"auto":"none")),S(t,v),Z()}st(["click"]);export{Fn as component};
