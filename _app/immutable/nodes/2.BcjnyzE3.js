import{a as I,t as $}from"../chunks/disclose-version.qG5ofjPX.js";import{t as pt,q as Et,o as Xt,Q as St,v as Mt,ak as gt,h as F,x as Ge,i as Nt,a1 as bt,H as At,w as lt,y as Pe,C as Ce,z as xt,A as wt,B as Ht,al as Rt,O as Je,n as ct,am as je,s as W,an as et,ao as Dt,G as Lt,a as vt,ap as Ot,a0 as Gt,aq as Pt,ar as zt,W as Yt,Z as qt,as as Ut,V as Bt,a5 as Wt,d as Ft,at as Vt,au as Jt,a6 as tt,F as Kt,aj as be,g as b,ae as te,I as U,K as B,L as A,N as M,M as S,b as De,j as Xe,av as he,J as V,aw as Qt,ax as Zt}from"../chunks/runtime.Bvg2cBRz.js";import{d as se,e as re,s as Ne,a as jt}from"../chunks/render.fzw0RiVP.js";import{g as it,a as eo,p as Ae,i as K}from"../chunks/if.MzOtzOOr.js";import{i as me}from"../chunks/lifecycle.7t52ZXyt.js";import{r as Y}from"../chunks/misc.CBV0I33n.js";function Oe(e,t=!1){return He(e,new Map)}function He(e,t,o,s){if(typeof e=="object"&&e!==null){const i=t.get(e);if(i!==void 0)return i;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(pt(e)){const a=[];t.set(e,a);for(let n=0;n<e.length;n+=1)a.push(He(e[n],t));return a}if(Et(e)===Xt){const a={};t.set(e,a);for(var v in e)a[v]=He(e[v],t);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return He(e.toJSON(),t)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let ze=null;function pe(e,t){return t}function to(e,t,o,s){for(var v=[],i=t.length,a=0;a<i;a++)Ot(t[a].e,v,!0);var n=i>0&&v.length===0&&o!==null;if(n){var c=o.parentNode;Gt(c),c.append(o),s.clear(),ie(e,t[0].prev,t[i-1].next)}Pt(v,()=>{for(var l=0;l<i;l++){var u=t[l];n||(s.delete(u.k),ie(e,u.prev,u.next)),zt(u.e,!n)}})}function ge(e,t,o,s,v,i=null){var a=e,n={flags:t,items:new Map,first:null},c=(t&gt)!==0;if(c){var l=e;a=F?Ge(Yt(l)):l.appendChild(St())}F&&Nt();var u=null;Mt(()=>{var r=o(),f=pt(r)?r:r==null?[]:bt(r),d=f.length;let m=!1;if(F){var w=a.data===At;w!==(d===0)&&(a=lt(),Ge(a),Pe(!1),m=!0)}if(F){for(var p=null,N,E=0;E<d;E++){if(Ce.nodeType===8&&Ce.data===qt){a=Ce,m=!0,Pe(!1);break}var _=f[E],h=s(_,E);N=It(Ce,n,p,null,_,h,E,v,t),n.items.set(h,N),p=N}d>0&&Ge(lt())}F||oo(f,n,a,v,t,s),i!==null&&(d===0?u?xt(u):u=wt(()=>i(a)):u!==null&&Ht(u,()=>{u=null})),m&&Pe(!0)}),F&&(a=Ce)}function oo(e,t,o,s,v,i){var C,L,ae,st;var a=(v&Ut)!==0,n=(v&(je|et))!==0,c=e.length,l=t.items,u=t.first,r=u,f,d=null,m,w=[],p=[],N,E,_,h;if(a)for(h=0;h<c;h+=1)N=e[h],E=i(N,h),_=l.get(E),_!==void 0&&((C=_.a)==null||C.measure(),(m??(m=new Set)).add(_));for(h=0;h<c;h+=1){if(N=e[h],E=i(N,h),_=l.get(E),_===void 0){var x=r?r.e.nodes_start:o;d=It(x,t,d,d===null?t.first:d.next,N,E,h,s,v),l.set(E,d),w=[],p=[],r=d.next;continue}if(n&&ro(_,N,h,v),_.e.f&Rt&&(xt(_.e),a&&((L=_.a)==null||L.unfix(),(m??(m=new Set)).delete(_))),_!==r){if(f!==void 0&&f.has(_)){if(w.length<p.length){var H=p[0],X;d=H.prev;var D=w[0],k=w[w.length-1];for(X=0;X<w.length;X+=1)ut(w[X],H,o);for(X=0;X<p.length;X+=1)f.delete(p[X]);ie(t,D.prev,k.next),ie(t,d,D),ie(t,k,H),r=H,d=k,h-=1,w=[],p=[]}else f.delete(_),ut(_,r,o),ie(t,_.prev,_.next),ie(t,_,d===null?t.first:d.next),ie(t,d,_),d=_;continue}for(w=[],p=[];r!==null&&r.k!==E;)(f??(f=new Set)).add(r),p.push(r),r=r.next;if(r===null)continue;_=r}w.push(_),d=_,r=_.next}if(r!==null||f!==void 0){for(var O=f===void 0?[]:bt(f);r!==null;)O.push(r),r=r.next;var q=O.length;if(q>0){var z=v&gt&&c===0?o:null;if(a){for(h=0;h<q;h+=1)(ae=O[h].a)==null||ae.measure();for(h=0;h<q;h+=1)(st=O[h].a)==null||st.fix()}to(t,O,z,l)}}a&&Je(()=>{var at;if(m!==void 0)for(_ of m)(at=_.a)==null||at.apply()}),ct.first=t.first&&t.first.e,ct.last=d&&d.e}function ro(e,t,o,s){s&je&&W(e.v,t),s&et?W(e.i,o):e.i=o}function It(e,t,o,s,v,i,a,n,c){var l=ze;try{var u=(c&je)!==0,r=(c&Dt)===0,f=u?r?Lt(v):vt(v):v,d=c&et?vt(a):a,m={i:d,v:f,k:i,a:null,e:null,prev:o,next:s};return ze=m,m.e=wt(()=>n(e,f,d),F),m.e.prev=o&&o.e,m.e.next=s&&s.e,o===null?t.first=m:(o.next=m,o.e.next=m.e),s!==null&&(s.prev=m,s.e.prev=m.e),m}finally{ze=l}}function ut(e,t,o){for(var s=e.next?e.next.e.nodes_start:o,v=t?t.e.nodes_start:o,i=e.e.nodes_start;i!==s;){var a=Bt(i);v.before(i),i=a}}function ie(e,t,o){t===null?e.first=o:(t.next=o,t.e.next=o&&o.e),o!==null&&(o.prev=t,o.e.prev=t&&t.e)}function no(e,t,o){Wt(()=>{var s=Ft(()=>t(e,o==null?void 0:o())||{});if(s!=null&&s.destroy)return()=>s.destroy()})}let dt=!1;function $t(){dt||(dt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const o of e.target.elements)(t=o.__on_r)==null||t.call(o)})},{capture:!0}))}function ne(e){if(F){var t=!1,o=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;Le(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var v=e.checked;Le(e,"checked",null),e.checked=v}}};e.__on_r=o,Jt(o),$t()}}function Le(e,t,o,s){o=o==null?null:o+"";var v=e.__attributes??(e.__attributes={});F&&(v[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||v[t]!==(v[t]=o)&&(t==="loading"&&(e[Vt]=o),o===null?e.removeAttribute(t):e.setAttribute(t,o))}function y(e,t,o,s,v){var i=e.__attributes??(e.__attributes={}),a=e.style,n="style-"+t;i[n]===o&&!v||(i[n]=o,o==null?a.removeProperty(t):a.setProperty(t,o,""))}function ot(e,t,o,s=o){e.addEventListener(t,o);const v=e.__on_r;v?e.__on_r=()=>{v(),s()}:e.__on_r=s,$t()}function ye(e,t,o){ot(e,"input",()=>{o(_t(e)?ht(e.value):e.value)}),tt(()=>{var s=t();if(F&&e.defaultValue!==e.value){o(e.value);return}_t(e)&&s===ht(e.value)||e.type==="date"&&!s&&!e.value||(e.value=s??"")})}const Ye=new Set;function qe(e,t,o,s,v){var i=o.getAttribute("type")==="checkbox",a=e;let n=!1;if(t!==null)for(var c of t)a=a[c]??(a[c]=[]);a.push(o),ot(o,"change",()=>{var l=o.__value;i&&(l=ft(a,l,o.checked)),v(l)},()=>v(i?[]:null)),tt(()=>{var l=s();if(F&&o.defaultChecked!==o.checked){n=!0;return}i?(l=l||[],o.checked=it(l).includes(it(o.__value))):o.checked=eo(o.__value,l)}),Kt(()=>{var l=a.indexOf(o);l!==-1&&a.splice(l,1)}),Ye.has(a)||(Ye.add(a),Je(()=>{a.sort((l,u)=>l.compareDocumentPosition(u)===4?-1:1),Ye.delete(a)})),Je(()=>{if(n){var l;if(i)l=ft(a,l,o.checked);else{var u=a.find(r=>r.checked);l=u==null?void 0:u.__value}v(l)}})}function ft(e,t,o){for(var s=new Set,v=0;v<e.length;v+=1)e[v].checked&&s.add(e[v].__value);return o||s.delete(t),Array.from(s)}function _t(e){var t=e.type;return t==="number"||t==="range"}function ht(e){return e===""?null:+e}function so(e,t,o){ot(e,"change",()=>{o(e.files)}),tt(()=>{e.files=t()})}const ao=!0,cr=Object.freeze(Object.defineProperty({__proto__:null,prerender:ao},Symbol.toStringTag,{value:"Module"})),J=e=>e.colorIndex!==0,rt=()=>{const e=[[]];for(let t=0;t<fe.v;(t+=1)-1){e[t]=[];for(let o=0;o<de.v;(o+=1)-1)e[t][o]={colorIndex:0,Xed:!1}}return e},kt=()=>{for(let e=0;e<g.numRows;(e+=1)-1)for(let t=0;t<g.numColumns;(t+=1)-1)g.v[e][t].colorIndex>T.v.length-1&&(g.v[e][t].colorIndex=0)},nt=()=>{oe.v!==_e.v.length-1&&_e.v.splice(oe.v+1),oe.v+=1,_e.v.push(Oe(g.v))},Re=()=>{de.v<1||fe.v<1||(g.v=rt(),_e.reset(),_e.v[0]=Oe(g.v),oe.reset(),ue.v=!1)},Ke=e=>{let t=0;for(let o=0;o<e.length;(o+=1)-1)t*=26,t+=e.charCodeAt(o)-97+1;return t-1},Qe=e=>{const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,t&255]},Se=e=>{let t="";for(;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t},P=e=>{let t=be(Ae(e));return{set v(s){W(t,Ae(s))},get v(){return b(t)},reset:()=>W(t,Ae(e))}},yt=()=>{const e=P(Ct),t=te(()=>e.v.length),o=te(()=>e.v[0].length),s=te(()=>e.v.map(n=>n.map(c=>c.colorIndex))),v=te(()=>{const n=[[]],c=e.v.length,l=e.v[0].length;for(let u=0;u<c;(u+=1)-1){n[u]=[{color:"",count:0}];for(let r=0;r<l;(r+=1)-1)if(J(e.v[u][r])){const f=r===0?null:e.v[u][r-1].colorIndex,d=e.v[u][r].colorIndex;f!==d?n[u].push({color:Se(d),count:1}):n[u][n[u].length-1].count+=1}n[u].length>1&&n[u][0].count===0&&n[u].shift()}return n}),i=te(()=>{const n=[[]];for(let c=0;c<b(o);(c+=1)-1){n[c]=[{color:"",count:0}];for(let l=0;l<b(t);(l+=1)-1)if(J(e.v[l][c])){const u=l===0?null:e.v[l-1][c].colorIndex,r=e.v[l][c].colorIndex;u!==r?n[c].push({color:Se(r),count:1}):n[c][n[c].length-1].count+=1}n[c].length>1&&n[c][0].count===0&&n[c].shift()}return n}),a=te(()=>{let n="",c=1;for(let u=0;u<b(t);(u+=1)-1)for(let r=0;r<b(o);(r+=1)-1)if(!(u===0&&r===0)){const f=r===0?e.v[u-1][b(o)-1]:e.v[u][r-1];f.colorIndex===e.v[u][r].colorIndex&&f.Xed===e.v[u][r].Xed?c+=1:(n+=c+(f.Xed?"X":Se(f.colorIndex)),c=1)}const l=e.v[b(t)-1][b(o)-1];return n+=c+(l.Xed?"X":Se(l.colorIndex)),n});return{get colorIndices(){return b(s)},get columnHints(){return b(i)},get numColumns(){return b(o)},get rowHints(){return b(v)},set v(n){e.v=n},get encoded(){return b(a)},get numRows(){return b(t)},get v(){return e.v},reset:e.reset}},ke=P("#476fb8"),T=P(["#f8fafc","#020617"]),xe=P(1),de=P(5),fe=P(5),Ct=rt(),g=yt(),we=yt(),_e=P([Ct]),oe=P(0),G=P(!1),R=P({colorIndex:-1,column:-1,Xed:!1,row:-1}),Te=P(1),Ee=P(!1),ve=P(50),Ze=P(!1),Tt=P(!1),ue=P(!1);var Ie=Y(()=>fe),$e=Y(()=>de),Ue=Y(()=>G),lo=$("<button>New Editor</button>"),co=$('<div class="svelte-16du0in"><input type="text" class="svelte-16du0in"> <input type="text" class="svelte-16du0in"></div>'),vo=$('<div class="svelte-16du0in"><!></div>');function io(e,t){U(t,!1);const o=i=>Math.max(0,Number(String(i).replace(/[^0-9]/g,"")));me();var s=vo(),v=A(s);K(v,()=>Ue().v,i=>{var a=lo();a.__click=()=>{Ue(Ue().v=!1),Re()},I(i,a)},i=>{var a=co(),n=A(a);ne(n),n.__input=()=>{$e($e().v=o($e().v)),Re()};var c=M(n,2);ne(c),c.__input=()=>{Ie(Ie().v=o(Ie().v)),Re()},S(a),ye(n,()=>$e().v,l=>$e($e().v=l)),ye(c,()=>Ie().v,l=>Ie(Ie().v=l)),I(i,a)}),S(s),I(e,s),B()}se(["click","input"]);const uo=(e,t)=>{t(g.colorIndices,T.v,o=>{const s=document.createElement("a");s.download="shareogram.png",s.href=o,s.click()})};var fo=$("<button>Export as PNG</button>");function _o(e,t){U(t,!1);const o=(v,i,a)=>{const n=v[0].length,c=v.length,l=document.createElement("canvas");l.width=n,l.height=c;const u=l.getContext("2d");if(u){const r=u.createImageData(n,c);for(let d=0;d<c;(d+=1)-1)for(let m=0;m<n;(m+=1)-1){const w=i[v[d][m]],p=Qe(w);if(p){const[N,E,_]=p,h=(d*n+m)*4;r.data[h]=N,r.data[h+1]=E,r.data[h+2]=_,r.data[h+3]=255}}u.putImageData(r,0,0);const f=l.toDataURL("image/png");a(f)}};me();var s=fo();s.__click=[uo,o],I(e,s),B()}se(["click"]);var ho=$('<input type="range" max="442" min="10">'),mo=$('<input accept="image/png" id="file-upload" type="file" class="svelte-nlo4k4"> <!>',1);function po(e,t){U(t,!0);let o=be(10),s=be(void 0);const v=(r,f,d)=>{const[m,w,p]=r,[N,E,_]=f;return Math.sqrt((m-N)**2+(w-E)**2+(p-_)**2)<=d},i=(r,f,d)=>"#"+[r,f,d].map(m=>Math.round(m).toString(16).padStart(2,"0")).join(""),a=(r,f,d)=>{const m=Qe(r);for(let w=0;w<f.length;(w+=1)-1){const p=Qe(f[w]);if(v(m,p,d))return w}return f.push(r),f.length-1},n=(r,f,d)=>{const m=new FileReader;m.onload=w=>{var N;const p=new Image;p.onload=()=>{const E=document.createElement("canvas"),_=E.getContext("2d");if(_){E.width=p.width,E.height=p.height,_.drawImage(p,0,0);const h=_.getImageData(0,0,p.width,p.height).data,x=[],H=[];for(let X=0;X<p.height;(X+=1)-1){const D=[];for(let k=0;k<p.width;(k+=1)-1){const O=(X*p.width+k)*4,q=h[O],z=h[O+1],C=h[O+2],L=i(q,z,C),ae=a(L,x,f);D.push(ae)}H.push(D)}d(H,x)}},p.src=(N=w.target)==null?void 0:N.result},m.readAsDataURL(r)};De(()=>{b(s)&&n(b(s)[0],b(o),(r,f)=>{de.v=r[0].length,fe.v=r.length,T.v=f,xe.v=0,g.v=rt();for(let d=0;d<g.numRows;(d+=1)-1)for(let m=0;m<g.numColumns;(m+=1)-1)g.v[d][m].colorIndex=r[d][m];nt()})});var c=mo(),l=Xe(c),u=M(l,2);K(u,()=>b(s),r=>{var f=ho();ne(f),ye(f,()=>b(o),d=>W(o,d)),I(r,f)}),so(l,()=>b(s),r=>W(s,r)),I(e,c),B()}var le=Y(()=>Ee),Be=Y(()=>xe),We=Y(()=>ke),ce=Y(()=>T),go=$('<button class="svelte-1x4wuow">-</button>'),bo=$('<!> <button class="svelte-1x4wuow">+</button>',1),xo=$('<input type="color" class="svelte-1x4wuow">'),wo=$('<div class="svelte-1x4wuow"><div class="svelte-1x4wuow"><!></div> <div class="svelte-1x4wuow"><input type="color" class="svelte-1x4wuow"> <!></div></div>');function Io(e,t){U(t,!1);const o=()=>{const u="0123456789abcdef";let r="#";for(let f=0;f<6;(f+=1)-1){const d=Math.floor(Math.random()*u.length);r+=u[d]}return r},s=()=>ce().v.length>2;me();var v=wo(),i=A(v),a=A(i);K(a,()=>!G.v,u=>{var r=bo(),f=Xe(r);K(f,s,m=>{var w=go();w.__click=()=>{ce().v.pop(),Be().v>ce().v.length-1&&Be(Be().v-=1),kt()},I(m,w)});var d=M(f,2);d.__click=()=>{ce().v.push(o())},I(u,r)}),S(i);var n=M(i,2),c=A(n);ne(c),c.__change=()=>{le(le().v=!0)},c.__click=()=>{le(le().v=!1)};var l=M(c,2);ge(l,1,()=>ce().v,pe,(u,r,f)=>{var d=xo();ne(d),d.__change=()=>{le(le().v=!0)},d.__click=()=>{le(le().v=!1)},ye(d,()=>ce().v[f],m=>ce(ce().v[f]=m)),I(u,d)}),S(n),S(v),ye(c,()=>We().v,u=>We(We().v=u)),I(e,v),B()}se(["click","change"]);var Q=Y(()=>Te),$o=$('<input name="border" type="radio" class="svelte-soh54d">'),ko=$('<div class="svelte-soh54d"><input name="border" type="radio" class="svelte-soh54d"> <input name="border" type="radio" class="svelte-soh54d"> <!></div>');function yo(e,t){U(t,!1);const o=[];me();var s=ko(),v=A(s);ne(v),v.value=(v.__value=0)==null?"":0;var i=M(v,2);ne(i),i.value=(i.__value=1)==null?"":1;var a=M(i,2);K(a,()=>de.v>5||fe.v>5,n=>{var c=$o();ne(c),c.value=(c.__value=2)==null?"":2,qe(o,[],c,()=>Q().v,l=>Q(Q().v=l)),I(n,c)}),S(s),qe(o,[],v,()=>Q().v,n=>Q(Q().v=n)),qe(o,[],i,()=>Q().v,n=>Q(Q().v=n)),I(e,s),B()}var Z=Y(()=>ve),Co=$('<input type="range" class="svelte-1wz0dqh">');function To(e,t){U(t,!1);const o=100,s=10,v=a=>{a.preventDefault(),a.deltaY<0&&Z().v<o?Z(Z().v+=5):a.deltaY>0&&Z().v>s&&Z(Z().v-=5)};me();var i=Co();re("wheel",he,v,void 0,!1),ne(i),Le(i,"max",o),Le(i,"min",s),ye(i,()=>Z().v,a=>Z(Z().v=a)),I(e,i),B()}var Fe=Y(()=>Tt),Eo=$("<!> <!>",1),Xo=$('<div class="svelte-17ypq31"><!> <!> <!> <!> <!> <button>Close Options</button></div>');function So(e,t){U(t,!1),me();var o=Xo(),s=A(o);K(s,()=>!G.v,l=>{var u=Eo(),r=Xe(u);po(r,{});var f=M(r,2);_o(f,{}),I(l,u)});var v=M(s,2);io(v,{});var i=M(v,2);Io(i,{});var a=M(i,2);yo(a,{});var n=M(a,2);To(n,{});var c=M(n,2);c.__click=()=>{Fe(Fe().v=!1)},S(o),V(()=>y(o,"display",Fe().v?"flex":"none")),I(e,o),B()}se(["click"]);var Mo=$("<div> </div>"),No=$('<th class="svelte-16s63u3"></th>'),Ao=$('<thead><tr><th class="svelte-16s63u3"></th><!></tr></thead>'),Ho=$("<div> </div>"),Ro=$("<td></td>"),Do=$("<td> </td>"),Lo=$("<tr><!><!></tr>"),Oo=$('<table class="svelte-16s63u3"><!><tbody></tbody></table>');function Go(e,t){U(t,!0);let o=be(!1),s=be(!1),v=be(""),i=be(0);const a=(_,h,x,H)=>{const X=Math.abs(_-x),D=Math.abs(h-H);return X===0&&D===1?H>h?"right":"left":X===1&&D===0?x>_?"below":"above":"not adjacent"},n=_=>_.Xed,c=_=>_.colorIndex===xe.v,l=(_,h)=>{_.colorIndex=h},u=_=>{_.colorIndex=0},r=_=>{_.Xed=!_.Xed},f=(_,h,x)=>{R.v={colorIndex:g.v[h][x].colorIndex,Xed:g.v[h][x].Xed,column:x,row:h},Ee.v=!1,W(i,0),G.v?_.button===0?ue.v&&!J(g.v[h][x])?r(g.v[h][x]):!ue.v&&!n(g.v[h][x])&&(c(g.v[h][x])?u(g.v[h][x]):l(g.v[h][x],xe.v)):_.button===2&&(J(g.v[h][x])?u(g.v[h][x]):r(g.v[h][x])):_.button===0?l(g.v[h][x],xe.v):_.button===2&&u(g.v[h][x])},d=_=>{_.button===0?W(o,!0):_.button===2&&W(s,!0)},m=_=>{_.button===0?W(o,!1):_.button===2&&W(s,!1),Ee.v=!0},w=(_,h)=>{if(!b(o)&&!b(s)||b(o)&&b(s)||R.v.row===-1)return;Qt(i),b(i)===1&&W(v,Ae(a(R.v.row,R.v.column,_,h)));const x=g.v[R.v.row][R.v.column];if(G.v)if(b(v)==="above"||b(v)==="below"){const H=Math.min(R.v.row,_),X=Math.max(R.v.row,_);for(let D=H;D<X+1;(D+=1)-1){const k=g.v[D][R.v.column];b(o)?ue.v&&!J(k)?k.Xed=x.Xed:!ue.v&&!n(k)&&l(k,x.colorIndex):R.v.Xed&&!J(k)?k.Xed=!1:R.v.colorIndex===0&&!J(k)?k.Xed=!0:R.v.colorIndex!==0&&!n(k)&&u(k)}}else{const H=Math.min(R.v.column,h),X=Math.max(R.v.column,h);for(let D=H;D<X+1;(D+=1)-1){const k=g.v[R.v.row][D];b(o)?ue.v&&!J(k)?k.Xed=x.Xed:!ue.v&&!n(k)&&l(k,x.colorIndex):R.v.Xed&&!J(k)?k.Xed=!1:R.v.colorIndex===0&&!J(k)?k.Xed=!0:R.v.colorIndex!==0&&!n(k)&&u(k)}}else b(o)?l(g.v[_][h],xe.v):u(g.v[_][h])};var p=Oo();re("mousedown",he,d),re("mouseup",he,m);var N=A(p);K(N,()=>G.v,_=>{var h=Ao(),x=A(h),H=M(A(x));ge(H,17,()=>({length:g.numColumns}),pe,(X,D,k)=>{var O=No();ge(O,21,()=>we.columnHints[k],pe,(q,z)=>{var C=Mo();V(()=>y(C,"color",T.v[Ke(b(z).color)]));var L=A(C);S(C),V(()=>{y(C,"font-size",ve.v/1.5+"px"),Ne(L,b(z).count)}),I(q,C)}),S(O),I(X,O)}),S(x),S(h),I(_,h)});var E=M(N);ge(E,21,()=>({length:g.numRows}),pe,(_,h,x)=>{var H=Lo(),X=A(H);K(X,()=>G.v,O=>{var q=Ro();y(q,"justify-content","right"),y(q,"display","flex"),ge(q,21,()=>we.rowHints[x],pe,(z,C)=>{var L=Ho();V(()=>y(L,"color",T.v[Ke(b(C).color)])),y(L,"justify-content","center"),y(L,"align-items","center"),y(L,"display","flex");var ae=A(L);S(L),V(()=>{y(L,"font-size",ve.v/1.5+"px"),y(L,"min-width",ve.v+"px"),y(L,"height",ve.v+"px"),Ne(ae,b(C).count)}),I(z,L)}),S(q),I(O,q)});var D=M(X);ge(D,17,()=>({length:g.numColumns}),pe,(O,q,z)=>{var C=Do();C.__mousedown=ae=>{f(ae,x,z)},y(C,"transition","background-color .5s"),y(C,"text-align","center");var L=A(C);V(()=>Ne(L,n(g.v[x][z])?"X":"")),S(C),V(()=>{y(C,"border-left",Te.v===0?"0":`solid ${z%5===0&&z!==0&&Te.v===2?`4px ${T.v[1]}`:`2px ${ke.v}`}`),y(C,"border-top",Te.v===0?"0":`solid ${x%5===0&&x!==0&&Te.v===2?`4px ${T.v[1]}`:`2px ${ke.v}`}`),y(C,"background-color",T.v[g.v[x][z].colorIndex]),y(C,"font-size",ve.v/1.5+"px"),y(C,"min-width",ve.v+"px"),y(C,"height",ve.v+"px"),y(C,"color",T.v[1])}),re("mouseenter",C,()=>{w(x,z)}),I(O,C)}),S(H),I(_,H)}),S(E),S(p),I(e,p),B()}se(["mousedown"]);var Po=$('<div class="svelte-r2sle7"><button class="svelte-r2sle7">Undo</button> <button class="svelte-r2sle7">Redo</button></div>');function zo(e,t){U(t,!0);const o=()=>{R.v.row!==-1&&nt(),R.reset()},s=u=>{u.key==="z"?i():u.key==="y"&&a()},v=()=>{g.v=Oe(_e.v[oe.v]),kt()},i=()=>{oe.v!==0&&(oe.v-=1,v())},a=()=>{oe.v!==_e.v.length-1&&(oe.v+=1,v())};var n=Po();re("keydown",he,s),re("mouseup",he,o);var c=A(n);c.__click=i;var l=M(c,2);l.__click=a,S(n),I(e,n),B()}se(["click"]);var j=Y(()=>xe),ee=Y(()=>ue),Yo=$('<button class="svelte-7gpg2x"></button>'),qo=$('<button class="svelte-7gpg2x">X</button>'),Uo=$('<div class="svelte-7gpg2x"><!> <!></div>');function Bo(e,t){U(t,!1);const o=a=>{/[1-9]/.test(a.key)&&Number(a.key)<=T.v.length?(ee(ee().v=!1),j(j().v=Number(a.key)-1)):a.key==="x"&&G.v&&(ee(ee().v=!0),j(j().v=-1))};me();var s=Uo();re("keydown",he,o);var v=A(s);ge(v,1,()=>T.v,pe,(a,n,c)=>{var l=Yo();l.__click=()=>{j(j().v=c),ee(ee().v=!1)},l.textContent=c+1,V(()=>{y(l,"border",`solid 2px ${c===j().v?c===0?T.v[1]:T.v[0]:T.v[c]}`),y(l,"--max-h",(T.v.length>4?"2":"6")+"rem"),y(l,"color",c===0?T.v[1]:T.v[0]),y(l,"background-color",T.v[c])}),I(a,l)});var i=M(v,2);K(i,()=>G.v,a=>{var n=qo();n.__click=()=>{ee(ee().v=!0),j(j().v=-1)},V(()=>{y(n,"border",`solid 2px ${ee().v?T.v[1]:"ButtonFace"}`),y(n,"--max-h",(T.v.length>4?"2":"6")+"rem")}),I(a,n)}),S(s),I(e,s),B()}se(["click"]);var Wo=$('<footer class="svelte-6v3vqk"><div><!> <!></div></footer>');function Fo(e){var t=Wo(),o=A(t),s=A(o);Bo(s,{});var v=M(s,2);zo(v,{}),S(o),S(t),I(e,t)}var Vo=$("<button>Reveal Tile</button>");function Jo(e,t){U(t,!0);const o=(c,l)=>Math.floor(Math.random()*(l-c+1)+c),s=te(()=>{const c=[];let l=!0;const u=g.numRows,r=g.numColumns;for(let f=0;f<u;(f+=1)-1)for(let d=0;d<r;(d+=1)-1)we.v[f][d].colorIndex!==g.v[f][d].colorIndex&&(c.push({column:d,row:f}),l=!1);return{isDifferent:c,allSame:l}}),v=te(()=>b(s).isDifferent),i=te(()=>b(s).allSame);De(()=>{Ze.v=b(i)});const a=()=>{if(!Ze.v){const c=o(0,b(v).length-1),l=b(v)[c].row,u=b(v)[c].column;g.v[l][u]={colorIndex:we.v[l][u].colorIndex,Xed:!1},nt()}};var n=Vo();n.__click=a,I(e,n),B()}se(["click"]);var mt=Y(()=>we),Ve=Y(()=>Tt),Me=Y(()=>G),Ko=$("<span> </span> <!>",1),Qo=$("<button>Start Game</button>"),Zo=$('<header class="svelte-1x7vlvi"><button>Options</button> <!></header>');function jo(e,t){U(t,!1),me();var o=Zo(),s=A(o);s.__click=()=>{Ve(Ve().v=!Ve().v)},y(s,"margin-right","4px");var v=M(s,2);K(v,()=>Me().v,i=>{var a=Ko(),n=Xe(a),c=A(n);S(n);var l=M(n,2);Jo(l,{}),V(()=>Ne(c,Ze.v?"You win!":"Keep trying")),I(i,a)},i=>{var a=Qo();a.__click=()=>{Me(Me().v=!0),mt(mt().v=g.v),Re()},I(i,a)}),S(o),V(()=>y(o,"justify-content",Me().v?"space-between":"center")),I(e,o),B()}se(["click"]);const er=e=>{let t=!1,o,s,v,i;const a=l=>{l.button===1&&(l.preventDefault(),t=!0,o=l.pageX-e.offsetLeft,s=l.pageY-e.offsetTop,v=e.scrollLeft,i=e.scrollTop,e.style.cursor="grabbing",document.addEventListener("mousemove",n),document.addEventListener("mouseup",c))},n=l=>{if(!t)return;l.preventDefault();const u=l.pageX-e.offsetLeft,r=l.pageY-e.offsetTop,f=(u-o)*2,d=(r-s)*2;e.scrollLeft=v-f,e.scrollTop=i-d},c=()=>{t=!1,e.style.cursor="",document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",c)};return e.addEventListener("mousedown",a),{destroy:()=>{e.removeEventListener("mousedown",a),e.style.cursor=""}}};var tr=$('<!> <main class="svelte-o8ujkf"><!></main> <!> <!>',1);function vr(e,t){U(t,!0);const o=r=>{const f=r.match(/(\d+|[a-zX]+)/g),d=[],m=[];if(f)for(let w=0;w<f.length;(w+=1)-1){const p=f[w];isNaN(Number(p))?m.push(p):d.push(Number(p))}if(d.length!==m.length)throw new Error("Error: different number of counts and letters.");return{letters:m,numbers:d}},s=r=>{const f=o(r),d=[];let m=0,w=0;for(let p=0;p<fe.v;(p+=1)-1)d[p]=[];for(let p=0;p<f.numbers.length;(p+=1)-1)for(let N=0;N<f.numbers[p];(N+=1)-1)f.letters[p]==="X"?d[m][(w+=1)-1]={colorIndex:0,Xed:!0}:d[m][(w+=1)-1]={colorIndex:Ke(f.letters[p]),Xed:!1},w>de.v-1&&(m+=1,w=0);return d},v=()=>{if(window.location.hash){try{const r=window.location.hash.slice(1).split("-");G.v=!!Number(r[0]),de.v=Number(r[1]),fe.v=Number(r[2]),ke.v="#"+r[3];const f=G.v?r.slice(4,-2):r.slice(4,-1);for(let d=0;d<f.length;(d+=1)-1)T.v[d]="#"+f[d];g.v=s(r[G.v?r.length-2:r.length-1]),_e.v[0]=Oe(g.v),G.v&&(we.v=s(r[r.length-1]))}catch{alert("Couldn't load the code from the URL. Make sure you copied the link correctly.")}Ee.v=!0}};De(()=>{if(Ee.v){const r=[Number(G.v),de.v,fe.v,ke.v.slice(1)];for(let f=0;f<T.v.length;(f+=1)-1)r.push(T.v[f].slice(1));r.push(g.encoded),G.v&&r.push(we.encoded),window.location.hash=r.join("-")}}),De(()=>{document.body.style.backgroundColor=ke.v,document.body.style.color=T.v[0]});var i=tr();jt(r=>{Zt.title="Shareogram"}),re("contextmenu",he,r=>r.preventDefault()),re("load",he,v);var a=Xe(i);jo(a,{});var n=M(a,2),c=A(n);Go(c,{}),S(n);var l=M(n,2);So(l,{});var u=M(l,2);Fo(u),no(n,r=>er(r)),I(e,i),B()}export{vr as component,cr as universal};
