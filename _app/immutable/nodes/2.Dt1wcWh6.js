import{l as lt,h as W,n as Ne,o as Xe,b as pe,p as rt,d as nt,q as me,r as ie,a as w,t as y,$ as be,g as j,i as h,e as fe,f as ge,v as ot,w as ut}from"../chunks/disclose-version.DskMrnCl.js";import{v as vt,a6 as Ge,l as Ue,H as st,w as it,G as ct,x as Ve,y as Je,z as ft,a7 as dt,M as _t,a8 as de,s as G,a9 as je,aa as Ae,n as mt,a as $,ab as ht,ac as bt,ad as gt,ae as xt,i as wt,h as yt,af as pt,ag as It,ah as Ct,X as Qe,g as N,a2 as xe,C as ee,b as We,F as te,ai as k,D as O}from"../chunks/runtime.B-voh4SI.js";import{p as B,i as F,s as we}from"../chunks/if.CD2rI8m4.js";import{i as kt}from"../chunks/lifecycle.e8NTOEYm.js";import{r as Oe}from"../chunks/misc.BYov-51Q.js";let Ie=null;function V(e,t){return t}function Tt(e,t,a){for(var r=[],o=e.length,s=0;s<o;s++)ht(e[s].e,r,!0);var f=o>0&&r.length===0&&t!==null;if(f){var x=t.parentNode;rt(x),x.append(t),a.clear(),q(e[0].prev,e[o-1].next)}bt(r,()=>{for(var m=0;m<o;m++){var v=e[m];f||(a.delete(v.k),q(v.prev,v.next)),gt(v.e,!f)}})}function J(e,t,a,r,o,s=null){var f={flags:t,items:new Map,next:null},x=(t&Ge)!==0;if(x){var m=e;e=W?Ne(m.firstChild):m.appendChild(lt())}var v=null;vt(()=>{var i=a(),l=Ue(i)?i:i==null?[]:Array.from(i),n=l.length,u=f.flags;u&Ae&&!wt(l)&&!(yt in l)&&(u^=Ae,u&pt&&!(u&de)&&(u^=de));let S=!1;if(W){var C=e.data===st;(C!==(n===0)||Xe===void 0)&&(it(nt),pe(!1),S=!0)}if(W){for(var b=Xe,E=f,p,d=0;d<n;d++){if(b.nodeType!==8||b.data!==ct){S=!0,pe(!1);break}b=Ne(b);var c=l[d],I=r(c,d);p=Ze(b,E,null,c,I,d,o,u),f.items.set(I,p),b=b.nextSibling,E=p}if(n>0)for(;b!==e;){var A=b.nextSibling;b.remove(),b=A}}W||Et(l,f,e,o,u,r),s!==null&&(n===0?v?Ve(v):v=Je(()=>s(e)):v!==null&&ft(v,()=>{v=null})),S&&pe(!0)})}function Et(e,t,a,r,o,s){var he,Re,Me,De;var f=(o&xt)!==0,x=(o&(de|je))!==0,m=e.length,v=t.items,i=t.next,l=i,n=new Set,u=t,S=new Set,C=[],b=[],E,p,d,c;if(f)for(c=0;c<m;c+=1)E=e[c],p=s(E,c),d=v.get(p),d!==void 0&&((he=d.a)==null||he.measure(),S.add(d));for(c=0;c<m;c+=1){if(E=e[c],p=s(E,c),d=v.get(p),d===void 0){var I=l?ce(l.e):a;u=Ze(I,u,u.next,E,p,c,r,o),v.set(p,u),C=[],b=[],l=u.next;continue}if(x&&At(d,E,c,o),d.e.f&dt&&(Ve(d.e),f&&((Re=d.a)==null||Re.unfix(),S.delete(d))),d!==l){if(n.has(d)){if(C.length<b.length){var A=b[0],M;u=A.prev;var D=C[0],H=C[C.length-1];for(M=0;M<C.length;M+=1)Le(C[M],A,a);for(M=0;M<b.length;M+=1)n.delete(b[M]);q(D.prev,H.next),q(u,D),q(H,A),l=A,u=H,c-=1,C=[],b=[]}else n.delete(d),Le(d,l,a),q(d.prev,d.next),q(d,u.next),q(u,d),u=d;continue}for(C=[],b=[];l!==null&&l.k!==p;)n.add(l),b.push(l),l=l.next;if(l===null)continue;d=l}C.push(d),u=d,l=d.next}const U=Array.from(n);for(;l!==null;)U.push(l),l=l.next;var ve=U.length;if(ve>0){var se=o&Ge&&m===0?a:null;if(f){for(c=0;c<ve;c+=1)(Me=U[c].a)==null||Me.measure();for(c=0;c<ve;c+=1)(De=U[c].a)==null||De.fix()}Tt(U,se,v)}f&&_t(()=>{var He;for(d of S)(He=d.a)==null||He.apply()})}function At(e,t,a,r){r&de&&G(e.v,t),r&je?G(e.i,a):e.i=a}function Ze(e,t,a,r,o,s,f,x){var m=Ie;try{var v=(x&de)!==0,i=(x&Ae)===0,l=v?i?mt(r):$(r):r,n=x&je?$(s):s,u={i:n,v:l,k:o,a:null,e:null,prev:t,next:a};return t.next=u,a!==null&&(a.prev=u),Ie=u,u.e=Je(()=>f(e,l,n)),u}finally{Ie=m}}function ze(e,t){if(e.nodeType===3&&e.data===""||e.nodeType===8){for(var a=t.first,r;a!==null&&(r=a.first,a.dom===null);){if(r===null)return e.previousSibling;a=r}return ce(a)}return e}function ce(e){var t=e.dom;return Ue(t)?ze(t[0],e):ze(t,e)}function Le(e,t,a){for(var r=e.next?ce(e.next.e):a,o=t?ce(t.e):a,s=ce(e.e);s!==r;){var f=s.nextSibling;o.before(s),s=f}}function q(e,t){e.next=t,t!==null&&(t.prev=e)}let Fe=!1;function $e(){Fe||(Fe=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const a of e.target.elements)(t=a.__on_r)==null||t.call(a)})},{capture:!0}))}function Z(e){if(W){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;Y(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;Y(e,"checked",null),e.checked=o}}};e.__on_r=a,It(a),$e()}}function Y(e,t,a){a=a==null?null:a+"";var r=e.__attributes??(e.__attributes={});W&&(r[t]=e.getAttribute(t),t==="src"||t==="href"||t==="srcset")||r[t]!==(r[t]=a)&&(t==="loading"&&(e[Ct]=a),a===null?e.removeAttribute(t):e.setAttribute(t,a))}function et(e,t,a,r=a){e.addEventListener(t,a);const o=e.__on_r;o?e.__on_r=()=>{o(),r()}:e.__on_r=r,$e()}function _e(e,t,a){et(e,"input",()=>{a(Pe(e)?Ye(e.value):e.value)}),Qe(()=>{var r=t();if(W&&e.defaultValue!==e.value){a(e.value);return}Pe(e)&&r===Ye(e.value)||e.type==="date"&&!r&&!e.value||(e.value=r??"")})}function Be(e,t,a){et(e,"change",()=>{var r=e.checked;a(r)}),t()==null&&a(!1),Qe(()=>{var r=t();e.checked=!!r})}function Pe(e){var t=e.type;return t==="number"||t==="range"}function Ye(e){return e===""?null:+e}const jt=!0,Ia=Object.freeze(Object.defineProperty({__proto__:null,prerender:jt},Symbol.toStringTag,{value:"Module"})),St=(e,t,a,r)=>{const o=Math.abs(e-a),s=Math.abs(t-r);return o===1&&s===0?a>e?"below":"above":o===0&&s===1?r>t?"right":"left":"not adjacent"};function tt(e=6){const t="0123456789ABCDEF";let a="#";for(let r=0;r<e;r++){const o=Math.floor(Math.random()*t.length);a+=t[o]}return a}function le(e){return e===0?"":String.fromCharCode(96+e)}function Ke(e){return e===""?0:e.charCodeAt(0)-96}function Rt(e){return parseInt(e,16)}function Mt(e,t){return e.map(a=>a.map(r=>r[t]))}function Dt(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++){if(e[a].length!==t[a].length)return!1;for(let r=0;r<e[a].length;r++)if(e[a][r]!==t[a][r])return!1}return!0}function Ht(e){if(e<0||e>15)throw new Error("Number out of range (0-15)");return e.toString(16).toUpperCase()}function Nt(e){return e.flat().map(Ht).join("")}const Q=(e,t)=>_.value[e][t].colorIndex!==0,Ce=()=>T.value.length>2;function Se(e,t,a){const r=[[]];let o=0;if(e<=50&&e>0&&t<=50&&t>0)for(let s=0;s<t;s++){r[s]=[];for(let f=0;f<e;f++)if(a){const x=Rt(a[o]);if(T.value.length-1<x)for(let m=T.value.length-1;m<x;m++)T.value.push(tt());r[s][f]={colorIndex:a[o]!==void 0?x:0,Xed:!1},o++}else r[s][f]={colorIndex:0,Xed:!1}}return r}function ke(){for(let e=0;e<_.numRows;e++)for(let t=0;t<_.numRows;t++)_.value[e][t].colorIndex>T.value.length-1&&(_.value[e][t].colorIndex=0)}const qe=e=>JSON.parse(JSON.stringify(e));function R(e){const t=typeof e=="object";let a=$(B(t?qe(e):e));return{get value(){return N(a)},set value(o){G(a,B(o))},reset:()=>G(a,B(t?qe(e):e))}}function Xt(e){const t=R(at),a=xe(()=>t.value.length),r=xe(()=>t.value[0].length);return{get value(){return t.value},set value(o){t.value=o},reset:t.reset,get numRows(){return N(a)},get numColumns(){return N(r)}}}const T=R(["#f8fafc","#020617"]),re=R(1),z=R(5),L=R(5),at=Se(z.value,L.value),_=Xt(),P=R([at]),X=R(0),ne=R(!1),oe=R(!1),K=R(!1),g=R({row:-1,column:-1}),ae=R({row:-1,column:-1}),Te=R(""),Ee=R(0),Ot=R(""),ye=R(!0),ue=R(!1);var zt=y('<label class="svelte-1co30ep"> </label>'),Lt=y('<button class="svelte-1co30ep"><!></button>'),Ft=y('<div class="middle svelte-1co30ep"></div>'),Bt=y('<input type="color" class="svelte-1co30ep">'),Pt=y('<button class="svelte-1co30ep">-</button>'),Yt=y('<button class="svelte-1co30ep">+</button>'),Kt=y("<!> <!>",1),qt=y('<input type="checkbox" class="svelte-1co30ep">'),Gt=y('<input type="checkbox" class="svelte-1co30ep">'),Ut=y('<header class="svelte-1co30ep"><div class="svelte-1co30ep"><div class="left svelte-1co30ep"><button id="undo" class="svelte-1co30ep">Undo</button> <span class="svelte-1co30ep">Ctrl + z</span></div> <div class="left svelte-1co30ep"><button id="undo" class="svelte-1co30ep">Redo</button> <span class="svelte-1co30ep">Ctrl + y</span></div></div> <!> <div class="svelte-1co30ep"><div style="width: 40rem; display: flex; flex-wrap: wrap; justify-content: right" class="svelte-1co30ep"><input type="color" class="svelte-1co30ep"> <!></div> <!> <!> <!></div></header>');function Vt(e,t){ee(t,!0);function a(){X.value!==0&&(X.value--,_.value=we(P.value[X.value])),ke()}function r(){X.value!==P.value.length-1&&(X.value++,_.value=we(P.value[X.value])),ke()}function o(c){c.ctrlKey&&c.key==="z"?a():c.ctrlKey&&c.key==="y"&&r()}let s=$("#476FB8");We(()=>{document.body.style.backgroundColor=N(s),document.body.style.color=T.value[0]});var f=Ut();ie("keydown",be,o,!1);var x=j(f),m=j(x),v=j(m);v.__click=a;var i=h(h(m,!0)),l=j(i);l.__click=r;var n=h(h(x,!0));F(n,Ce,c=>{var I=Ft();J(I,73,()=>T.value,V,(A,M,D)=>{var H=Lt();H.__click=()=>{re.value=k(D)};var U=j(H);F(U,()=>k(D)!==0&&ue.value,ve=>{var se=zt(),he=j(se);O(()=>fe(he,le(k(D)))),O(()=>Y(se,"for",T.value[k(D)])),w(ve,se)}),O(()=>Y(H,"style",`background-color: ${T.value[k(D)]??""}; color: ${T.value[0]??""};`)),w(A,H)}),w(c,I)});var u=h(h(n,!0)),S=j(u),C=j(S);Z(C);var b=h(h(C,!0));J(b,65,()=>T.value,V,(c,I,A)=>{var M=Bt();Z(M),_e(M,()=>T.value[k(A)],D=>T.value[k(A)]=D),w(c,M)});var E=h(h(S,!0));F(E,()=>!K.value,c=>{var I=Kt(),A=ge(I);F(A,Ce,D=>{var H=Pt();H.__click=()=>{T.value.pop(),re.value=1,ke()},w(D,H)});var M=h(h(A,!0));F(M,()=>T.value.length<16,D=>{var H=Yt();H.__click=()=>{T.value.push(tt())},w(D,H)}),w(c,I)});var p=h(h(E,!0));F(p,Ce,c=>{var I=qt();Z(I),Be(I,()=>ue.value,A=>ue.value=A),w(c,I)});var d=h(h(p,!0));F(d,()=>_.numRows>5||_.numColumns>5,c=>{var I=Gt();Z(I),Be(I,()=>ye.value,A=>ye.value=A),w(c,I)}),_e(C,()=>N(s),c=>G(s,c)),w(e,f),te()}me(["click"]);var Jt=y('<button class="svelte-o41zl3"> </button>');function Qt(e,t){ee(t,!0);const a=(l,n)=>_.value[l][n].Xed,r=(l,n)=>_.value[l][n].colorIndex===re.value;function o(l,n,u){_.value[l][n].colorIndex=u}function s(l,n){_.value[l][n].colorIndex=0}function f(l,n){_.value[l][n].Xed=!_.value[l][n].Xed}function x(l){K.value?l.button===0&&!a(t.i,t.j)?r(t.i,t.j)?o(t.i,t.j,0):o(t.i,t.j,re.value):l.button===2&&!Q(t.i,t.j)&&f(t.i,t.j):l.button===0&&!r(t.i,t.j)?o(t.i,t.j,re.value):s(t.i,t.j),g.value={row:t.i,column:t.j},Ee.reset()}function m(){if(!(!ne.value&&!oe.value||ne.value&&oe.value||g.value.row===-1))if(Ee.value++,ae.value={row:t.i,column:t.j},Ee.value===1&&(Te.value=St(g.value.row,g.value.column,t.i,t.j)),K.value)if(Te.value==="above"||Te.value==="below"){const l=Math.min(g.value.row,ae.value.row),n=Math.max(g.value.row,ae.value.row);for(let u=l;u<n+1;u++)ne.value&&!a(u,g.value.column)?o(u,g.value.column,_.value[g.value.row][g.value.column].colorIndex):oe.value&&!Q(u,g.value.column)&&(_.value[u][g.value.column].Xed=_.value[g.value.row][g.value.column].Xed)}else{const l=Math.min(g.value.column,ae.value.column),n=Math.max(g.value.column,ae.value.column);for(let u=l;u<n+1;u++)ne.value&&!a(g.value.row,u)?o(g.value.row,u,_.value[g.value.row][g.value.column].colorIndex):oe.value&&!Q(g.value.row,u)&&(_.value[g.value.row][u].Xed=_.value[g.value.row][g.value.column].Xed)}else Q(g.value.row,g.value.column)?o(t.i,t.j,re.value):s(t.i,t.j)}var v=Jt();v.__mousedown=x,O(()=>Y(v,"style",`
		background-color: ${T.value[_.value[t.i][t.j].colorIndex]??""};
		color: ${(Q(t.i,t.j)?T.value[0]:T.value[1])??""};
	`));var i=j(v);O(()=>fe(i,a(t.i,t.j)?"X":ue.value?le(_.value[t.i][t.j].colorIndex):"")),ie("mouseenter",v,m,!1),w(e,v),te()}me(["mousedown"]);var Wt=y("<div> </div>"),Zt=y('<th class="svelte-m9mt2b"></th>'),$t=y('<thead><tr><th class="svelte-m9mt2b"></th><!></tr></thead>'),ea=y("<div> </div>"),ta=y('<td style="display: flex; align-items: center; justify-content: right; height: var(--tile-width)" class="svelte-m9mt2b"></td>'),aa=y('<td class="svelte-m9mt2b"><!></td>'),la=y("<tr><!><!></tr>"),ra=y('<table class="svelte-m9mt2b"><!><tbody></tbody></table>');function na(e,t){ee(t,!0);function a(v){const i=[[]];for(let l=0;l<_.numRows;l++){i[l]=[{count:0,color:""}];for(let n=0;n<_.numColumns;n++)Q(l,n)&&(n!==0&&v[l][n].colorIndex!==v[l][n-1].colorIndex?i[l].push({count:1,color:le(v[l][n].colorIndex)}):(i[l][i[l].length-1].count++,i[l][i[l].length-1].color=le(v[l][n].colorIndex)));i[l].length>1&&i[l][0].count===0&&i[l].shift()}return i}function r(v){const i=[[]];for(let l=0;l<_.numColumns;l++){i[l]=[{count:0,color:""}];for(let n=0;n<_.numRows;n++)Q(n,l)&&(n!==0&&v[n][l].colorIndex!==v[n-1][l].colorIndex?i[l].push({count:1,color:le(v[n][l].colorIndex)}):(i[l][i[l].length-1].count++,i[l][i[l].length-1].color=le(v[n][l].colorIndex)));i[l].length>1&&i[l][0].count===0&&i[l].shift()}return i}let o=$(B([[]])),s=$(B([[]]));We(()=>{K.value||(G(o,B(a(_.value))),G(s,B(r(_.value))))});var f=ra(),x=j(f);F(x,()=>K.value,v=>{var i=$t(),l=j(i),n=j(l),u=h(n);J(u,65,()=>({length:_.numColumns}),V,(S,C,b)=>{var E=Zt();J(E,73,()=>N(s)[k(b)],V,(p,d,c)=>{var I=Wt();O(()=>Y(I,"style",`color: ${T.value[Ke(k(d).color)]??""};`));var A=j(I);O(()=>fe(A,ue.value?k(d).count+k(d).color:k(d).count)),w(p,I)}),w(S,E)}),w(v,i)});var m=h(x);J(m,73,()=>({length:_.numRows}),V,(v,i,l)=>{var n=la(),u=j(n);F(u,()=>K.value,C=>{var b=ta();J(b,73,()=>N(o)[k(l)],V,(E,p,d)=>{var c=ea();O(()=>Y(c,"style",`padding: 2px; color: ${T.value[Ke(k(p).color)]??""};`));var I=j(c);O(()=>fe(I,ue.value?k(p).count+k(p).color:k(p).count)),w(E,c)}),w(C,b)});var S=h(u);J(S,65,()=>({length:_.numColumns}),V,(C,b,E)=>{var p=aa(),d=j(p);Qt(d,{i:k(l),j:k(E)}),O(()=>Y(p,"style",`
						border-top: ${(k(l)%5===0&&k(l)!==0&&ye.value?`solid 2px ${T.value[1]}`:"0")??""};
						border-left: ${(k(E)%5===0&&k(E)!==0&&ye.value?`solid 2px ${T.value[1]}`:"0")??""};`)),w(C,p)}),w(v,n)}),w(e,f),te()}var oa=y('<main class="svelte-122lnz"><!></main>');function ua(e){var t=oa(),a=j(t);na(a,{$$legacy:!0}),w(e,t)}var va=y('<input class="svelte-1qwz963">');function sa(e,t){ee(t,!1);var a=Oe(()=>_),r=Oe(()=>Ot);const o=f=>f.replace(/[^0-9A-F]/g,"");kt();var s=va();Z(s),s.__input=()=>{r(r().value=o(r().value)),a(a().value=Se(z.value,L.value,r().value))},Y(s,"placeholder","0123456789ABCDEF"),_e(s,()=>r().value,f=>r(r().value=f)),w(e,s),te()}me(["input"]);var ia=(e,t,a)=>{navigator.clipboard.writeText(t(a.tileColorIndices)),alert("Copied to clipboard")},ca=y("<button>Export</button>");function fa(e,t){ee(t,!0);var a=ca();a.__click=[ia,Nt,t],w(e,a),te()}me(["click"]);var da=y('<input autocomplete="off" class="svelte-1in9ujw"> <input autocomplete="off" class="svelte-1in9ujw"> <button style="margin-right: 1rem;">Start Game</button> <!> <!>',1),_a=y('<span class="svelte-1in9ujw"> </span> <button>New Editor</button>',1),ma=y('<footer class="svelte-1in9ujw"><!></footer>');function ha(e,t){ee(t,!0);const a=v=>Number(String(v).replace(/[^0-9]/g,""));let r=$(B([[]])),o=xe(()=>Mt(_.value,"colorIndex")),s=xe(()=>Dt(N(r),N(o)));function f(v,i){_.value=Se(v,i),P.reset(),P.value[0]=we(_.value),X.reset()}var x=ma(),m=j(x);F(m,()=>!K.value,v=>{var i=da(),l=ge(i);Z(l),l.__input=()=>{z.value=a(z.value),f(z.value,L.value)};var n=h(h(l,!0));Z(n),n.__input=()=>{L.value=a(L.value),f(z.value,L.value)};var u=h(h(n,!0));u.__click=()=>{K.value=!0,G(r,B(N(o))),f(z.value,L.value)};var S=h(h(u,!0));sa(S,{});var C=h(h(S,!0));fa(C,{get tileColorIndices(){return N(o)}}),_e(l,()=>z.value,b=>z.value=b),_e(n,()=>L.value,b=>L.value=b),w(v,i)},v=>{var i=_a(),l=ge(i),n=j(l),u=h(h(l,!0));u.__click=()=>{K.reset(),f(z.value,L.value)},O(()=>fe(n,N(s)?"You win":"Keep trying")),w(v,i)}),w(e,x),te()}me(["input","click"]);var ba=y("<!> <!> <!>",1);function Ca(e,t){ee(t,!0);function a(m){m.button===0?ne.value=!0:m.button===2&&(oe.value=!0)}function r(m){m.button===0?ne.reset():m.button===2&&oe.reset(),g.value.row!==-1&&(X.value++,X.value!==P.value.length-1&&(P.value.splice(X.value),X.value=P.value.length),P.value.push(we(_.value))),g.reset(),ae.reset()}var o=ba();ie("mousedown",be,a,!1),ie("mouseup",be,r,!1),ie("contextmenu",be,m=>m.preventDefault(),!1),ot(m=>{ut.title="Pixel Pictures"});var s=ge(o);Vt(s,{});var f=h(h(s,!0));ua(f);var x=h(h(f,!0));ha(x,{}),w(e,o),te()}export{Ca as component,Ia as universal};
