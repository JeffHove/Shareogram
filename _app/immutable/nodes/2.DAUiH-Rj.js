import{a as T,t as C}from"../chunks/disclose-version.BFyFZ1Tk.js";import{v as Bt,q as mt,o as rr,R as nr,w as or,at as zt,A as ne,D as it,B as sr,a9 as Ft,H as ar,C as Xt,F as lt,G as ze,au as Ze,x as Gt,y as qt,z as ir,_ as tt,k as rt,av as It,aw as Et,ax as $t,ay as lr,a8 as cr,az as vr,Q as ur,T as fr,a5 as dr,Z as Ut,aA as hr,m as _r,h as gt,aB as pr,a2 as mr,ab as Wt,u as Vt,aC as gr,aD as wr,aE as br,E as xr,aF as yr,aG as kr,aH as Ir,n as Fe,aI as $r,X as Mt,Y as St,aJ as Tr,ac as nt,b as Cr,d as P,g,ar as ee,O as J,p as U,a as W,s as R,c as L,r as M,J as Ne,f as ot,aK as wt,aL as ie,t as K,aM as Ar}from"../chunks/runtime.kwFfegih.js";import{a as Xr,b as Er,l as st,d as ce,e as Q,s as bt,c as Mr}from"../chunks/render.DZPyI7WY.js";import{a as Sr,p as de,i as te}from"../chunks/if.QfZRQiwm.js";import{i as _e}from"../chunks/legacy.BZr0P_gC.js";function at(e,t=!1){return Qe(e,new Map)}function Qe(e,t,r,n){if(typeof e=="object"&&e!==null){const v=t.get(e);if(v!==void 0)return v;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Bt(e)){const a=[];t.set(e,a);for(let i=0;i<e.length;i+=1)a.push(Qe(e[i],t));return a}if(mt(e)===rr){const a={};t.set(e,a);for(var o in e)a[o]=Qe(e[o],t);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return Qe(e.toJSON(),t)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function xe(e,t){return t}function Rr(e,t,r,n){for(var o=[],v=t.length,a=0;a<v;a++)lr(t[a].e,o,!0);var i=v>0&&o.length===0&&r!==null;if(i){var c=r.parentNode;cr(c),c.append(r),n.clear(),we(e,t[0].prev,t[v-1].next)}vr(o,()=>{for(var l=0;l<v;l++){var s=t[l];i||(n.delete(s.k),we(e,s.prev,s.next)),ur(s.e,!i)}})}function ye(e,t,r,n,o,v=null){var a=e,i={flags:t,items:new Map,first:null},c=(t&zt)!==0;if(c){var l=e;a=ne?it(fr(l)):l.appendChild(nr())}ne&&sr();var s=null,f=!1;or(()=>{var u=r(),h=Bt(u)?u:u==null?[]:Ft(u),d=h.length;if(f&&d===0)return;f=d===0;let p=!1;if(ne){var m=a.data===ar;m!==(d===0)&&(a=Xt(),it(a),lt(!1),p=!0)}if(ne){for(var w=null,I,y=0;y<d;y++){if(ze.nodeType===8&&ze.data===dr){a=ze,p=!0,lt(!1);break}var b=h[y],A=n(b,y);I=Jt(ze,i,w,null,b,A,y,o,t),i.items.set(A,I),w=I}d>0&&it(Xt())}if(!ne){var re=Ut;Hr(h,i,a,o,t,(re.f&Ze)!==0,n)}v!==null&&(d===0?s?Gt(s):s=qt(()=>v(a)):s!==null&&ir(s,()=>{s=null})),p&&lt(!0),r()}),ne&&(a=ze)}function Hr(e,t,r,n,o,v,a){var D,F,G,S;var i=(o&hr)!==0,c=(o&(It|$t))!==0,l=e.length,s=t.items,f=t.first,u=f,h,d=null,p,m=[],w=[],I,y,b,A;if(i)for(A=0;A<l;A+=1)I=e[A],y=a(I,A),b=s.get(y),b!==void 0&&((D=b.a)==null||D.measure(),(p??(p=new Set)).add(b));for(A=0;A<l;A+=1){if(I=e[A],y=a(I,A),b=s.get(y),b===void 0){var re=u?u.e.nodes_start:r;d=Jt(re,t,d,d===null?t.first:d.next,I,y,A,n,o),s.set(y,d),m=[],w=[],u=d.next;continue}if(c&&Lr(b,I,A,o),b.e.f&Ze&&(Gt(b.e),i&&((F=b.a)==null||F.unfix(),(p??(p=new Set)).delete(b))),b!==u){if(h!==void 0&&h.has(b)){if(m.length<w.length){var j=w[0],N;d=j.prev;var ve=m[0],oe=m[m.length-1];for(N=0;N<m.length;N+=1)Rt(m[N],j,r);for(N=0;N<w.length;N+=1)h.delete(w[N]);we(t,ve.prev,oe.next),we(t,d,ve),we(t,oe,j),u=j,d=oe,A-=1,m=[],w=[]}else h.delete(b),Rt(b,u,r),we(t,b.prev,b.next),we(t,b,d===null?t.first:d.next),we(t,d,b),d=b;continue}for(m=[],w=[];u!==null&&u.k!==y;)(v||!(u.e.f&Ze))&&(h??(h=new Set)).add(u),w.push(u),u=u.next;if(u===null)continue;b=u}m.push(b),d=b,u=b.next}if(u!==null||h!==void 0){for(var _=h===void 0?[]:Ft(h);u!==null;)(v||!(u.e.f&Ze))&&_.push(u),u=u.next;var k=_.length;if(k>0){var X=o&zt&&l===0?r:null;if(i){for(A=0;A<k;A+=1)(G=_[A].a)==null||G.measure();for(A=0;A<k;A+=1)(S=_[A].a)==null||S.fix()}Rr(t,_,X,s)}}i&&tt(()=>{var se;if(p!==void 0)for(b of p)(se=b.a)==null||se.apply()}),rt.first=t.first&&t.first.e,rt.last=d&&d.e}function Lr(e,t,r,n){n&It&&Et(e.v,t),n&$t?Et(e.i,r):e.i=r}function Jt(e,t,r,n,o,v,a,i,c){var l=(c&It)!==0,s=(c&pr)===0,f=l?s?_r(o):gt(o):o,u=c&$t?gt(a):a,h={i:u,v:f,k:v,a:null,e:null,prev:r,next:n};try{return h.e=qt(()=>i(e,f,u),ne),h.e.prev=r&&r.e,h.e.next=n&&n.e,r===null?t.first=h:(r.next=h,r.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function Rt(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,o=t?t.e.nodes_start:r,v=e.e.nodes_start;v!==n;){var a=mr(v);o.before(v),v=a}}function we(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Kt(e,t,r){Wt(()=>{var n=Vt(()=>t(e,r==null?void 0:r())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function le(e){if(ne){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;Pe(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var o=e.checked;Pe(e,"checked",null),e.checked=o}}};e.__on_r=r,br(r),Xr()}}function Pe(e,t,r,n){var o=e.__attributes??(e.__attributes={});ne&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[gr]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Nr(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var Ht=new Map;function Nr(e){var t=Ht.get(e.nodeName);if(t)return t;Ht.set(e.nodeName,t=[]);for(var r,n=mt(e),o=Element.prototype;o!==n;){r=wr(n);for(var v in r)r[v].set&&t.push(v);n=mt(n)}return t}function $(e,t,r,n){var o=e.__styles??(e.__styles={});o[t]!==r&&(o[t]=r,r==null?e.style.removeProperty(t):e.style.setProperty(t,r,""))}const Dr=()=>performance.now(),ke={tick:e=>requestAnimationFrame(e),now:()=>Dr(),tasks:new Set};function Zt(e){ke.tasks.forEach(t=>{t.c(e)||(ke.tasks.delete(t),t.f())}),ke.tasks.size!==0&&ke.tick(Zt)}function Or(e){let t;return ke.tasks.size===0&&ke.tick(Zt),{promise:new Promise(r=>{ke.tasks.add(t={c:e,f:r})}),abort(){ke.tasks.delete(t)}}}function We(e,t){e.dispatchEvent(new CustomEvent(t))}function Pr(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Lt(e){const t={},r=e.split(";");for(const n of r){const[o,v]=n.split(":");if(!o||v===void 0)break;const a=Pr(o.trim());t[a]=v.trim()}return t}const Yr=e=>e;function Br(e,t,r,n){var o=(e&$r)!==0,v="both",a,i=t.inert,c,l;function s(){var p=Ut,m=rt;Mt(null),St(null);try{return a??(a=r()(t,(n==null?void 0:n())??{},{direction:v}))}finally{Mt(p),St(m)}}var f={is_global:o,in(){t.inert=i,We(t,"introstart"),c=xt(t,s(),l,1,()=>{We(t,"introend"),c==null||c.abort(),c=a=void 0})},out(p){t.inert=!0,We(t,"outrostart"),l=xt(t,s(),c,0,()=>{We(t,"outroend"),p==null||p()})},stop:()=>{c==null||c.abort(),l==null||l.abort()}},u=rt;if((u.transitions??(u.transitions=[])).push(f),Er){var h=o;if(!h){for(var d=u.parent;d&&d.f&xr;)for(;(d=d.parent)&&!(d.f&yr););h=!d||(d.f&kr)!==0}h&&Wt(()=>{Vt(()=>f.in())})}}function xt(e,t,r,n,o){var v=n===1;if(Ir(t)){var a,i=!1;return tt(()=>{if(!i){var m=t({direction:v?"in":"out"});a=xt(e,m,r,n,o)}}),{abort:()=>{i=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return o(),{abort:Fe,deactivate:Fe,reset:Fe,t:()=>n};const{delay:c=0,css:l,tick:s,easing:f=Yr}=t;var u=[];if(v&&r===void 0&&(s&&s(0,1),l)){var h=Lt(l(0,1));u.push(h,h)}var d=()=>1-n,p=e.animate(u,{duration:c});return p.onfinish=()=>{var m=(r==null?void 0:r.t())??1-n;r==null||r.abort();var w=n-m,I=t.duration*Math.abs(w),y=[];if(I>0){if(l)for(var b=Math.ceil(I/16.666666666666668),A=0;A<=b;A+=1){var re=m+w*f(A/b),j=l(re,1-re);y.push(Lt(j))}d=()=>{var N=p.currentTime;return m+w*f(N/I)},s&&Or(()=>{if(p.playState!=="running")return!1;var N=d();return s(N,1-N),!0})}p=e.animate(y,{duration:I,fill:"forwards"}),p.onfinish=()=>{d=()=>n,s==null||s(n,1-n),o()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=Fe)},deactivate:()=>{o=Fe},reset:()=>{n===0&&(s==null||s(1,0))},t:()=>d()}}function Ye(e,t,r=t){var n=Tr();st(e,"input",()=>{var o=Dt(e)?Ot(e.value):e.value;r(o),n&&o!==(o=t())&&(e.value=o??"")}),nt(()=>{var o=t();if(ne&&e.defaultValue!==e.value){r(e.value);return}Dt(e)&&o===Ot(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}const ct=new Set;function vt(e,t,r,n,o=n){var v=r.getAttribute("type")==="checkbox",a=e;let i=!1;if(t!==null)for(var c of t)a=a[c]??(a[c]=[]);a.push(r),st(r,"change",()=>{var l=r.__value;v&&(l=Nt(a,l,r.checked)),o(l)},()=>o(v?[]:null)),nt(()=>{var l=n();if(ne&&r.defaultChecked!==r.checked){i=!0;return}v?(l=l||[],r.checked=l.includes(r.__value)):r.checked=Sr(r.__value,l)}),Cr(()=>{var l=a.indexOf(r);l!==-1&&a.splice(l,1)}),ct.has(a)||(ct.add(a),tt(()=>{a.sort((l,s)=>l.compareDocumentPosition(s)===4?-1:1),ct.delete(a)})),tt(()=>{if(i){var l;if(v)l=Nt(a,l,r.checked);else{var s=a.find(f=>f.checked);l=s==null?void 0:s.__value}o(l)}})}function zr(e,t,r=t){st(e,"change",()=>{var n=e.checked;r(n)}),t()==null&&r(!1),nt(()=>{var n=t();e.checked=!!n})}function Nt(e,t,r){for(var n=new Set,o=0;o<e.length;o+=1)e[o].checked&&n.add(e[o].__value);return r||n.delete(t),Array.from(n)}function Dt(e){var t=e.type;return t==="number"||t==="range"}function Ot(e){return e===""?null:+e}function Fr(e,t,r=t){st(e,"change",()=>{r(e.files)}),nt(()=>{e.files=t()})}function q(e){var t=gt(0);return function(){return arguments.length===1?(P(t,g(t)+1),arguments[0]):(g(t),e())}}const Gr=!0,ro=Object.freeze(Object.defineProperty({__proto__:null,prerender:Gr},Symbol.toStringTag,{value:"Module"})),ae=e=>e.colorIndex!==0,Tt=()=>{const e=[[]];for(let t=0;t<$e.v;(t+=1)-1){e[t]=[];for(let r=0;r<Ie.v;(r+=1)-1)e[t][r]={colorIndex:0,Xed:!1}}return e},Qt=()=>{for(let e=0;e<x.numRows;(e+=1)-1)for(let t=0;t<x.numColumns;(t+=1)-1)x.v[e][t].colorIndex>H.v.length-1&&(x.v[e][t].colorIndex=0)},Ct=()=>{he.v!==Te.v.length-1&&Te.v.splice(he.v+1),he.v+=1,Te.v.push(at(x.v))},je=()=>{Ie.v<1||$e.v<1||(x.v=Tt(),Te.reset(),Te.v[0]=at(x.v),he.reset(),be.v=!1)},yt=e=>{let t=0;for(let r=0;r<e.length;(r+=1)-1)t*=26,t+=e.charCodeAt(r)-97+1;return t-1},kt=e=>{const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,t&255]},et=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),Ve=e=>{let t="";for(;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t},Y=e=>{let t=ee(de(e));return{set v(n){P(t,de(n))},get v(){return g(t)},reset:()=>P(t,de(e))}},jt=()=>{const e=Y(er),t=J(()=>e.v.length),r=J(()=>e.v[0].length),n=J(()=>e.v.map(i=>i.map(c=>c.colorIndex))),o=J(()=>{const i=[[]],c=e.v.length,l=e.v[0].length;for(let s=0;s<c;(s+=1)-1){i[s]=[{color:"",count:0}];for(let f=0;f<l;(f+=1)-1)if(ae(e.v[s][f])){const u=f===0?null:e.v[s][f-1].colorIndex,h=e.v[s][f].colorIndex;u!==h?i[s].push({color:Ve(h),count:1}):i[s][i[s].length-1].count+=1}i[s].length>1&&i[s][0].count===0&&i[s].shift()}return i}),v=J(()=>{const i=[[]];for(let c=0;c<g(r);(c+=1)-1){i[c]=[{color:"",count:0}];for(let l=0;l<g(t);(l+=1)-1)if(ae(e.v[l][c])){const s=l===0?null:e.v[l-1][c].colorIndex,f=e.v[l][c].colorIndex;s!==f?i[c].push({color:Ve(f),count:1}):i[c][i[c].length-1].count+=1}i[c].length>1&&i[c][0].count===0&&i[c].shift()}return i}),a=J(()=>{let i="",c=1;for(let s=0;s<g(t);(s+=1)-1)for(let f=0;f<g(r);(f+=1)-1)if(!(s===0&&f===0)){const u=f===0?e.v[s-1][g(r)-1]:e.v[s][f-1];u.colorIndex===e.v[s][f].colorIndex&&u.Xed===e.v[s][f].Xed?c+=1:(i+=c+(u.Xed?"X":Ve(u.colorIndex)),c=1)}const l=e.v[g(t)-1][g(r)-1];return i+=c+(l.Xed?"X":Ve(l.colorIndex)),i});return{get colorIndices(){return g(n)},get columnHints(){return g(v)},get numColumns(){return g(r)},get rowHints(){return g(o)},set v(i){e.v=i},get encoded(){return g(a)},get numRows(){return g(t)},get v(){return e.v},reset:e.reset}},De=Y("#476fb8"),H=Y(["#f8fafc","#020617"]),Me=Y(1),Ie=Y(5),$e=Y(5),er=Tt(),x=jt(),Se=jt(),Te=Y([er]),he=Y(0),z=Y(!1),O=Y({colorIndex:-1,column:-1,Xed:!1,row:-1}),fe=Y(1),qe=Y(!1),B=Y(50),Oe=Y(!1),At=Y(!1),be=Y(!1),Le=Y(!0),Be=Y(!1);var Re=q(()=>$e),He=q(()=>Ie),ut=q(()=>z),qr=C("<button>New Editor</button>"),Ur=C('<div class="svelte-16du0in"><input type="text" class="svelte-16du0in"> <input type="text" class="svelte-16du0in"></div>'),Wr=C('<div class="svelte-16du0in"><!></div>');function Vr(e,t){U(t,!1);const r=v=>Math.max(0,Number(String(v).replace(/[^0-9]/g,"")));_e();var n=Wr(),o=L(n);te(o,()=>ut().v,v=>{var a=qr();a.__click=()=>{ut(ut().v=!1),je()},T(v,a)},v=>{var a=Ur(),i=L(a);le(i),i.__input=()=>{He(He().v=r(He().v)),je()};var c=R(i,2);le(c),c.__input=()=>{Re(Re().v=r(Re().v)),je()},M(a),Ye(i,()=>He().v,l=>He(He().v=l)),Ye(c,()=>Re().v,l=>Re(Re().v=l)),T(v,a)}),M(n),T(e,n),W()}ce(["click","input"]);const Jr=(e,t)=>{t(x.colorIndices,H.v,r=>{const n=document.createElement("a");n.download="shareogram.png",n.href=r,n.click()})};var Kr=C("<button>Export as PNG</button>");function Zr(e,t){U(t,!1);const r=(o,v,a)=>{const i=o[0].length,c=o.length,l=document.createElement("canvas");l.width=i,l.height=c;const s=l.getContext("2d");if(s){const f=s.createImageData(i,c);for(let h=0;h<c;(h+=1)-1)for(let d=0;d<i;(d+=1)-1){const p=v[o[h][d]],m=kt(p);if(m){const[w,I,y]=m,b=(h*i+d)*4;f.data[b]=w,f.data[b+1]=I,f.data[b+2]=y,f.data[b+3]=255}}s.putImageData(f,0,0);const u=l.toDataURL("image/png");a(u)}};_e();var n=Kr();n.__click=[Jr,r],T(e,n),W()}ce(["click"]);var Qr=C('<input type="range" max="442" min="10">'),jr=C('<input accept="image/png" id="file-upload" type="file" class="svelte-nlo4k4"> <!>',1);function en(e,t){U(t,!0);let r=ee(10),n=ee(void 0);const o=(f,u,h)=>{const[d,p,m]=f,[w,I,y]=u;return Math.sqrt((d-w)**2+(p-I)**2+(m-y)**2)<=h},v=(f,u,h)=>"#"+[f,u,h].map(d=>Math.round(d).toString(16).padStart(2,"0")).join(""),a=(f,u,h)=>{const d=kt(f);for(let p=0;p<u.length;(p+=1)-1){const m=kt(u[p]);if(o(d,m,h))return p}return u.push(f),u.length-1},i=(f,u,h)=>{const d=new FileReader;d.onload=p=>{var w;const m=new Image;m.onload=()=>{const I=document.createElement("canvas"),y=I.getContext("2d");if(y){I.width=m.width,I.height=m.height,y.drawImage(m,0,0);const b=y.getImageData(0,0,m.width,m.height).data,A=[],re=[];for(let j=0;j<m.height;(j+=1)-1){const N=[];for(let ve=0;ve<m.width;(ve+=1)-1){const oe=(j*m.width+ve)*4,_=b[oe],k=b[oe+1],X=b[oe+2],D=v(_,k,X),F=a(D,A,u);N.push(F)}re.push(N)}h(re,A)}},m.src=(w=p.target)==null?void 0:w.result},d.readAsDataURL(f)};Ne(()=>{g(n)&&i(g(n)[0],g(r),(f,u)=>{Ie.v=f[0].length,$e.v=f.length,H.v=u,Me.v=0,x.v=Tt();for(let h=0;h<x.numRows;(h+=1)-1)for(let d=0;d<x.numColumns;(d+=1)-1)x.v[h][d].colorIndex=f[h][d];Ct()})});var c=jr(),l=ot(c),s=R(l,2);te(s,()=>g(n),f=>{var u=Qr();le(u),Ye(u,()=>g(r),h=>P(r,h)),T(f,u)}),Fr(l,()=>g(n),f=>P(n,f)),T(e,c),W()}var me=q(()=>qe),ft=q(()=>Me),dt=q(()=>De),ge=q(()=>H),tn=C('<button class="svelte-1ubn0yt">-</button>'),rn=C('<!> <button class="svelte-1ubn0yt">+</button>',1),nn=C('<input type="color" class="svelte-1ubn0yt">'),on=C('<div class="svelte-1ubn0yt"><div class="svelte-1ubn0yt"><!></div> <div class="svelte-1ubn0yt"><input type="color" class="svelte-1ubn0yt"> <!></div></div>');function sn(e,t){U(t,!1);const r=()=>{const s="0123456789abcdef";let f="#";for(let u=0;u<6;(u+=1)-1){const h=Math.floor(Math.random()*s.length);f+=s[h]}return f},n=()=>ge().v.length>2;_e();var o=on(),v=L(o),a=L(v);te(a,()=>!z.v,s=>{var f=rn(),u=ot(f);te(u,n,d=>{var p=tn();p.__click=()=>{ge().v.pop(),ft().v>ge().v.length-1&&ft(ft().v-=1),Qt()},T(d,p)});var h=R(u,2);h.__click=()=>{ge().v.push(r())},T(s,f)}),M(v);var i=R(v,2),c=L(i);le(c),c.__change=()=>{me(me().v=!0)},c.__click=()=>{me(me().v=!1)};var l=R(c,2);ye(l,1,()=>ge().v,xe,(s,f,u)=>{var h=nn();le(h),h.__change=()=>{me(me().v=!0)},h.__click=()=>{me(me().v=!1)},Ye(h,()=>ge().v[u],d=>ge(ge().v[u]=d)),T(s,h)}),M(i),M(o),Ye(c,()=>dt().v,s=>dt(dt().v=s)),T(e,o),W()}ce(["click","change"]);var ht=q(()=>Le),an=C('<div class="svelte-1xxyg97"><label class="switch"><input type="checkbox" class="svelte-1xxyg97"></label></div>');function ln(e,t){U(t,!1),_e();var r=an(),n=L(r),o=L(n);le(o),M(n),M(r),zr(o,()=>ht().v,v=>ht(ht().v=v)),T(e,r),W()}var ue=q(()=>fe),cn=C('<input name="border" type="radio" class="svelte-qc9c1k">'),vn=C('<div class="svelte-qc9c1k"><input name="border" type="radio" class="svelte-qc9c1k"> <input name="border" type="radio" class="svelte-qc9c1k"> <!></div>');function un(e,t){U(t,!1);const r=[];_e();var n=vn(),o=L(n);le(o),o.value=(o.__value=0)==null?"":0;var v=R(o,2);le(v),v.value=(v.__value=1)==null?"":1;var a=R(v,2);te(a,()=>Ie.v>5||$e.v>5,i=>{var c=cn();le(c),c.value=(c.__value=2)==null?"":2,vt(r,[],c,()=>ue().v,l=>ue(ue().v=l)),T(i,c)}),M(n),vt(r,[],o,()=>ue().v,i=>ue(ue().v=i)),vt(r,[],v,()=>ue().v,i=>ue(ue().v=i)),T(e,n),W()}var fn=C("<button>Reveal Tile</button>");function dn(e,t){U(t,!0);const r=J(()=>{const i=[];let c=!0;const l=x.numRows,s=x.numColumns;for(let f=0;f<l;(f+=1)-1)for(let u=0;u<s;(u+=1)-1)Se.v[f][u].colorIndex!==x.v[f][u].colorIndex&&(i.push({column:u,row:f}),c=!1);return{isDifferent:i,allSame:c}}),n=J(()=>g(r).isDifferent),o=J(()=>g(r).allSame);Ne(()=>{Oe.v=g(o)});const v=()=>{if(!Oe.v){const i=et(0,g(n).length-1),c=g(n)[i].row,l=g(n)[i].column;x.v[c][l]={colorIndex:Se.v[c][l].colorIndex,Xed:!1},Ct()}};var a=fn();a.__click=v,T(e,a),W()}ce(["click"]);const tr="none";function hn(e){return Array.isArray(e)?e:[e]}function Ge(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function _n(e,t){const r=e.getBoundingClientRect(),n=Math.abs(t[0].clientX-t[1].clientX),o=Math.abs(t[0].clientY-t[1].clientY),v=Math.min(t[0].clientX,t[1].clientX),a=Math.min(t[0].clientY,t[1].clientY),i=v+n/2,c=a+o/2,l=Math.round(i-r.left),s=Math.round(c-r.top);return{x:l,y:s}}function pn(e,t){return t.filter(r=>e.pointerId!==r.pointerId)}function Je(e,t,r,n,o){const v=e.getBoundingClientRect(),a=Math.round(r.clientX-v.left),i=Math.round(r.clientY-v.top);e.dispatchEvent(new CustomEvent(`${t}${o}`,{detail:{event:r,pointersCount:n.length,target:r.target,x:a,y:i}}))}function mn(e,t,r,n,o,v=tr){t.style.touchAction=hn(v).join(" ");let a=[];function i(l){a.push(l),Je(t,e,l,a,"down"),n==null||n(a,l);const s=l.pointerId;function f(w){s===w.pointerId&&(a=pn(w,a),a.length||u(),Je(t,e,w,a,"up"),o==null||o(a,w))}function u(){h(),d(),p(),m()}const h=Ge(t,"pointermove",w=>{a=a.map(I=>w.pointerId===I.pointerId?w:I),Je(t,e,w,a,"move"),r==null||r(a,w)}),d=Ge(t,"lostpointercapture",w=>{f(w)}),p=Ge(t,"pointerup",w=>{f(w)}),m=Ge(t,"pointerleave",w=>{a=[],u(),Je(t,e,w,a,"up"),o==null||o(a,w)})}const c=Ge(t,"pointerdown",i);return{destroy:()=>{c()}}}function Pt(e){return Math.hypot(e[0].clientX-e[1].clientX,e[0].clientY-e[1].clientY)}function gn(e,t){const r={touchAction:tr,composed:!1,...t},n="pinch";let o,v=0,a;function i(s,f){s.length===1&&(o=void 0)}function c(s,f){s.length===2&&(v=Pt(s),a=_n(e,s))}function l(s,f){if(s.length===2){const u=Pt(s);if(o!==void 0&&u!==o){const h=u/v;e.dispatchEvent(new CustomEvent(n,{detail:{scale:h,center:a,pointerType:f.pointerType}}))}o=u}return!1}return r.composed?{onMove:l,onDown:c,onUp:null}:mn(n,e,l,c,i,r.touchAction)}var wn=C('<input type="range" class="svelte-1wz0dqh">');function bn(e,t){U(t,!0);const r=100,n=10;let o=ee(1);const v=c=>{c.preventDefault(),c.deltaY<0&&B.v<r?B.v+=5:c.deltaY>0&&B.v>n&&(B.v-=5)},a=c=>{if(!Be.v)return;const l=g(o);P(o,de(c.detail.scale));const s=g(o)<l;s&&B.v>n?B.v-=1:!s&&B.v<r&&(B.v+=1)};var i=wn();Q("wheel",ie,v,void 0,!1),Kt(wt.body,c=>gn(c)),Q("pinch",wt.body,a),le(i),Pe(i,"max",r),Pe(i,"min",n),Ye(i,()=>B.v,c=>B.v=c),T(e,i),W()}var Ke=q(()=>At),xn=C("<!> <!>",1),yn=C('<div class="svelte-xm1pu0"><!> <!> <!> <!> <!> <!> <!></div>');function kn(e,t){U(t,!1);const r=f=>{f.key==="o"&&Ke(Ke().v=!Ke().v)};_e();var n=yn();Q("keydown",ie,r);var o=L(n);te(o,()=>!z.v,f=>{var u=xn(),h=ot(u);en(h,{});var d=R(h,2);Zr(d,{}),T(f,u)});var v=R(o,2);Vr(v,{});var a=R(v,2);sn(a,{});var i=R(a,2);un(i,{});var c=R(i,2);ln(c,{});var l=R(c,2);bn(l,{});var s=R(l,2);te(s,()=>z.v,f=>{dn(f,{})}),M(n),K(()=>$(n,"right",Ke().v?"0":"-200px")),T(e,n),W()}const In=e=>e;function $n(e,{delay:t=0,duration:r=400,easing:n=In}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:v=>`opacity: ${v*o}`}}var Tn=C("<div> </div>"),Cn=C('<th class="svelte-wt5xxa"></th>'),An=C('<thead><tr><th class="svelte-wt5xxa"></th><!></tr></thead>'),Xn=C("<div> </div>"),En=C("<td></td>"),Mn=C("<span>X</span>"),Sn=C('<td tabindex="0"><!></td>'),Rn=C("<tr><!><!></tr>"),Hn=C('<table class="svelte-wt5xxa"><!><tbody></tbody></table>');function Ln(e,t){U(t,!0);let r=ee(!1),n=ee(!1),o=ee(""),v=ee(0);const a=(_,k,X,D)=>{const F=Math.abs(_-X),G=Math.abs(k-D);return F===0&&G===1?D>k?"right":"left":F===1&&G===0?X>_?"below":"above":"not adjacent"},i=_=>_.Xed,c=_=>_.colorIndex===Me.v,l=(_,k)=>{_.colorIndex=k},s=_=>{_.colorIndex=0},f=_=>{_.Xed=!_.Xed},u=(_,k,X)=>{Be.v||(_.target instanceof HTMLElement&&_.target.releasePointerCapture(_.pointerId),_.button===0?P(r,!0):_.button===2&&P(n,!0),h(k,X))},h=(_,k)=>{O.v={colorIndex:x.v[_][k].colorIndex,Xed:x.v[_][k].Xed,column:k,row:_},qe.v=!1,P(v,0),z.v?g(r)?be.v&&!ae(x.v[_][k])?f(x.v[_][k]):!be.v&&!i(x.v[_][k])&&(c(x.v[_][k])?s(x.v[_][k]):l(x.v[_][k],Me.v)):g(n)&&(ae(x.v[_][k])?s(x.v[_][k]):f(x.v[_][k])):g(r)?l(x.v[_][k],Me.v):g(n)&&s(x.v[_][k])},d=_=>{_.button===0?P(r,!1):_.button===2&&P(n,!1),qe.v=!0},p=(_,k)=>{if(!g(r)&&!g(n)||g(r)&&g(n)||O.v.row===-1||Be.v)return;Ar(v),g(v)===1&&P(o,de(a(O.v.row,O.v.column,_,k)));const X=x.v[O.v.row][O.v.column];if(z.v)if(g(o)==="above"||g(o)==="below"){const D=Math.min(O.v.row,_),F=Math.max(O.v.row,_);for(let G=D;G<F+1;(G+=1)-1){const S=x.v[G][O.v.column];g(r)?be.v&&!ae(S)?S.Xed=X.Xed:!be.v&&!i(S)&&l(S,X.colorIndex):O.v.Xed&&!ae(S)?S.Xed=!1:O.v.colorIndex===0&&!ae(S)?S.Xed=!0:O.v.colorIndex!==0&&!i(S)&&s(S)}}else{const D=Math.min(O.v.column,k),F=Math.max(O.v.column,k);for(let G=D;G<F+1;(G+=1)-1){const S=x.v[O.v.row][G];g(r)?be.v&&!ae(S)?S.Xed=X.Xed:!be.v&&!i(S)&&l(S,X.colorIndex):O.v.Xed&&!ae(S)?S.Xed=!1:O.v.colorIndex===0&&!ae(S)?S.Xed=!0:O.v.colorIndex!==0&&!i(S)&&s(S)}}else g(r)?l(x.v[_][k],Me.v):s(x.v[_][k])};let m=ee(!1),w=ee(de(fe.v)),I=ee(de(Le.v));Ne(()=>{Oe.v&&!g(m)?(P(m,!0),P(w,de(fe.v)),P(I,de(Le.v)),fe.v=0,Le.v=!1):!Oe.v&&g(m)&&(P(m,!1),fe.v=g(w),Le.v=g(I))});let y=0,b=0;const A=(_,k)=>{y=_,b=k},re=_=>{var D;if(_.key!=="ArrowUp"&&_.key!=="ArrowDown"&&_.key!=="ArrowLeft"&&_.key!=="ArrowRight"&&_.key!==" ")return;_.preventDefault();let k=y,X=b;_.key==="ArrowUp"&&y>0?k-=1:_.key==="ArrowDown"&&y<x.numRows-1?k+=1:_.key==="ArrowLeft"&&b>0?X-=1:_.key==="ArrowRight"&&b<x.numColumns-1?X+=1:_.key===" "&&P(r,!0),(D=document.querySelector(`[data-row="${k}"][data-col="${X}"]`))==null||D.focus(),g(r)&&h(k,X)},j=_=>{_.key===" "&&P(r,!1)};var N=Hn();Q("pointerup",ie,d),Q("keyup",ie,j);var ve=L(N);te(ve,()=>z.v,_=>{var k=An(),X=L(k),D=R(L(X));ye(D,17,()=>({length:x.numColumns}),xe,(F,G,S)=>{var se=Cn();ye(se,21,()=>Se.columnHints[S],xe,(pe,Z)=>{var E=Tn();const V=J(()=>H.v[yt(g(Z).color)]);K(()=>$(E,"color",g(V)));var Ce=L(E,!0);M(E),K(()=>{$(E,"font-size",B.v/1.5+"px"),bt(Ce,g(Z).count)}),T(pe,E)}),M(se),T(F,se)}),M(X),M(k),T(_,k)});var oe=R(ve);ye(oe,21,()=>({length:x.numRows}),xe,(_,k,X)=>{var D=Rn(),F=L(D);te(F,()=>z.v,se=>{var pe=En();$(pe,"justify-content","right"),$(pe,"display","flex"),ye(pe,21,()=>Se.rowHints[X],xe,(Z,E)=>{var V=Xn();const Ce=J(()=>H.v[yt(g(E).color)]);K(()=>$(V,"color",g(Ce))),$(V,"justify-content","center"),$(V,"align-items","center"),$(V,"display","flex");var Ue=L(V,!0);M(V),K(()=>{$(V,"font-size",B.v/1.5+"px"),$(V,"min-width",B.v+"px"),$(V,"height",B.v+"px"),bt(Ue,g(E).count)}),T(Z,V)}),M(pe),T(se,pe)});var G=R(F);ye(G,17,()=>({length:x.numColumns}),xe,(se,pe,Z)=>{var E=Sn();E.__pointerdown=Ce=>{u(Ce,X,Z)},Pe(E,"data-row",X),Pe(E,"data-col",Z),E.__keydown=re,$(E,"transition","background-color .5s, border-radius .5s"),$(E,"text-align","center");var V=L(E);te(V,()=>i(x.v[X][Z])&&!Oe.v,Ce=>{var Ue=Mn();Br(3,Ue,()=>$n,()=>({duration:300})),T(Ce,Ue)}),M(E),K(()=>{$(E,"border-left",fe.v===0?"0":`solid ${Z%5===0&&Z!==0&&fe.v===2?`4px ${H.v[1]}`:`2px ${De.v}`}`),$(E,"border-top",fe.v===0?"0":`solid ${X%5===0&&X!==0&&fe.v===2?`4px ${H.v[1]}`:`2px ${De.v}`}`),$(E,"border-radius",Le.v===!0?"20%":"0"),$(E,"background-color",H.v[x.v[X][Z].colorIndex]),$(E,"font-size",B.v/1.5+"px"),$(E,"min-width",B.v+"px"),$(E,"height",B.v+"px"),$(E,"color",H.v[1])}),Q("pointerenter",E,()=>{p(X,Z)}),Q("focus",E,()=>{A(X,Z)}),T(se,E)}),M(D),T(_,D)}),M(oe),M(N),T(e,N),W()}ce(["pointerdown","keydown"]);var Nn=C('<div class="svelte-r2sle7"><button class="svelte-r2sle7">Undo</button> <button class="svelte-r2sle7">Redo</button></div>');function Dn(e,t){U(t,!0);const r=()=>{O.v.row!==-1&&Ct(),O.reset()},n=s=>{s.key==="z"?v():s.key==="y"&&a()},o=()=>{x.v=at(Te.v[he.v]),Qt()},v=()=>{he.v!==0&&(he.v-=1,o())},a=()=>{he.v!==Te.v.length-1&&(he.v+=1,o())};var i=Nn();Q("keydown",ie,n),Q("pointerup",ie,r);var c=L(i);c.__click=v;var l=R(c,2);l.__click=a,M(i),T(e,i),W()}ce(["click"]);var Ae=q(()=>Be),Xe=q(()=>Me),Ee=q(()=>be),On=C('<button class="svelte-6pfm0e"></button>'),Pn=C('<button class="svelte-6pfm0e">X</button>'),Yn=C('<div class="svelte-6pfm0e"><!> <!> <button aria-label="Move" class="svelte-6pfm0e"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21v-9m0 9l3-3m-3 3l-3-3m3-6V3m0 9H3m9 0h9m-9-9L9 6m3-3l3 3M3 12l3 3m-3-3l3-3m15 3l-3-3m3 3l-3 3"></path></svg></button></div>');function Bn(e,t){U(t,!1);const r=s=>{/[1-9]/.test(s.key)&&Number(s.key)<=H.v.length?n(Number(s.key)-1):s.key==="m"?v():s.key==="x"&&z.v&&o()},n=s=>{Ee(Ee().v=!1),Ae(Ae().v=!1),Xe(Xe().v=s)},o=()=>{Ee(Ee().v=!0),Ae(Ae().v=!1),Xe(Xe().v=-1)},v=()=>{Ee(Ee().v=!1),Ae(Ae().v=!0),Xe(Xe().v=-1)};_e();var a=Yn();Q("keydown",ie,r);var i=L(a);ye(i,1,()=>H.v,xe,(s,f,u)=>{var h=On();h.__click=()=>{n(u)},h.textContent=u+1,K(()=>{$(h,"border",`solid 2px ${u===Xe().v?u===0?H.v[1]:H.v[0]:H.v[u]}`),$(h,"color",u===0?H.v[1]:H.v[0]),$(h,"background-color",H.v[u])}),T(s,h)});var c=R(i,2);te(c,()=>z.v,s=>{var f=Pn();f.__click=o,K(()=>$(f,"border",`solid 2px ${Ee().v?H.v[1]:"ButtonFace"}`)),T(s,f)});var l=R(c,2);l.__click=v,M(a),K(()=>$(l,"border",`solid 2px ${Ae().v?H.v[1]:"ButtonFace"}`)),T(e,a),W()}ce(["click"]);var _t=q(()=>At),zn=C('<footer class="svelte-6v3vqk"><div><button>Options</button> <div><!> <!></div></div></footer>');function Fn(e,t){U(t,!1),_e();var r=zn(),n=L(r);$(n,"border-top-right-radius","8px"),$(n,"border-top-left-radius","8px"),$(n,"overflow","hidden"),$(n,"display","flex");var o=L(n);o.__click=()=>{_t(_t().v=!_t().v)};var v=R(o,2),a=L(v);Bn(a,{});var i=R(a,2);Dn(i,{}),M(v),M(n),M(r),T(e,r),W()}ce(["click"]);var Yt=q(()=>Se),pt=q(()=>z),Gn=C("<span> </span>"),qn=C('<button class="svelte-93z3ep">Start Game</button>'),Un=C('<header class="svelte-93z3ep"><!></header>');function Wn(e,t){U(t,!1),_e();var r=Un(),n=L(r);te(n,()=>pt().v,o=>{var v=Gn();$(v,"padding-top","10px");var a=L(v,!0);M(v),K(()=>bt(a,Oe.v?"You win!":"Keep trying")),T(o,v)},o=>{var v=qn();v.__click=()=>{pt(pt().v=!0),Yt(Yt().v=x.v),je()},T(o,v)}),M(r),T(e,r),W()}ce(["click"]);const Vn=e=>{let t=!1,r,n,o,v;const a=l=>{(l.button===1||l.button===0&&Be.v)&&(l.preventDefault(),t=!0,r=l.pageX-e.offsetLeft,n=l.pageY-e.offsetTop,o=e.scrollLeft,v=e.scrollTop,e.style.cursor="grabbing",document.addEventListener("mousemove",i),document.addEventListener("mouseup",c))},i=l=>{if(!t)return;l.preventDefault();const s=l.pageX-e.offsetLeft,f=l.pageY-e.offsetTop,u=(s-r)*2,h=(f-n)*2;e.scrollLeft=o-u,e.scrollTop=v-h},c=()=>{t=!1,e.style.cursor="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",c)};return e.addEventListener("mousedown",a),{destroy:()=>{e.removeEventListener("mousedown",a),e.style.cursor=""}}};var Jn=C('<li class="svelte-1eeowdb"></li>'),Kn=C('<div class="github svelte-1eeowdb" id="dynamic-svg"><a href="https://github.com/Tree52/Shareogram" aria-label="Link to GitHub repository" class="svelte-1eeowdb"><svg height="96" width="98" xmlns="http://www.w3.org/2000/svg" class="svelte-1eeowdb"><path clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="#fff" fill-rule="evenodd" class="svelte-1eeowdb"></path></svg></a></div> <ul class="background svelte-1eeowdb"></ul> <!>  <main class="svelte-1eeowdb"><!></main> <!> <!>',1);function no(e,t){U(t,!0);let r=ee(!1);const n=d=>{const p=d.match(/(\d+|[a-zX]+)/g),m=[],w=[];if(p)for(let I=0;I<p.length;(I+=1)-1){const y=p[I];isNaN(Number(y))?w.push(y):m.push(Number(y))}if(m.length!==w.length)throw new Error("Error: different number of counts and letters.");return{letters:w,numbers:m}},o=d=>{const p=n(d),m=[];let w=0,I=0;for(let y=0;y<$e.v;(y+=1)-1)m[y]=[];for(let y=0;y<p.numbers.length;(y+=1)-1)for(let b=0;b<p.numbers[y];(b+=1)-1)p.letters[y]==="X"?m[w][(I+=1)-1]={colorIndex:0,Xed:!0}:m[w][(I+=1)-1]={colorIndex:yt(p.letters[y]),Xed:!1},I>Ie.v-1&&(w+=1,I=0);return m},v=d=>(d.preventDefault(),d.returnValue="",""),a=()=>{const d=window.location.hash;if(d){try{const p=d.slice(1).split("-");z.v=!!Number(p[0]),Ie.v=Number(p[1]),$e.v=Number(p[2]),De.v="#"+p[3];const m=z.v?p.slice(4,-2):p.slice(4,-1);for(let w=0;w<m.length;(w+=1)-1)H.v[w]="#"+m[w];x.v=o(p[z.v?p.length-2:p.length-1]),Te.v[0]=at(x.v),z.v&&(Se.v=o(p[p.length-1]))}catch{alert("Couldn't load the code from the URL. Make sure you copied the link correctly.")}qe.v=!0}P(r,!0)};Ne(()=>{for(;!g(r);)a()}),Ne(()=>{if(qe.v){const d=[Number(z.v),Ie.v,$e.v,De.v.slice(1)];for(let p=0;p<H.v.length;(p+=1)-1)d.push(H.v[p].slice(1));d.push(x.encoded),z.v&&d.push(Se.encoded),window.location.hash=d.join("-")}}),Ne(()=>{document.body.style.color=H.v[0];const d=document.querySelector("#dynamic-svg path");d==null||d.setAttribute("fill",H.v[0])});var i=Kn();Mr(d=>{wt.title="Shareogram"}),Q("contextmenu",ie,d=>d.preventDefault()),Q("load",ie,a),Q("beforeunload",ie,d=>{v(d)});var c=R(ot(i),2);ye(c,20,()=>({length:35}),xe,(d,p)=>{var m=Jn();const w=J(()=>et(0,60)+"s");K(()=>$(m,"animation-delay",g(w)));const I=J(()=>et(5,200)+"px");K(()=>$(m,"width",g(I)));const y=J(()=>et(0,100)+"%");K(()=>$(m,"left",g(y))),T(d,m)}),M(c);var l=R(c,2);Wn(l,{});var s=R(l,2);s.__click=()=>{At.v=!1};var f=L(s);Ln(f,{}),M(s),Kt(s,d=>Vn(d));var u=R(s,2);Fn(u,{});var h=R(u,2);kn(h,{}),K(()=>{$(c,"background-color",De.v),$(s,"touch-action",Be.v?"auto":"none")}),T(e,i),W()}ce(["click"]);export{no as component,ro as universal};
